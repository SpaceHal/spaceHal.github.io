(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{117:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return b})),t.d(a,"metadata",(function(){return m})),t.d(a,"rightToc",(function(){return c})),t.d(a,"default",(function(){return i}));var n=t(3),s=t(7),r=(t(0),t(131)),b={title:"Proportional-Regler f\xfcr einen Kantenfolger",sidebar_label:"P-Regler (Kantenfolger)",description:"Mit einem einfachen Proportional-Regler das Fahrverhalten eines Linienfolgers (Arduino-Roboter) verbessern."},m={unversionedId:"robotik/edge_P_Control",id:"robotik/edge_P_Control",isDocsHomePage:!1,title:"Proportional-Regler f\xfcr einen Kantenfolger",description:"Mit einem einfachen Proportional-Regler das Fahrverhalten eines Linienfolgers (Arduino-Roboter) verbessern.",source:"@site/docs/robotik/edge_P_Control.md",slug:"/robotik/edge_P_Control",permalink:"/docs/robotik/edge_P_Control",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/robotik/edge_P_Control.md",version:"current",sidebar_label:"P-Regler (Kantenfolger)",sidebar:"someSidebar",previous:{title:"3-Stufen-Regler f\xfcr einen Kantenfolger",permalink:"/docs/robotik/edgeFollower"},next:{title:"Gewichteter Mittelwert (Massenschwerpunkt) f\xfcr mehrere Bodensensoren",permalink:"/docs/robotik/weightedAverage"}},c=[{value:"Wahl des Faktors k_p",id:"wahl-des-faktors-k_p",children:[]},{value:"Pseudocode P-Regler",id:"pseudocode-p-regler",children:[]},{value:"Werte begrenzen mit <code>constrain()</code>",id:"werte-begrenzen-mit-constrain",children:[]},{value:"Aufgaben (Kantenfolger P-Regler)",id:"aufgaben-kantenfolger-p-regler",children:[]}],p={rightToc:c};function i(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Der einfache ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/robotik/edgeFollower"}),"3-Stufen Algorithmus")," zum Kantenfolgen funktioniert bei Linien und Abzweigung meistens ganz gut, l\xe4sst aber den Roboter die Linie entlangzappeln, anstatt ihr geschmeidig zu folgen. Auch wird es mit dem einfachen Algorithmus schwierig, dem Roboter bei Kreuzungen oder Abzweigung ein konkretes Verhalten zu programmieren. "),Object(r.b)("p",null,"Ein wesentlich besserer Ansatz ist der ",Object(r.b)("strong",{parentName:"p"},"Proportional-Regler")," (P-Regler), bei dem es nicht nur drei verschiedene Unterscheidungsstufen mit drei verschiedenen Motordrehzahlen gibt, sondern f\xfcr jeden Unterschied zwischen Soll- und Istwert ein geeigneter Wert zum Steuern der Motoren berechnet wird."),Object(r.b)("img",{src:"/img/robotik/GraphPRegler.png",alt:"Proportional Control",width:"550px",class:"center"}),Object(r.b)("p",null,"Bei einem (Proportional-)Regler wird davon ausgegangen, dass ein System eine ",Object(r.b)("strong",{parentName:"p"},"Sollgr\xf6\xdfe")," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("mi",{parentName:"mrow"},"w")),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"w")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.02691em"}}),"w")))))," einhalten soll. In unseren Fall ist die Sollgr\xf6\xdfe der vom Sensor zu erzielende Sensorwert der Linienkante. Weicht der ",Object(r.b)("strong",{parentName:"p"},"Istwert")," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("mi",{parentName:"mrow"},"y")),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"y")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.625em",verticalAlign:"-0.19444em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03588em"}}),"y"))))),", also der aktuell gemessene Sensorwert von der Sollgr\xf6\xdfe ab, so l\xe4sst sich die ",Object(r.b)("strong",{parentName:"p"},"Regeldifferenz")," bzw. der ",Object(r.b)("strong",{parentName:"p"},"Fehlerwert")," ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("mi",{parentName:"mrow"},"e")),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"e")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal"}),"e")))))," leicht als Differenz aus Soll- und Istwert berechnen: ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("mi",{parentName:"mrow"},"e"),Object(r.b)("mo",{parentName:"mrow"},"="),Object(r.b)("mi",{parentName:"mrow"},"w"),Object(r.b)("mo",{parentName:"mrow"},"\u2212"),Object(r.b)("mi",{parentName:"mrow"},"y")),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"e = w - y")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal"}),"e"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2777777777777778em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mrel"}),"="),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2777777777777778em"}}))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.66666em",verticalAlign:"-0.08333em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.02691em"}}),"w"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2222222222222222em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mbin"}),"\u2212"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2222222222222222em"}}))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.625em",verticalAlign:"-0.19444em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03588em"}}),"y"))))),". ",Object(r.b)("strong",{parentName:"p"},"Das Ziel eines jeden Reglers ist es, diesen Fehlerwert so klein wie m\xf6glich zu halten.")," Im Fall des Kantenfolgers bedeutet dies, dass der Roboter m\xf6glichst immer \xfcber der Kante bleibt."),Object(r.b)("p",null,"Im Gegensatz zum 3-Stufen-Regler, bei dem f\xfcr drei Bereiche drei feste Werte f\xfcr die Motordrehzahl (und damit das Kurvenverhalten) festgelegt wurden, wird beim P-Regler die ",Object(r.b)("strong",{parentName:"p"},"Abweichung der Motordrehzahl")," ",Object(r.b)("inlineCode",{parentName:"p"},"deltaSpeed")," von einer Normgr\xf6\xdfe ",Object(r.b)("inlineCode",{parentName:"p"},"speed")," gesteuert. Die aktuelle Motordrehzahl ergibt sich dann als Summe aus der Normgr\xf6\xdfe und dieser Abweichung. Wird die Geschwindigkeits\xe4nderung ",Object(r.b)("inlineCode",{parentName:"p"},"deltaSpeed")," zur Drehzahl des linken Rades addiert und von der Drehzahl des rechten Rades abgezogen, f\xe4hrt der Roboter mit einer positiven Geschwindigkeits\xe4nderung nach rechts und mit einer negativen Differenzgeschwindigkeit nach links:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"// PSEUDO-CODE \n// speed > 0: Rechtskurve\n// speed < 0: Linkskurve\n\nleftSpeed  = speed + deltaSpeed  // Drehzahl linkes Rad\nrightSpeed = speed - deltaSpeed  // Drehzahl rechtes Rad\n")),Object(r.b)("p",null,"Die ",Object(r.b)("strong",{parentName:"p"},"Geschwindigkeits\xe4nderung")," der  Motordrehzahl ","\\","( \\Delta \\text{Speed} ","\\",")  l\xe4sst sich mit einem Proportionalit\xe4tsfaktor ","\\","( k_p ","\\",") aus dem Fehlerwert bestimmen:"),Object(r.b)("div",{className:"math math-display"},Object(r.b)("span",Object(n.a)({parentName:"div"},{className:"katex-display"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("mi",Object(n.a)({parentName:"mrow"},{mathvariant:"normal"}),"\u0394"),Object(r.b)("mtext",{parentName:"mrow"},"Speed"),Object(r.b)("mo",{parentName:"mrow"},"="),Object(r.b)("msub",{parentName:"mrow"},Object(r.b)("mi",{parentName:"msub"},"k"),Object(r.b)("mi",{parentName:"msub"},"p")),Object(r.b)("mo",{parentName:"mrow"},"\u22c5"),Object(r.b)("mi",{parentName:"mrow"},"e")),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"\\Delta \\text{Speed} = k_p \\cdot e")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.8888799999999999em",verticalAlign:"-0.19444em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),"\u0394"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord text"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),"Speed")),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2777777777777778em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mrel"}),"="),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2777777777777778em"}}))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.980548em",verticalAlign:"-0.286108em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03148em"}}),"k"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"msupsub"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-t vlist-t2"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.15139200000000003em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"pstrut",style:{height:"2.7em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"sizing reset-size6 size3 mtight"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal mtight"}),"p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-s"}),"\u200b")),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.286108em"}}),Object(r.b)("span",{parentName:"span"})))))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2222222222222222em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mbin"}),"\u22c5"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mspace",style:{marginRight:"0.2222222222222222em"}}))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.43056em",verticalAlign:"0em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal"}),"e")))))),Object(r.b)("h3",{id:"wahl-des-faktors-k_p"},"Wahl des Faktors ",Object(r.b)("span",Object(n.a)({parentName:"h3"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("msub",{parentName:"mrow"},Object(r.b)("mi",{parentName:"msub"},"k"),Object(r.b)("mi",{parentName:"msub"},"p"))),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"k_p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.980548em",verticalAlign:"-0.286108em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03148em"}}),"k"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"msupsub"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-t vlist-t2"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.15139200000000003em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"pstrut",style:{height:"2.7em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"sizing reset-size6 size3 mtight"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal mtight"}),"p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-s"}),"\u200b")),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.286108em"}}),Object(r.b)("span",{parentName:"span"}))))))))))),Object(r.b)("p",null,"Die Wahl des Faktors ",Object(r.b)("span",Object(n.a)({parentName:"p"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("msub",{parentName:"mrow"},Object(r.b)("mi",{parentName:"msub"},"k"),Object(r.b)("mi",{parentName:"msub"},"p"))),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"k_p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.980548em",verticalAlign:"-0.286108em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03148em"}}),"k"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"msupsub"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-t vlist-t2"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.15139200000000003em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"pstrut",style:{height:"2.7em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"sizing reset-size6 size3 mtight"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal mtight"}),"p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-s"}),"\u200b")),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.286108em"}}),Object(r.b)("span",{parentName:"span"}))))))))))," hat einen erheblichen Einfluss auf das Fahrverhalten des Roboters."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Ist ",Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("msub",{parentName:"mrow"},Object(r.b)("mi",{parentName:"msub"},"k"),Object(r.b)("mi",{parentName:"msub"},"p"))),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"k_p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.980548em",verticalAlign:"-0.286108em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03148em"}}),"k"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"msupsub"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-t vlist-t2"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.15139200000000003em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"pstrut",style:{height:"2.7em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"sizing reset-size6 size3 mtight"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal mtight"}),"p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-s"}),"\u200b")),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.286108em"}}),Object(r.b)("span",{parentName:"span"}))))))))))," zu klein, wird der Fehler nicht schnell genug ge\xe4ndert und der Roboter wird bei einer Kurve ganz schnell die Kante verlieren. Der Fehler steigt also immer weiter an."),Object(r.b)("li",{parentName:"ul"},"Ist  ",Object(r.b)("span",Object(n.a)({parentName:"li"},{className:"math math-inline"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(r.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(r.b)("semantics",{parentName:"math"},Object(r.b)("mrow",{parentName:"semantics"},Object(r.b)("msub",{parentName:"mrow"},Object(r.b)("mi",{parentName:"msub"},"k"),Object(r.b)("mi",{parentName:"msub"},"p"))),Object(r.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"k_p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.980548em",verticalAlign:"-0.286108em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal",style:{marginRight:"0.03148em"}}),"k"),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"msupsub"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-t vlist-t2"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.15139200000000003em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"pstrut",style:{height:"2.7em"}})),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"sizing reset-size6 size3 mtight"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"mord mathnormal mtight"}),"p")))),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-s"}),"\u200b")),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist-r"}),Object(r.b)("span",Object(n.a)({parentName:"span"},{className:"vlist",style:{height:"0.286108em"}}),Object(r.b)("span",{parentName:"span"}))))))))))," jedoch zu gro\xdf gew\xe4hlt, so f\xe4ngt der Roboter an, hin- und herzuschwingen. In diesem Fall spricht man auch von einem ",Object(r.b)("strong",{parentName:"li"},"oszillierenden Verhalten"),". Diese Oszillationsbewegungen entstehen, weil auf relativ kleine Fehler mit einem zu starken Gegenlenken (also einem zu gro\xdfen ",Object(r.b)("inlineCode",{parentName:"li"},"deltaSpeed"),") reagiert wird. Man kennt dieses Verhalten von Kindern, die Fahrrad fahren lernen. So lange, wie sie noch unsicher sind, wackeln sie stark mit dem Lenker, um das Gleichgewicht zu halten. Erst mit etwas mehr \xdcbung wird ihr Fahrverhalten ruhiger und das Schlingern des Rades nimmt ab."),Object(r.b)("li",{parentName:"ul"},"\xc4hnlich wie bei dem 3-Stufenregler hat die Geschwindigkeit des Roboters einen gro\xdfen Einfluss auf das Ergebnis des Reglers. Beginnen Sie am besten mit ",Object(r.b)("strong",{parentName:"li"},"einer geringen Geschwindigkeit"),".")),Object(r.b)("h3",{id:"pseudocode-p-regler"},"Pseudocode P-Regler"),Object(r.b)("p",null,"Der Algorithmus f\xfcr den Kantenfolger mit P-Regler k\xf6nnte wie folgt aussehen:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-txt"}),"// PSEUDO-CODE\n// Einfacher P-Regler f\xfcr einen Kantenfolger\n\nwertKante = 600   // Besser automatisch bestimmen.\nKp        = 0.3   // Proportionalit\xe4tsfaktor des P-Reglers. Ausprobieren, um den richtigen Wert zu finden.\nspeed     = 100   // Richtwert f\xfcr die Motordrehzahl (Normwert)\n\nwiederhole\n    sensorWert = leseIRLicht()\n    e = wertKante - sensorWert       // Fehlerwert, Regeldifferenz\n    deltaSpeed = Kp * e              // Geschwindigkeits\xe4nderung\n    leftSpeed  = speed + deltaSpeed  // Drehzahl linkes Rad\n    rightSpeed = speed - deltaSpeed  // Drehzahl rechtes Rad\n    begrenze(leftSpeed)              // Werte d\xfcrfen nur in einem bestimmten ...\n    begrenze(rightSpeed)             // Wertebereich liegen (z.B. 0 ... 127)\n    setSpeeds(leftSpeed,rightSpeed)  // Aktualisieren der Motordrehzahlen\n")),Object(r.b)("h3",{id:"werte-begrenzen-mit-constrain"},"Werte begrenzen mit ",Object(r.b)("inlineCode",{parentName:"h3"},"constrain()")),Object(r.b)("p",null,"In vielen F\xe4llen ist es sinnvoll, die Werte von ",Object(r.b)("inlineCode",{parentName:"p"},"leftSpeed")," und ",Object(r.b)("inlineCode",{parentName:"p"},"rightSpeed")," zu begrenzen. Hierf\xfcr eignet sich die Arduino-Funktion:"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"wertC = constrain(wert,min,max)"),", "),Object(r.b)("p",null," welche den Eingabewert ",Object(r.b)("inlineCode",{parentName:"p"},"wert")," auf den angegebenen Minimal- ",Object(r.b)("inlineCode",{parentName:"p"},"min")," und Maximalwert ",Object(r.b)("inlineCode",{parentName:"p"},"max")," begrenzt. Hierbei gilt:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"wertC")," = ",Object(r.b)("inlineCode",{parentName:"li"},"wert"),", wenn ",Object(r.b)("inlineCode",{parentName:"li"},"wert")," zwischen ",Object(r.b)("inlineCode",{parentName:"li"},"min")," und ",Object(r.b)("inlineCode",{parentName:"li"},"max")," "),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"wertC")," = ",Object(r.b)("inlineCode",{parentName:"li"},"min"),", wenn  ",Object(r.b)("inlineCode",{parentName:"li"},"wert")," kleiner ",Object(r.b)("inlineCode",{parentName:"li"},"min")," ist "),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"wertC")," = ",Object(r.b)("inlineCode",{parentName:"li"},"max"),", wenn  ",Object(r.b)("inlineCode",{parentName:"li"},"wert")," gr\xf6\xdfer ",Object(r.b)("inlineCode",{parentName:"li"},"max")," ist ")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Beispiel")),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-arduino"}),"// Begrenzt leftSpeed auf Werte von 0 bis 255\nleftSpeed = constrain(leftSpeed, 0, 255); \n")),Object(r.b)("h3",{id:"aufgaben-kantenfolger-p-regler"},"Aufgaben (Kantenfolger P-Regler)"),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),Object(r.b)("strong",{parentName:"h5"},"\xdcben"))),Object(r.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("ol",{parentName:"div"},Object(r.b)("li",{parentName:"ol"},"Programmieren Sie einen Kantenfolger mit ",Object(r.b)("strong",{parentName:"li"},"P-Regler"),". Variieren Sie den Kp-Faktor und analysieren Sie dessen Einfluss auf das Verhalten des Roboters auf gerader Strecke und in Kurvenfahrten. Bei welchem Wert folgt der Roboter ohne zu schwingen einer ",Object(r.b)("strong",{parentName:"li"},"geraden")," Linie?s")))))}i.isMDXComponent=!0},131:function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return j}));var n=t(0),s=t.n(n);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function b(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?b(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function c(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var p=s.a.createContext({}),i=function(e){var a=s.a.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):m(m({},a),e)),t},l=function(e){var a=i(e.components);return s.a.createElement(p.Provider,{value:a},e.children)},O={inlineCode:"code",wrapper:function(e){var a=e.children;return s.a.createElement(s.a.Fragment,{},a)}},o=s.a.forwardRef((function(e,a){var t=e.components,n=e.mdxType,r=e.originalType,b=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),l=i(t),o=n,j=l["".concat(b,".").concat(o)]||l[o]||O[o]||r;return t?s.a.createElement(j,m(m({ref:a},p),{},{components:t})):s.a.createElement(j,m({ref:a},p))}));function j(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=t.length,b=new Array(r);b[0]=o;var m={};for(var c in a)hasOwnProperty.call(a,c)&&(m[c]=a[c]);m.originalType=e,m.mdxType="string"==typeof e?e:n,b[1]=m;for(var p=2;p<r;p++)b[p]=t[p];return s.a.createElement.apply(null,b)}return s.a.createElement.apply(null,t)}o.displayName="MDXCreateElement"}}]);