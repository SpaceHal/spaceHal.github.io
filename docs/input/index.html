<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Den Arduino mit einem Taster steuern · Let&#x27;s rule the bots!  </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Im folgenden Programmbeispiel werden **digitale Signale eingelesen**. Hierzu soll ein Taster über den digitalen Pin 3 mit dem Arduino verbunden und eine LED gesteuert werden. "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Den Arduino mit einem Taster steuern · Let&#x27;s rule the bots!  "/><meta property="og:type" content="website"/><meta property="og:url" content="https://spacehal.github.io/"/><meta property="og:description" content="Im folgenden Programmbeispiel werden **digitale Signale eingelesen**. Hierzu soll ein Taster über den digitalen Pin 3 mit dem Arduino verbunden und eine LED gesteuert werden. "/><meta property="og:image" content="https://spacehal.github.io/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://spacehal.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/LogoSmallRed.svg"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://spacehal.github.io/blog/atom.xml" title="Let&#x27;s rule the bots!   Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://spacehal.github.io/blog/feed.xml" title="Let&#x27;s rule the bots!   Blog RSS Feed"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,500,600"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:200,300,300i,400,400i,500,600"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script><script type="text/javascript" src="/js/load-mathjax_v2.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/LogoSmallRed.svg" alt="Let&#x27;s rule the bots!  "/><h2 class="headerTitleWithLogo">Let&#x27;s rule the bots!  </h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/helloworld" target="_self">Arduino</a></li><li class=""><a href="/docs/botEdgeFollower" target="_self">Robotik</a></li><li class=""><a href="/docs/zumoInstallation" target="_self">Zumo</a></li><li class=""><a href="/docs/moreInfo" target="_self">Links</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Grundlagen</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Grundlagen<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/helloworld">Hallo Welt</a></li><li class="navListItem"><a class="navItem" href="/docs/seriell">Serielle Schnittstelle</a></li><li class="navListItem"><a class="navItem" href="/docs/loopVariable">Variablen und Schleifen</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/input">Eingaben und if-Verzweigung</a></li><li class="navListItem"><a class="navItem" href="/docs/millis">Zeitkritische Aufgaben</a></li><li class="navListItem"><a class="navItem" href="/docs/debounce">Entprellen</a></li><li class="navListItem"><a class="navItem" href="/docs/stateMachine">Endliche Automaten</a></li><li class="navListItem"><a class="navItem" href="/docs/pwm">PWM Signal</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Motorsteuerung<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/motorHBridge">Motor mit H-Brücke</a></li><li class="navListItem"><a class="navItem" href="/docs/motorPWM">Motordrehzahl</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Den Arduino mit einem Taster steuern</h1></header><article><div><span><p>Im folgenden Programmbeispiel werden <strong>digitale Signale eingelesen</strong>. Hierzu soll ein Taster über den digitalen Pin 3 mit dem Arduino verbunden und eine LED gesteuert werden.</p>
<h2><a class="anchor" aria-hidden="true" id="einen-taster-direkt-anschließen"></a><a href="#einen-taster-direkt-anschließen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Einen Taster direkt anschließen</h2>
<p><img src="../img/ohnePullUpWiderstand.svg" alt="drawing" width=450px height=auto/></p>
<p>Die einfachste Möglichkeit, einen Taster anzuschließen, wäre, ihn direkt mit einer Spannungsquelle (Vcc) und einem Arduino-Pin zu verbinden (<em>Abb. links</em>). Ein digitaler Arduino-Pin, welcher als Input konfiguriert ist, weist einen sehr hohen Innenwiderstand ($ 100 \text{ M}\Omega$) auf. Wird der Taster nun gedrückt, so würde die gesamte Spannung am Eingangspin abfallen. In unserem Beispiel also  ca. 5V am Pin 3.</p>
<p>Ist der Taster jedoch <strong>offen</strong>, so wäre das Potential am Eingangspin unbestimmt oder auch schwebend (<em>engl.: floating</em>) und nicht, wie man annehmen könnte, null. In Abhängigkeit von der Umgebung (z.B. eine Hand, die sich der Schaltung nähert) ändert sich die anliegende Spannung, und der Zustand des Pins ist unvorhersehbar (HIGH oder LOW).</p>
<p>Um das zu ändern, müsste der Pin außerdem mit der Masse verbunden werden. In der rechten Abbildung ist genau das geschehen, nur mit dem Unterschied, dass der Taster zwischen dem Pin und der Masse liegt. Ist der Taster offen, wäre alles in Ordnung (am Pin liegen dann Vcc = 5V). Problematisch wird es aber, wenn der Taster gedrückt wird. Dann entsteht ein <strong>Kurzschluss</strong> zwischen Vcc und GND, was unbedingt vermieden werden sollte.</p>
<h2><a class="anchor" aria-hidden="true" id="taster-mit-pullup-widerstand-anschließen"></a><a href="#taster-mit-pullup-widerstand-anschließen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Taster mit Pullup-Widerstand anschließen</h2>
<p><img src="../img/PullUpWiderstand.svg" alt="drawing" width=400px height=auto/></p>
<p>Zum Verhindern eines Kurzschlusses beim Schließen des Tasters wird zwischen Vcc und dem Taster ein Widerstand eingefügt. Ist der Taster offen, wird die Eingangsspannung des Pins auf die angeschlossene Spannung Vcc hochgezogen, ohne dass es einen Kurzschluss gibt. Daher auch der Name <strong>Pullup-Widerstand</strong>. Ist der Taster geschlossen, so ist der Pin direkt mit der Masse verbunden und die Spannung beträgt 0V.</p>
<p>Geeignete Werte für eine Pullup-Widerstand sind $R_\text{up} = 10 k\Omega\ \cdots 50 k\Omega $</p>
<h2><a class="anchor" aria-hidden="true" id="interner-pull-up-widerstand"></a><a href="#interner-pull-up-widerstand" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interner Pull-Up Widerstand</h2>
<p><img src="../img/intPullUpWiderstand.svg" alt="UP_Down Widerstand"></p>
<p>Alternativ zu einem externen Pullup-Widerstand, der extra in die Schaltung eingefügt werden muss, gibt es beim Arduino auch die Möglichkeit, einen internen Pullup-Widerstand zu konfigurieren.</p>
<pre><code class="hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TASTER_PIN 3            </span>

<span class="hljs-built_in">pinMode</span>(TASTER_PIN, <span class="hljs-literal">INPUT</span>);     <span class="hljs-comment">// Pin als Eingang definieren</span>
<span class="hljs-built_in">digitalWrite</span>(TASTER_PIN, <span class="hljs-literal">HIGH</span>); <span class="hljs-comment">// Pullup-Widerstand des Pins einschalten</span>
</code></pre>
<p>Alternativ kann der Pullup-Widerstand auch direkt eingeschaltet werden:</p>
<pre><code class="hljs css language-Arduino"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TASTER_PIN 3  </span>
<span class="hljs-built_in">pinMode</span>(TASTER_PIN, <span class="hljs-literal">INPUT_PULLUP</span>); <span class="hljs-comment">// Pin als Eingang mitPullup-Widerstand konfigurieren</span>
</code></pre>
<blockquote>
<p>Wird ein Taster ohne Pullup- oder Pulldown-Widerstand an den Arduino angeschlossen, so ist der Spannungszustand des Taster-Pins nicht stabil und der Zustand des Eingangspins kann sich zufällig ändern.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="die-if-verzweigung---eine-bedingte-anweisung"></a><a href="#die-if-verzweigung---eine-bedingte-anweisung" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Die <code>if</code> Verzweigung - Eine bedingte Anweisung</h2>
<p>Hat man den Status eines Tasters eingelesen, möchte man in aller Regel den weiteren Programmablauf vom Tasterzustand abhängig machen. Hierfür eignet sich die <code>if</code> Verzweigung als bedingte Anweisung.</p>
<p><img src="../img/ifCondition.png" alt="drawing" width=290px height=auto/></p>
<p>Nach dem Schlüsselwort <code>if</code> folgt in Klammern eine Bedingung. Diese Bedingung kann zum Beispiel ein Vergleich <code>zahl==1</code> oder <code>zahl&gt;1</code> sein. Ist die Bedingung wahr, also <code>true</code>, dann wird der in geschweiften Klammern <code>{ ... }</code>  stehende Code ausgeführt.</p>
<pre><code class="hljs css language-Arduino"><span class="hljs-keyword">int</span> zahl = <span class="hljs-number">6</span>;

<span class="hljs-keyword">if</span>( zahl &gt; <span class="hljs-number">6</span> )
{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Die Zahl ist größer als 6."</span>);
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="if--else-if--else"></a><a href="#if--else-if--else" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>if ... else if ... else</code></h3>
<p>Oft kommt es aber vor, dass in einem Programm viele verschiedene Verzweigungen benötigt werden, wobei für jede einzelne Verzweigung eine Bedingung benötigt wird. Hierfür stehen die Schlüsselwört <code>else if</code> und <code>else</code> zur Verfügung.</p>
<p><img src="../img/ifElseIfCondition.png" alt="drawing" width=380px height=auto/></p>
<p>Ist die Bedingung  einer <code>if</code> Anweisung <strong>nicht erfüllt</strong>, so wird als nächstes überprüft, ob eine <code>else if</code> Anweisung gegeben ist und ob deren Bedingung erfüllt ist. In einer <code>if</code> Verzweigung können beliebig viele  <code>else if</code> Anweisungen angegeben werden, welche alle nacheinander abgearbeitet werden.</p>
<p>Mit dem abschließenden Schlüsselwort <code>else</code> können Anweisungen für den Fall angegeben werden, dass keine der bei <code>if</code> oder <code>else if</code> angegebenen Bedingungen wahr ist.</p>
<pre><code class="hljs css language-Arduino"><span class="hljs-keyword">int</span> zahl = <span class="hljs-number">6</span>;

<span class="hljs-keyword">if</span>( zahl &lt; <span class="hljs-number">6</span> )
{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Die Zahl ist kleiner als 6."</span>);
}
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( (zahl &gt;= <span class="hljs-number">6</span>) &amp;&amp;  (zahl &lt;= <span class="hljs-number">10</span>))  <span class="hljs-comment">// Bedingung können mit &amp;&amp; als logisches UND verknüpft werden</span>
{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Die Zahl liegt zwischen 6 und 10."</span>);
}
<span class="hljs-keyword">else</span> <span class="hljs-comment">// ohne Bedingung</span>
{
  <span class="hljs-built_in">Serial</span>.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Die Zahl ist größer als 10."</span>);
}
</code></pre>
<blockquote>
<p>Sobald eine Bedingung in  einer <code>if ... else if</code> Verzweigung erfüllt ist, wird der zugehörige Code ausgeführt. Weitere, noch nicht überprüfte Bedingungen werden ignoriert und nicht mehr überprüft.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="einfaches-taster-beispiel"></a><a href="#einfaches-taster-beispiel" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Einfaches Taster-Beispiel</h2>
<p>Im folgenden Beispiel soll exemplarisch der Zustand eines Tasters vom Arduino eingelesen werden. Ist der Taster gedrückt, soll eine angeschlossene LED aufleuchten, ist er nicht gedrückt, soll nichts passieren.</p>
<h3><a class="anchor" aria-hidden="true" id="schaltung"></a><a href="#schaltung" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Schaltung</h3>
<p><img src="../img/BreadBoard_ButtonLED.png" alt="drawing" width=550px height=auto/></p>
<h3><a class="anchor" aria-hidden="true" id="programm"></a><a href="#programm" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Programm</h3>
<pre><code class="hljs css language-Arduino"><span class="hljs-comment">/* Einfaches Beispiel zum Einlesen des Tasterzustandes (externer Pullup-Widerstand) */</span>

<span class="hljs-meta"># <span class="hljs-meta-keyword">define</span> PIN_LED 8  <span class="hljs-comment">// Pin LED</span></span>
<span class="hljs-meta"># <span class="hljs-meta-keyword">define</span> PIN_TASTER 3   <span class="hljs-comment">// Pin Taster</span></span>
<span class="hljs-keyword">int</span> zustandTaster = <span class="hljs-number">0</span>; <span class="hljs-comment">// Speichert den aktuellen Zustand des Tasters</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">pinMode</span>(PIN_LED, <span class="hljs-literal">OUTPUT</span>);  <span class="hljs-comment">// Pin als Ausgang definieren</span>
  <span class="hljs-built_in">pinMode</span>(PIN_TASTER, <span class="hljs-literal">INPUT</span>);    <span class="hljs-comment">// Pin als Eingang definieren</span>
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  zustandTaster = <span class="hljs-built_in">digitalRead</span>(PIN_TASTER); <span class="hljs-comment">// Tasterzustand einlesen</span>

  <span class="hljs-comment">// Prüfen des Tasterzustandes; wenn gedrückt (LOW), dann ...</span>
  <span class="hljs-keyword">if</span> (zustandTaster == <span class="hljs-literal">LOW</span>) {
    <span class="hljs-built_in">digitalWrite</span>(PIN_LED, <span class="hljs-literal">HIGH</span>); <span class="hljs-comment">// LED anschalten</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">digitalWrite</span>(PIN_LED, <span class="hljs-literal">LOW</span>); <span class="hljs-comment">// ansonsten LED ausschalten</span>
  }
}

</code></pre>
<h4><a class="anchor" aria-hidden="true" id="neue-befehle"></a><a href="#neue-befehle" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Neue Befehle</h4>
<div id="info"> 
<ul>
<li><code>pinMode(pin,INPUT)</code> konfiguriert den angegebenen Pin am Arduino als Eingang.</li>
<li><code>digitalWrite(pin,{HIGH/LOW})</code> aktiviert (HIGH) bzw. deaktiviert (LOW) den Pullup-Widerstand, wenn der Pin als <strong>Eingang</strong> definiert ist.</li>
<li><code>zustandTaster = digitalRead(pin)</code> liest den digitalen Zustand eines Pins ein und gibt entsprechend dem Zustand als Rückgabewert <code>LOW</code> oder <code>HIGH</code> zurück.</li>
</ul>
</div>
<h3><a class="anchor" aria-hidden="true" id="aufgaben"></a><a href="#aufgaben" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aufgaben</h3>
<div id="aufgabe">
<ol>
<li>Ein Taster ist mit einem Pullup-Widerstand mit dem Arduino verbunden. Welches Level (HIGH oder LOW) liegt am Arduino an, wenn der Taster offen bzw. geschlossen ist?</li>
<li>Ändern Sie die obige <a href="einfaches-beispiel">Beispielschaltung</a> und nutzen Sie anstelle des externen, einen internen Pullup-Widerstand. Ändern Sie hierfür auch den Programmcode.</li>
<li>Ändern Sie die obige <a href="einfaches-beispiel">Beispielschaltung</a> (<strong>ohne Änderung im Programmcode)</strong> so, dass die LED beim Drücken des Tasters ausgeschaltet wird. Sie also leuchtet, wenn der Taster nicht gedrückt ist. Bauen sie die Schaltung auf und dokumentieren Sie diese z.B. mit <a href="https://fritzing.org/home/">Fritzing</a>.</li>
<li>Ändern sie das gegebene <a href="input#programm">Programm</a> so, dass beim Drücken des Tasters eine angeschlossene LED blinkt (1 Sekunde an, 1 Sekunde aus). Verhält sich ihr Programm, wie Sie es erwarten?</li>
<li>Bauen Sie eine Schaltung mit zwei LEDs und zwei Tastern auf. Schreiben Sie anschließend ein Programm mit folgenden Eigenschaften:
<ol>
<li>Die erst LED leuchtet, wenn der Taster 1 gedrückt ist.</li>
<li>Die zweite LED leuchtet, wenn der Taster 2 gedrückt ist.</li>
<li>Beide LEDs leuchten, wenn beide Taster gedrückt sind.</li>
<li>Verwenden Sie nur <strong>eine</strong> <code>if ... else if ... else</code> Verzweigung.</li>
</ol></li>
</ol>
</div>
<h2><a class="anchor" aria-hidden="true" id="ein-taster-zum-umschalten"></a><a href="#ein-taster-zum-umschalten" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ein Taster zum Umschalten</h2>
<p>Wird mit einem Taster eine LED gesteuert, so sollte die LED <strong>beim ersten Drücken des Tasters angehen und beim zweiten Drücken wieder ausgehen</strong>. Anstatt also die LED einfach anzuschalten, wenn der Taster gedrückt ist, muss sich das System den Zustand der LED und des Tasters merken und entsprechend den Zustand der LED ändern.</p>
<pre><code class="hljs css language-Arduino"><span class="hljs-comment">/* Unvollständiger Code für eine tastergesteuerte LED */</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TASTER 3          <span class="hljs-comment">// Taster-Pin mit Pull-UP Widerst. (LOW = gedrückt)</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED 13            <span class="hljs-comment">// an Schaltung anpassen</span></span>

<span class="hljs-keyword">int</span> statusLED = <span class="hljs-literal">LOW</span>;             
<span class="hljs-keyword">int</span> statusTaster = <span class="hljs-literal">HIGH</span>;         <span class="hljs-comment">// aktueller Status des Taster</span>
<span class="hljs-keyword">int</span> statusTasterLetzter = <span class="hljs-literal">HIGH</span>;  <span class="hljs-comment">// Status des Tasters beim letzten loop() Durchlauf</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">/* - TASTER mit Pull-UP-Widerstand konfigurieren
       - LED konfigurieren 
       - serielle Schnittstelle konfigurieren */</span>    
} <span class="hljs-comment">// END setup()</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span></span>{
  statusTaster = <span class="hljs-built_in">digitalRead</span>(TASTER); <span class="hljs-comment">// Taster-Pin einlesen</span>
  <span class="hljs-comment">/*    
    WENN (Status des Tasters geändert){
        WENN (Taster gedrückt){
            Status der LED ändern
        }
    }              
  */</span>
  statusTasterLetzter = statusTaster; <span class="hljs-comment">// aktualisieren des letzten Tasterstatus</span>
  <span class="hljs-built_in">digitalWrite</span>(LED,statusLED);
} <span class="hljs-comment">// END loop()</span>

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="aufgaben-1"></a><a href="#aufgaben-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aufgaben</h3>
<div id="aufgabe">
<ol>
<li>Lesen Sie den unvollständigen Programmcode für eine tastergesteuerte LED sorgfältig durch und ergänzen Sie die fehlenden Programmteile. Sollte sich die LED nicht verhalten wie gewünscht, nutzen Sie die <a href="seriell">serielle Schnittstelle</a> zum Debuggen.</li>
<li>Fügen Sie in Ihr Programm eine Zählvariable ein, welche bei jedem Betätigen des Tasters um eins erhöht wird. Geben Sie den Wert der Zählvariable über die serielle Schnittstelle auf dem PC aus. Nutzen Sie für die serielle Schnittstelle eine hohe Baudrate (115.200  baud).</li>
</ol>
</div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/loopVariable"><span class="arrow-prev">← </span><span>Variablen und Schleifen</span></a><a class="docs-next button" href="/docs/millis"><span>Zeitkritische Aufgaben</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#einen-taster-direkt-anschließen">Einen Taster direkt anschließen</a></li><li><a href="#taster-mit-pullup-widerstand-anschließen">Taster mit Pullup-Widerstand anschließen</a></li><li><a href="#interner-pull-up-widerstand">Interner Pull-Up Widerstand</a></li><li><a href="#die-if-verzweigung---eine-bedingte-anweisung">Die <code>if</code> Verzweigung - Eine bedingte Anweisung</a><ul class="toc-headings"><li><a href="#if--else-if--else"><code>if ... else if ... else</code></a></li></ul></li><li><a href="#einfaches-taster-beispiel">Einfaches Taster-Beispiel</a><ul class="toc-headings"><li><a href="#schaltung">Schaltung</a></li><li><a href="#programm">Programm</a></li><li><a href="#aufgaben">Aufgaben</a></li></ul></li><li><a href="#ein-taster-zum-umschalten">Ein Taster zum Umschalten</a><ul class="toc-headings"><li><a href="#aufgaben-1">Aufgaben</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/LogoSmallRed.svg" alt="Let&#x27;s rule the bots!  " width="66" height="58"/></a><div><a href="/blog">Blog</a><a href="https://www.youtube.com/watch?v=ARJ8cAGm6JE">HAL 9000</a></div><div></div></section><section class="copyright">Copyright © 2020 Stefan Warm</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8a8e0b313860e2fe23d0d40ec6dcd649',
                indexName: 'spacehal',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>