<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>PWM Signale mit analogwrite() · Let&#x27;s rule the bots!  </title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Mit dem Arduino UNO (oder Leonard) ist es nur möglich eine Spannung von 0 V oder 5 V zu erzeugen. Ein analoges Signal mit beliebigen Spannungswerten (z.B. 4.3 V) kann nicht direkt ausgegeben werden. Trotzdem ist es möglich die Intensität einer LED oder die Drehgeschwindigkeit eines Gleichstrommotors zu steuern. Hiefür werden Signale mit **Pulsweitenmodulation** (PWM) verwendet. "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="PWM Signale mit analogwrite() · Let&#x27;s rule the bots!  "/><meta property="og:type" content="website"/><meta property="og:url" content="https://spacehal.github.io/"/><meta property="og:description" content="Mit dem Arduino UNO (oder Leonard) ist es nur möglich eine Spannung von 0 V oder 5 V zu erzeugen. Ein analoges Signal mit beliebigen Spannungswerten (z.B. 4.3 V) kann nicht direkt ausgegeben werden. Trotzdem ist es möglich die Intensität einer LED oder die Drehgeschwindigkeit eines Gleichstrommotors zu steuern. Hiefür werden Signale mit **Pulsweitenmodulation** (PWM) verwendet. "/><meta property="og:image" content="https://spacehal.github.io/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://spacehal.github.io/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/LogoSmallRed.svg"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://spacehal.github.io/blog/atom.xml" title="Let&#x27;s rule the bots!   Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://spacehal.github.io/blog/feed.xml" title="Let&#x27;s rule the bots!   Blog RSS Feed"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,600"/><link rel="stylesheet" href="/css/code-block-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/load-mathjax.js" async=""></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/LogoSmallRed.svg" alt="Let&#x27;s rule the bots!  "/><h2 class="headerTitleWithLogo">Let&#x27;s rule the bots!  </h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/helloworld" target="_self">Arduino</a></li><li class=""><a href="/docs/botEdgeFollower" target="_self">Robotik</a></li><li class=""><a href="/docs/zumoInstallation" target="_self">Zumo</a></li><li class=""><a href="/docs/moreInfo" target="_self">Links</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Grundlagen</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Grundlagen<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/helloworld">Hallo Welt</a></li><li class="navListItem"><a class="navItem" href="/docs/seriell">Serielle Schnittstelle</a></li><li class="navListItem"><a class="navItem" href="/docs/loopVariable">Variablen und Schleifen</a></li><li class="navListItem"><a class="navItem" href="/docs/input">Digitale Eingaben</a></li><li class="navListItem"><a class="navItem" href="/docs/millis">Zeitkritische Aufgaben</a></li><li class="navListItem"><a class="navItem" href="/docs/stateMachine">Endliche Automaten</a></li><li class="navListItem"><a class="navItem" href="/docs/debounce">Entprellen</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/pwm">PWM Signal</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Motorsteuerung<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/motorHBridge">Motor mit H-Brücke</a></li><li class="navListItem"><a class="navItem" href="/docs/motorPWM">Motordrehzahl</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">PWM Signale mit analogwrite()</h1></header><article><div><span><p>Mit dem Arduino UNO (oder Leonard) ist es nur möglich eine Spannung von 0 V oder 5 V zu erzeugen. Ein analoges Signal mit beliebigen Spannungswerten (z.B. 4.3 V) kann nicht direkt ausgegeben werden. Trotzdem ist es möglich die Intensität einer LED oder die Drehgeschwindigkeit eines Gleichstrommotors zu steuern. Hiefür werden Signale mit <strong>Pulsweitenmodulation</strong> (PWM) verwendet.</p>
<p>Bei der Pulsweitenmodulation wird die Spannung abwechselnd an- und ausgeschaltet. Das Verhältnis zwischen der Anzeit \(t_\text{an}\) und der Periodendauer des Signals (also \( t_\text{an} + t_\text{aus} \) ) wird <strong>Tastverhältnis</strong> oder auch <em>duty cycle</em> genannt. Das Tastverhältnis kann nur Werte zwischen 0% und 100% annehmen (siehe folgende Abbildung).</p>
<p><img src="../img/PWM.png" alt="drawing" width=300px height=auto/></p>
<h2><a class="anchor" aria-hidden="true" id="arduino"></a><a href="#arduino" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Arduino</h2>
<pre><code class="hljs css language-Arduino"><span class="hljs-built_in">analogWrite</span>(PWM_Pin, wert); <span class="hljs-comment">// PWM-Signal</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dimmen-einer-led"></a><a href="#dimmen-einer-led" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dimmen einer LED</h3>
<pre><code class="hljs css language-Arduino"><span class="hljs-comment">/*   Dimmen einer LED mit einem PWM-Signal   */</span>
<span class="hljs-keyword">int</span> ledRed = <span class="hljs-number">9</span>;  <span class="hljs-comment">// LED am PWM Pin (~9) (VORWIDERSTAND nicht vergessen)</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
   <span class="hljs-built_in">pinMode</span>(ledRed, <span class="hljs-literal">OUTPUT</span>);
}
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
 <span class="hljs-comment">/* Zum Ändern der LED Helligkeit wird ein PWM-Signal verwendet.  Das Taktverhältnis des PWM-Signals
 wird in einer for-Schleife langsam von 0 (0%) auf 255 (100%) erhöht und anschließend wieder reduziert. */</span> 
 <span class="hljs-keyword">int</span> helligkeit = <span class="hljs-number">0</span>
 <span class="hljs-keyword">for</span> (helligkeit; helligkeit &lt;= <span class="hljs-number">255</span>; helligkeit++)
 {
   <span class="hljs-built_in">analogWrite</span>(ledRed, helligkeit); <span class="hljs-comment">// PWM Signal am LED Pin</span>
   <span class="hljs-built_in">delay</span>(<span class="hljs-number">20</span>);
 }

 <span class="hljs-keyword">for</span> (helligkeit; helligkeit &gt; <span class="hljs-number">0</span>; helligkeit--)
 {
   <span class="hljs-built_in">analogWrite</span>(ledRed, helligkeit); <span class="hljs-comment">// PWM Signal am LED Pin</span>
   <span class="hljs-built_in">delay</span>(<span class="hljs-number">20</span>);
 }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/debounce"><span class="arrow-prev">← </span><span>Entprellen</span></a><a class="docs-next button" href="/docs/motorHBridge"><span>Motor mit H-Brücke</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#arduino">Arduino</a><ul class="toc-headings"><li><a href="#dimmen-einer-led">Dimmen einer LED</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/LogoSmallRed.svg" alt="Let&#x27;s rule the bots!  " width="66" height="58"/></a><div><a href="/blog">Blog</a><a href="https://www.youtube.com/watch?v=ARJ8cAGm6JE">HAL 9000</a></div><div></div></section><section class="copyright">Copyright © 2019 Stefan Warm</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8a8e0b313860e2fe23d0d40ec6dcd649',
                indexName: 'spacehal',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>