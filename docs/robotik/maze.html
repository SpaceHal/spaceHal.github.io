<!doctype html>
<html lang="de" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-robotik/maze">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Mit einem Roboter ein Labyrinth lösen | Rule The Bots</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://spacehal.github.io/docs/robotik/maze"><meta data-rh="true" name="docusaurus_locale" content="de"><meta data-rh="true" name="docsearch:language" content="de"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mit einem Roboter ein Labyrinth lösen | Rule The Bots"><meta data-rh="true" name="description" content="Einführung"><meta data-rh="true" property="og:description" content="Einführung"><meta data-rh="true" name="keywords" content="Arduino,Roboter,Linienfolger,Zumo 32U4,Labyrinth,Labyrinth lösen,Rechte Hand Regel,Linke Hand Regel,Linke Hand Regel Labyrinth,Rechte Hand Regel Labyrinth,Labyrinth Algorithmus"><link data-rh="true" rel="icon" href="/img/LogoSmallRed.svg"><link data-rh="true" rel="canonical" href="https://spacehal.github.io/docs/robotik/maze"><link data-rh="true" rel="alternate" href="https://spacehal.github.io/docs/robotik/maze" hreflang="de"><link data-rh="true" rel="alternate" href="https://spacehal.github.io/docs/robotik/maze" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TBHHG3V4Z4-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Rule The Bots" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.215a6c83.css">
<link rel="preload" href="/assets/js/runtime~main.5bf24dae.js" as="script">
<link rel="preload" href="/assets/js/main.c4d5baee.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Zum Hauptinhalt springen"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Zum Hauptinhalt springen</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">RuleTheBots</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/arduino/helloworld">Arduino</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/robotik/beginning">Robotik</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/zumo32u4/gettingStarted">Zumo32u4</a><a class="navbar__item navbar__link" href="/docs/more/links">Links</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Suche"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Suche</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Zurück nach oben scrollen" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--dark_i4oU"><b>RuleTheBots</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/arduino">Arduino</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Arduino&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/robotik/beginning">Roboter</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Roboter&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linienfolger">Linienfolger</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Linienfolger&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/motorencoder">Motorencoder</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Motorencoder&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/lokalisierung">Lokalisierung</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Lokalisierung&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/projekte">Projekte</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Projekte&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/objektFinden">Suchen und Ausrichten</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/botBarcode">Barcode Auslesen</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/robotik/maze">Labyrinth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/gridNavigation">Gitternavigation</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/zumo-32u4">Zumo 32u4</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Zumo 32u4&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Seitenleiste einklappen" aria-label="Seitenleiste einklappen" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/robotik/beginning"><span itemprop="name">Roboter</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/projekte"><span itemprop="name">Projekte</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Labyrinth</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Auf dieser Seite</button></div><div class="theme-doc-markdown markdown"><header><h1>Mit einem Roboter ein Labyrinth lösen</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="einführung">Einführung<a class="hash-link" href="#einführung" title="Direkter Link zur Überschrift">​</a></h2><p>Neben dem <a href="/docs/robotik/edgeFollower">Linienfolger</a> ist das Lösen eines Labyrinths eine <a href="https://www.youtube.com/watch?v=2V6QE0GJ-zw" target="_blank" rel="noopener noreferrer">beliebte</a> Aufgabe für mobile Roboter. Labyrinthe gibt es in vielen verschiedenen Formen und Größen. Die im Folgenden beschriebenen Ansätze und Ideen beziehen sich alle auf Labyrinthe, bei denen die Pfade mit einer schwarzen Linie auf weißem Grund dargestellt sind und Abzweigungen immer im 90 Grad Winkel erfolgen. </p><img loading="lazy" src="/img/robotik/MazeOverview.png" alt="Allgemeines Labyrinth" width="400px" class="center img_ev3q"><p>Im Wesentlichen kann das Lösen eines Labyrinths in <strong>vier unterschiedliche Teilaufgaben</strong> unterteilt werden:</p><ol><li>Der Roboter muss einer <strong><a href="/docs/category/linienfolger">Linie folgen</a></strong> können. </li><li>Der Roboter muss die unterschiedlichen  <strong><a href="/docs/robotik/maze#unterschiedliche-kreuzungstypen-erkennen">Kreuzungen erkennen</a></strong>.</li><li>Der Roboter muss an einer Kreuzung zu jeden beliebigen Weg <strong><a href="/docs/robotik/maze#abbiegen-an-kreuzungen">abbiegen</a></strong> können. </li><li>Der Roboter benötigt Regeln (z.B. Rechte-Hand-Regel), wie er das <strong><a href="/docs/robotik/maze#l%C3%B6sen-des-labyrinths-mit-rechter-hand-regel">Ende des Labyrinths</a></strong> finden soll.</li></ol><p>Im Folgenden wird auf die Realisierung der Punkt 2 bis 4 eingegangen. Algorithmen für einen <a href="/docs/category/linienfolger">Linienfolger</a> wurden an anderer Stelle besprochen und werden hier nicht weiter aufgeführt.  </p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Auch wenn sich die folgenden Programmauszüge auf den Roboter <a href="https://www.pololu.com/category/286/original-zumo-32u4-robot" target="_blank" rel="noopener noreferrer">Zumo 32u4</a> der Firma Pololu beziehen, sind die Erläuterungen sehr allgemeiner Natur und sollten sich problemlos auf andere Roboter übertragen lassen.</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unterschiedliche-kreuzungstypen-erkennen">Unterschiedliche Kreuzungstypen erkennen<a class="hash-link" href="#unterschiedliche-kreuzungstypen-erkennen" title="Direkter Link zur Überschrift">​</a></h2><p>Die Kreuzungserkennung des Roboters soll alle Kreuzungen (Abzweigungen, Sackgassen, Ziel) des Labyrinths erkennen. Insgesamt gibt es 8 unterschiedliche Kreuzungstypen, die mit den Bodensensoren erkannt werden können. Wie in der Abbildung dargestellt, wird jedem Kreuzungstyp eine Abkürzung (L, R, LG, RG, etc.) zugewiesen, welche später zum Lösen des Labyrinths benötigt werden.</p><img loading="lazy" src="/img/robotik/IntersectionTypes.png" alt="Kreuzungstypen beim Labyrinth" width="600px" class="center img_ev3q"><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="aufzählungsdatentyp-enum-für-die-kreuzungstypen">Aufzählungsdatentyp <code>enum</code> für die Kreuzungstypen<a class="hash-link" href="#aufzählungsdatentyp-enum-für-die-kreuzungstypen" title="Direkter Link zur Überschrift">​</a></h3><p>Ähnlich wie bei den <a href="/docs/arduino/stateMachine#enum-aufz%C3%A4hlungstyp">endlichen Automaten</a>, macht es auch bei den Kreuzungstypen Sinn, einen eigenen Datentyp (<code>KreuzungsTyp</code>) für die verschiedenen Kreuzungen zu erstellen.</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Deklaration eines neuen Datentyps `KreuzungsTyp`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum </span><span class="token class-name">KreuzungsTyp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">L</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> R</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LRG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ZIEL</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Damit lässt sich dann eine Variable vom erstellten Datentyp <code>KreuzungsTyp</code> deklarieren und ihr zum Beispiel den Wert <code>LRG</code> für eine Kreuzung mit 4 Abzweigungen zuweisen:</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KreuzungsTyp kreuzung </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LRG</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Variable `kreuzung` vom Typ `KreuzungsTyp`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Außerdem kann eine Funktion <code>bestimmenKreuzung()</code> definiert werden, deren Rückgabewert vom Typ <code>KreuzungsTyp</code> ist:</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Funktion mit Rückgabewert vom Typ `KreuzungsTyp`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KreuzungsTyp </span><span class="token function" style="color:#d73a49">bestimmenKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dadurch lässt sich die gesamte <strong>Kreuzungserkennung</strong> in einer Funktion <code>bestimmenKreuzung()</code> durchführen und das Ergebnis wird als Datentyp <code>KreuzungsTyp</code> zurückgegeben. Das vollständige Programm zum Lösen des Labyrinths wird damit deutlich lesbarer und strukturierter.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bestimmen-des-kreuzungstypes">Bestimmen des Kreuzungstypes<a class="hash-link" href="#bestimmen-des-kreuzungstypes" title="Direkter Link zur Überschrift">​</a></h3><img loading="lazy" src="/img/robotik/IntersectionErkennung.png" alt="Kreuzungstypen erkennen" width="580" class="center img_ev3q"><p>Das <strong>Bestimmen der Kreuzungstypen</strong> erfolgt in drei Schritten:</p><ol><li>Der Roboter folgt so lange der Linie, bis <strong>einer</strong> der <strong>äußeren Sensoren eine Abzweigung erkennt</strong> (<em>Welche Bedingung muss für eine Sackgasse erfüllt sein?</em>)</li><li>Anschließend sollte der Roboter bis <strong>auf die Mitte der Linie fahren</strong>. Dort wird erneut <strong>auf Abzweigungen überprüft</strong>. So wird sicher gestellt, dass alle Abzweigungen erkannt werden, auch wenn der Roboter nicht ganz senkrecht auf die Abzweigungen trifft.</li><li>Im nächsten Schritt <strong>fährt</strong> der Roboter <strong>über die Linie hinweg</strong>. Für das später folgende Abbiegen ist es am besten, wenn er genau mittig auf der Kreuzung stehen bleibt. Nun kann der Roboter überprüfen, ob es auch einen zusätzlichen <strong>Weg geradeaus</strong> gibt oder ob das Ziel (Ende des Labyrinths) erreicht wurde.</li></ol><p>Der 1. Schritt wird mit der <a href="/docs/robotik/maze#funktion-fahrenzurkreuzung">Funktion <code>fahrenZurKreuzung()</code></a> und der 2. und 3. Schritt mit der <a href="/docs/robotik/maze#funktion-bestimmenkreuzung">Funktion <code>bestimmenKreuzung()</code></a> realisiert.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="funktion-fahrenzurkreuzung">Funktion <code>fahrenZurKreuzung()</code><a class="hash-link" href="#funktion-fahrenzurkreuzung" title="Direkter Link zur Überschrift">​</a></h3><p>Die Funktion <code>fahrenZurKreuzung()</code> soll den Roboter solange der Linie folgen lassen, bis ein Bodensensor den Beginn einer Kreuzung erkennt (1. Schritt). Wurde der Beginn einer Kreuzung erkannt, wird anschließend die Funktion <code>bestimmenKreuzung()</code> zum Ermitteln des Kreuzungstypes aufgerufen (2. und 3. Schritt).</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Folgt der Linie bis zur nächsten Kreuzung und </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// gibt den erkannten Kreuzungstyp zurück.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KreuzungsTyp </span><span class="token function" style="color:#d73a49">fahrenZurKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> kreuzung </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// der Linie folgen, bis eine Kreuzung erkannt wurde</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">kreuzung</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">folgenLinie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Bedingung für eine Kreuzung (oder Sackgasse)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kreuzung </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">aufLinie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">aufLinie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">aufLinie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Wurde eine Kreuzung erkannt, Motoren stoppen ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  motors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSpeeds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ... und `bestimmenKreuzung` aufrufen und das Ergebnis zurückgeben.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bestimmenKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Die Funktion <code>folgenLinie()</code> realisiert den Algorithmus zum <a href="/docs/category/linienfolger">Linienfolgen</a> mit einem geeignetem Algorithmus.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="auflinie"><code>aufLinie()</code><a class="hash-link" href="#auflinie" title="Direkter Link zur Überschrift">​</a></h4><p>Die in <code>fahrenZurKreuzung()</code> verwendete Funktion <code>bool aufLinie(byte pSensor)</code> gibt <code>true</code> zurück, wenn sich der angegebene Bodensensor über einer schwarzen Linie befindet und <code>false</code>, wenn der Sensor keine Linie erkannt hat. </p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Die Funktion aktualisiert NICHT die Sensorwerte. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Zum Auslesen der Sensoren die Funktion readCalibrated() aufrufen.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">aufLinie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">byte</span><span class="token plain"> pSensor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> schwelleLinie </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// Schwellert zum Erkennen einer Abzweigung</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> lineSensorValues</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">pSensor</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> schwelleLinie</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// globaler Array `lineSensorValues[]`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Zum Erkennen einer Kreuzung sollte ein möglichst kleiner Schwellwert für die Sensoren verwendet werden (z.B. <code>100</code>). Ist der Schwellwert zu groß, wird der Algorithmus zum Linienfolgen zu lange ausgeführt und führt so zu einer ungenauen Positionierung des Roboters an der Kreuzung (der Roboter würde leicht schräg an der Kreuzung stehen).</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="funktion-bestimmenkreuzung">Funktion <code>bestimmenKreuzung()</code><a class="hash-link" href="#funktion-bestimmenkreuzung" title="Direkter Link zur Überschrift">​</a></h3><p>Der 2. und 3. Schritt für die <a href="/docs/robotik/maze#bestimmen-des-kreuzungstypes">Bestimmung des Kreuzungstypes</a> soll mit der Funktion  <code>bestimmenKreuzung()</code> umgesetzt werden. Ohne die fertige Funktion <code>bestimmenKreuzung()</code> zu präsentieren, sollen an dieser Stelle ein paar Hinweise zur möglichen Realisierung gegeben werden. </p><p>Die Hauptaufgabe der Funktion <code>bestimmenKreuzung()</code> ist das Erkennen der Kreuzungstypen. Deshalb sollte die Funktion vom Typ <code>KreuzungsTyp</code> sein und am Ende den ermittelten Kreuzungstyp zurückgegeben.</p><p>Das Erkennen des Kreuzungstyps wird wie oben beschrieben umgesetzt. Da sich die verschiedenen Kreuzungstypen aber aus unterschiedlichen Kombinationen von erkannten Abzweigungen ergibt, werden die boolschen Variablen <code>lLinks</code>, <code>lRechts</code> und <code>lGerade</code> genutzt, um zuerst die erkannten Abzweigungen zu speichern.</p><p>Anschließend wird der sich <strong>ergebende Kreuzungstyp</strong> bestimmt und als Wert vom Typ <code>KreuzungsTyp</code> (also <code>L</code>, <code>R</code>, <code>LG</code>, <code>RG</code>, etc.) von der Funktion zurückgegeben.</p><p>Damit der Roboter die Kreuzungen zuverlässig erkennt, sollte für die Positionierung auf der Linie (2. Schritt) und der Positionierung mittig auf der Kreuzung (3. Schritt) der <a href="/docs/robotik/wheelEncoder#auslesen-der-rad-encoder-beim-zumo-32u4">Motorencoder</a> verwendet werden. Eine einfache Positionierung mit einer Zeitsteuerung kann gelegentlich funktionieren, stellt aber eine sehr fehleranfällige Lösung dar.</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bestimmen des Kreuzungstypes. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Die Funktion sollte aufgerufen werden, sobald ein Sensor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// etwas anderes als der zu folgenden Linie erkennt.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KreuzungsTyp </span><span class="token function" style="color:#d73a49">bestimmenKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// An der Kreuzung erkannte Abzweigungen (0: keine Abzweigung)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> lLinks  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Abzweigung links </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> lRechts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Abzweigungs rechts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> lGerade </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// Weg gereadeaus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    Die Funktion wird aufgerufen, wenn bereits ein Sensor einen Abzweig erkannt hat.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        1. Die Sensoren auf die Mitte der Linie positionieren (Motorencoder verwenden!).</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        2. Sensorwerte einlesen.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        3. Abzweigungen bestimmten und `lLinks`/`lRechts` entsprechend setzen.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        4. Weiterfahren, bis der Roboter mittig auf der Kreuzung steht.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        5. Sensorwerte einlesen</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        6. `lGerade` setzen und auf Ziel überprüfen</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Funktion gibt mit `return` den ermittelten KreuzungsTyp zurück</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* Abzweigung links */</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* Abzweigung rechts */</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> R</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* Abzweigung links, gerade*/</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> LG</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* usw. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fahrenstreckemm"><code>fahrenStreckeMM()</code><a class="hash-link" href="#fahrenstreckemm" title="Direkter Link zur Überschrift">​</a></h4><p>Außerdem wird die Funktion <code>fahrenStreckeMM()</code> benötigt, welche den Roboter mit Hilfe der Radencoder eine exakte Strecke zurücklegen lässt. Dadurch wird die exakte Positionierung des Roboters auf der Kreuzung vereinfacht.</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">MM_PRO_IMPULS</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">0.128</span><span class="token macro property expression" style="color:#36acaa">  </span><span class="token macro property comment" style="color:#999988;font-style:italic">// Auflösung des Encoders,  Impulse * MM_PRO_IMPULS = Millimeter (Umrechnung Impulse in mm)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> fahrenStreckeMM</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> pSpeed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> pStreckeMM</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> encoderImpulse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pStreckeMM </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> MM_PRO_IMPULS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Zu programmierende Eigenschaft:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Fahre solange geradeaus, wie die mittlere Anzahl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// beider Motorenencoder kleiner als `encoderImpulse` ist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ... </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_lb9f alert alert--info details_b_Ee ueben" data-collapsed="true"><summary>Aufgaben</summary><div><div class="collapsibleContent_i85q"> <p>Schreiben Sie eine Funktion <code>KreuzungsTyp fahrenZurKreuzung()</code>, welche den Roboter einer Linie entlang bis zu einer Kreuzung folgt, den Kreuzungstyp der Linie bestimmt (es sollen alle Typen erkannt werden) und stoppt. Der <strong>Rückgabewert</strong> der Funktion ist der ermittelte Kreuzungstyp.</p><p>Verwenden Sie die selbstgeschriebene Funktion <code>KreuzungsTyp fahrenZurKreuzung()</code>, um mit dem Roboter <strong>beliebige</strong> Kreuzungstypen zu erkennen und auf dem Display ausgeben zu lassen.  Nachdem eine Kreuzung erkannt wurde, folgt der Roboter auf Knopfdruck erneut der Linie bis zur nächsten Kreuzung. Bei dieser Aufgabe soll der Roboter noch keine Funktion zum Abbiegen an Kreuzungen implementiert haben (folgt später).</p></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="abbiegen-an-kreuzungen">Abbiegen an Kreuzungen<a class="hash-link" href="#abbiegen-an-kreuzungen" title="Direkter Link zur Überschrift">​</a></h2><p>Das Abbiegen an Kreuzungen wurde bereits an anderes <a href="/docs/robotik/advancedLine#funktion-abbiegenint-prichtung">Stelle</a> besprochen. An dieser Stelle soll aber darauf hingewiesen werden, dass das Drehen zum Abzweig nur mit einer zeitlichen Verzögerung (<code>delay()</code>) nicht besonders sicher funktioniert. Deutlich genauer ist es, wenn sich der Roboter solange dreht, bis der mittlere Bodensensor die abzweigende Linie erkannt hat. Bei einer breiten Linie sollte ein Schwellwert von ca. <code>900</code> recht gut funktionieren.</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">LEFT</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">RIGHT</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">abbiegenKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> pRichtung</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pRichtung </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> LEFT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// gegen den Uhrzeigersinn </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Drehen, bis der Roboter mittig auf der Linie steht.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Unbedingt Bodensensoren zum Erkennen der Linie nutzen.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pRichtung </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> RIGHT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// mit dem Uhrzeigersinn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Wie oben, nur andere Richtung ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lösen-des-labyrinths-mit-rechter-hand-regel">Lösen des Labyrinths mit Rechter-Hand-Regel<a class="hash-link" href="#lösen-des-labyrinths-mit-rechter-hand-regel" title="Direkter Link zur Überschrift">​</a></h2><p>Die Idee hinter der Rechten-Hand-Regel zum Lösen eines Labyrinths ist recht einfach: Berühre mit einer <em>imaginären rechten Hand</em> immer die rechte Wand. Gibt es zum Beispiel einen Abzweig nach rechts, fährt der Roboter auch nach rechts. Hat der Roboter eine Sackgasse erreicht, dreht er sich im 180 Grad und fährt dann wieder zurück. Auf diese Weise kann jedes Labyrinth mit außenliegendem Start und Zielort gelöst werden.</p><img loading="lazy" src="/img/robotik/mazeRHR_1.png" alt="Labyrinth Rechte-Hand-Regel" width="400" class="center img_ev3q"><p>In der Abbildung ist der Weg des Roboters nach der Rechten-Hand-Regel dargestellt. Der zurückgelegt Weg kann auch als Abfolge von Aktionen (links <code>L</code>, rechts <code>R</code>, gerade <code>G</code>, Ende <code>E</code>) gespeichert werden. Im dargestellten Labyrinth ergibt sich mit der Rechten-Hand-Regel folgender Weg: <code>GZRRLZRRLE</code></p><p>Ein <strong>Ansatz</strong> für die Implementierung einer Funktion <code>fahrenMitRHR()</code> könnte wie folgt aussehen: </p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fahrenMitRHR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// RHR: Rechte-Hand-Regel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> </span><span class="token builtin">end</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token builtin">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// `end` sollte am Ziel auf true gesetzt werden</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    KreuzungsTyp kreuzung</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kreuzung </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fahrenZurKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">switch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kreuzung</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> L</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// nur Abzweig nach links  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">abbiegenKreuzung</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LEFT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// links abbiegen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        case-Anweisungen für alle anderen Kreuzungstypen</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">        */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Eine Schleife (<code>while(!end)</code>) wird solange ausgeführt, wie der Roboter das Ende des Labyrinths noch nicht gefunden hat. Innerhalb der Schleife fährt der Roboter mit <code>fahrenZurKreuzung()</code> bis zur nächsten Kreuzung, ermittelt dort den Kreuzungstyp und biegt entsprechend der Rechten-Hand-Regel ab. Ist das Ende erreicht, wird der boolsche Ausdruck <code>end</code> auf <code>true</code> gesetzt und die Schleife und somit auch die Funktion <code>fahrenMitRHR()</code> beendet.</p><details class="details_lb9f alert alert--info details_b_Ee ueben" data-collapsed="true"><summary>Aufgaben</summary><div><div class="collapsibleContent_i85q"> <ol><li><p>Schreiben Sie ein Programm, welches den Roboter mit der Rechten-Hand-Regel von einem beliebigen Startort zum Ziel navigeren lässt. Am Ziel angekommen, soll der Roboter stehen bleiben.</p></li><li><p>Speichern Sie den zurückgelegten Weg in einem <a href="https://www.arduino.cc/reference/de/language/variables/data-types/stringobject/" target="_blank" rel="noopener noreferrer">String</a>. In dem String wird für jede Kreuzung die gewählte Fahrtrichtung <code>L</code> (links). <code>R</code> (rechts), <code>G</code> (gerade), <code>Z</code> (zurück), <code>E</code> (Ende) abgelegt. Geben Sie an jeder Kreuzung den aktuell zurückgelegten Fahrweg auf dem Display aus.</p><p><em>Hinweis: Strings lassen sich einfach verknüpfen, bzw. verlängern:</em></p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">String</span><span class="token plain"> einString </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Instanziiert einen leeren String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// (keine Ausgabe)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">einString </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token char">&#x27;L&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Ausgabe: L</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">einString </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token char">&#x27;R&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">einString </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token char">&#x27;G&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Ausgabe: LRG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>In der Arduino <a href="https://www.arduino.cc/reference/de/language/variables/data-types/stringobject/" target="_blank" rel="noopener noreferrer">Referenz</a> finden sie eine Auflistung aller Methoden der String Klasse.</em></p></li></ol></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optimierung-der-rechten-hand-regel">Optimierung der Rechten-Hand-Regel<a class="hash-link" href="#optimierung-der-rechten-hand-regel" title="Direkter Link zur Überschrift">​</a></h2><p>Auch wenn der Roboter an dieser Stelle in der Lage sein sollte ein Labyrinth zu lösen, so ist der gewählt Weg nicht unbedingt besonders kurz. Sackgassen erkennt der Roboter erst, wenn er sie erreicht hat und macht daher unnötige Umwege.</p><img loading="lazy" src="/img/robotik/mazeRHR_2.png" alt="Labyrinth Rechte-Hand-Regel" width="400" class="center img_ev3q"><p>Betrachtet man die einzelnen Sackgassen, wird klar, dass der Roboter auch vorher abbiegen kann. Die zuerst angefahrende Sackgasse kann er abkürzen, indem er sofort nach links <code>L</code> fährt und nicht erst den langen Weg gerade <code>G</code>, zurück <code>Z</code> und rechts <code>R</code> fährt. Aus dem Weg <code>GZR</code> wird somit <code>L</code>. Ähnlich verhält es sich mit der zweiten Sackgasse. Hier kann der Weg <code>LZR</code> zu <code>Z</code> vereinfacht werden.</p><p>In dem nun teilweise verkürzten Weg gibt es jedoch immer noch eine Sackgasse, welche der Roboter abkürzen kann. Hier führt der Weg <code>RZR</code> zu der Abkürzung <code>L</code> </p><img loading="lazy" src="/img/robotik/mazeRHR_3.png" alt="Labyrinth Rechte-Hand-Regel" width="400" class="center img_ev3q"><p>Aus den beiden Abbildungen ergibt sich somit eine noch <em>unvollständige</em> Liste von Regeln zum <strong>Vereinfachen</strong> des Weges:</p><ul><li><code>L</code> = <code>GZR</code></li><li><code>Z</code> = <code>LZR</code></li><li><code>G</code> = <code>RZR</code></li></ul><p>Das Anwenden der Regeln auf den ursprünglichen Weg kann auf zwei Arten geschehen:</p><ul><li>Beim ersten Ansatz wird gewartet, bis der gesamte Weg mit der Rechten-Hand-Regel bestimmt wurde und anschließend solange nach zu ersetzenden Muster gesucht, bis sich der Weg nicht weiter vereinfachen lässt.</li><li>Beim zweiten Ansatz werden nach jeder neu durchgeführten Aktion die letzten drei Aktionen auf ein zu ersetzendes Muster untersucht.</li></ul><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Vereinfachen nachdem der Weg bestimmt wurde</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">GZRRLZRRLE       (ursprünglicher Weg)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">GZR R LZR RLE    (zwei Sackgassen GZR und LZR)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  L  R  Z  RLE   (die beiden `Z` werde ersetzt,GZR = L, LZR = Z)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LRZRLE           (es entsteht ein neuer Pfad)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">L RZR LE         (eine Sackgasse RZR)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">L  G  LE         (neues `Z` ersetzen, RZR = G) </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LGLE             (maximal gekürzter Weg)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Vereinfachen während der Weg bestimmt wird</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">G       (1. Kreuzung: G)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">GZ      (2. Kreuzung: Z)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">GZR     (3. Kreuzung: R)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">L       (ersetzen GZR = L)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LR      (4. Kreuzung: R)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LRL     (5. Kreuzung: L)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LRLZ    (6. Kreuzung: Z)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LRLZR   (7. Kreuzung: R)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LRZ     (ersetzen LZR = Z)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LRZR    (8. Kreuzung: R)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LG      (ersetzen RZR = G)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LGL     (9. Kreuzung: L)</span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">LGLE    (10. Kreuzung: E -&gt; Maximal gekürzter Weg)</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_lb9f alert alert--info details_b_Ee ueben" data-collapsed="true"><summary>Aufgaben</summary><div><div class="collapsibleContent_i85q"> <ol><li><p>Erläutern Sie, in welchen Situationen die folgenden Weg-Vereinfachungen (Rechte-Hand-Regel) benötigt werden und zu welchem Kreuzungstyp sie sich vereinfachen lassen: <code>GZG</code>, <code>RZG</code>, <code>RZL</code>. Geben Sie für jeden Fall ein Wegskizze an.</p></li><li><p>Notieren Sie sich für die beiden abgebildeten Labyrinthe den ungekürzten Weg nach der Rechten-Hand-Regel. Schreiben Sie anschließend ein Programm, welches den Weg so weit wie möglich kürzt. (Testen Sie Ihr Programm zuerst ohne Roboter.)</p><img loading="lazy" src="/img/robotik/mazes5by5.png" alt="Labyrinth 1" width="400" class="img_ev3q"><p><em>Hinweis: Die String-Methode <code>einString.replace(s1,s2)</code> ersetzt im String <code>einString</code> den Teilstring <code>s1</code> durch den Teilstring <code>s2</code>. <a href="https://www.arduino.cc/reference/de/language/variables/data-types/string/functions/replace/" target="_blank" rel="noopener noreferrer">Link</a>.</em></p><p><em><a href="https://wokwi.com/projects/356664243071234049" target="_blank" rel="noopener noreferrer">Wokwi</a>: Weg kürzen RHR</em></p></li><li><p>Lassen Sie den Roboter in zwei Läufen durch ein Labyrinth fahren. Bei der ersten Fahrt findet der Roboter mit der Rechten-Hand-Regel das Ziel und beim zweiten Lauf fährt er auf verkürztem Weg zum Ziel.</p><p><em>Variation: Der Roboter fährt mit der Rechten-Hand-Regel vom Start zum Ziel, dreht dort um und fährt auf möglichst kurzem Weg zurück zum Start.</em></p></li></ol></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="links">Links<a class="hash-link" href="#links" title="Direkter Link zur Überschrift">​</a></h2><ul><li><a href="https://www.mazegenerator.net/" target="_blank" rel="noopener noreferrer">Maze Generator - Erzeugt fast beliebige Labyrinthe</a></li><li><a href="https://patrickmccabemakes.com/tutorials/Maze_Solving/" target="_blank" rel="noopener noreferrer">Maze Solving</a> </li><li><a href="https://www.instructables.com/Maze-Solving-Robot/" target="_blank" rel="noopener noreferrer">Maze Solving Robot</a></li><li><a href="https://www.pololu.com/file/0J195/line-maze-algorithm.pdf" target="_blank" rel="noopener noreferrer">Teaching a Robot to Solve a Line Maze</a></li><li><a href="https://am.heise.de/abo/06_ma_education/Labyrinth.pdf?wt_mc=intern.abo.make.education.lp_ad.9.9" target="_blank" rel="noopener noreferrer">Arduino findet durch Labyrinth</a></li><li><a href="https://thecodingtrain.com/challenges/10-dfs-maze-generator" target="_blank" rel="noopener noreferrer">Maze Generator with Processing - Tutorial</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Dokumentation Seiten Navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/robotik/botBarcode"><div class="pagination-nav__sublabel">Zurück</div><div class="pagination-nav__label">Barcode Auslesen</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/robotik/gridNavigation"><div class="pagination-nav__sublabel">Weiter</div><div class="pagination-nav__label">Gitternavigation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#einführung" class="table-of-contents__link toc-highlight">Einführung</a></li><li><a href="#unterschiedliche-kreuzungstypen-erkennen" class="table-of-contents__link toc-highlight">Unterschiedliche Kreuzungstypen erkennen</a><ul><li><a href="#aufzählungsdatentyp-enum-für-die-kreuzungstypen" class="table-of-contents__link toc-highlight">Aufzählungsdatentyp <code>enum</code> für die Kreuzungstypen</a></li><li><a href="#bestimmen-des-kreuzungstypes" class="table-of-contents__link toc-highlight">Bestimmen des Kreuzungstypes</a></li><li><a href="#funktion-fahrenzurkreuzung" class="table-of-contents__link toc-highlight">Funktion <code>fahrenZurKreuzung()</code></a></li><li><a href="#funktion-bestimmenkreuzung" class="table-of-contents__link toc-highlight">Funktion <code>bestimmenKreuzung()</code></a></li></ul></li><li><a href="#abbiegen-an-kreuzungen" class="table-of-contents__link toc-highlight">Abbiegen an Kreuzungen</a></li><li><a href="#lösen-des-labyrinths-mit-rechter-hand-regel" class="table-of-contents__link toc-highlight">Lösen des Labyrinths mit Rechter-Hand-Regel</a></li><li><a href="#optimierung-der-rechten-hand-regel" class="table-of-contents__link toc-highlight">Optimierung der Rechten-Hand-Regel</a></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SpaceHal/spacehal.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Schule</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.osztiem.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OSZTIEM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.arduino.cc/reference/de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Arduino<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/impressum">Impressum</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Stefan Warm. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5bf24dae.js"></script>
<script src="/assets/js/main.c4d5baee.js"></script>
</body>
</html>