<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Rule The Bots Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Rule The Bots Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Rule The Bots" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">Proportional-Regler fÃ¼r einen Kantenfolger | Rule The Bots</title><meta data-react-helmet="true" property="og:url" content="https://spacehal.github.io//docs/robotik/edge_P_Control"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Proportional-Regler fÃ¼r einen Kantenfolger | Rule The Bots"><meta data-react-helmet="true" name="description" content="Mit einem einfachen Proportional-Regler das Fahrverhalten eines Linienfolgers (Arduino-Roboter) verbessern."><meta data-react-helmet="true" property="og:description" content="Mit einem einfachen Proportional-Regler das Fahrverhalten eines Linienfolgers (Arduino-Roboter) verbessern."><link data-react-helmet="true" rel="shortcut icon" href="/img/LogoSmallRed.svg"><link data-react-helmet="true" rel="canonical" href="https://spacehal.github.io//docs/robotik/edge_P_Control"><link data-react-helmet="true" rel="alternate" href="https://spacehal.github.io//docs/robotik/edge_P_Control" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://spacehal.github.io//docs/robotik/edge_P_Control" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.6dda3c4a.css">
<link rel="preload" href="/assets/js/runtime~main.756ab661.js" as="script">
<link rel="preload" href="/assets/js/main.0f93cfce.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">RuleTheBots</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/arduino/helloworld">Arduino</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/robotik/beginning">Robotik</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/zumo32u4/gettingStarted">Zumo32u4</a><a class="navbar__item navbar__link" href="/docs/more/links">Links</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">RuleTheBots</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/arduino/helloworld">Arduino</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/robotik/beginning">Robotik</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/zumo32u4/gettingStarted">Zumo32u4</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/more/links">Links</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m"><strong>RuleTheBots</strong></a><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Robotik</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Linienfolger</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/beginning">Erste Schritte</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/edgeFollower">3-Stufen-Regler (Kantenfolger)</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/robotik/edge_P_Control">P-Regler (Kantenfolger)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/weightedAverage">Gewichteter Mittelwert</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/lineFollowerPID">PID-Regler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/advancedLine">Kreuzungen erkennen</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Positionsbestimmung</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/robotik/odometrie">Odometrie</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/robotik/kinematik">Kinematik</a></li></ul></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Proportional-Regler fÃ¼r einen Kantenfolger</h1></header><div class="markdown"><p>Der einfache <a href="/docs/robotik/edgeFollower">3-Stufen Algorithmus</a> zum Kantenfolgen funktioniert bei Linien und Abzweigung meistens ganz gut, lÃ¤sst aber den Roboter die Linie <em>entlangzappeln</em>, anstatt ihr geschmeidig zu folgen. Auch wird es mit dem einfachen Algorithmus schwierig, dem Roboter bei Kreuzungen oder Abzweigung ein konkretes Verhalten zu programmieren. </p><p>Ein wesentlich besserer Ansatz ist der <strong>Proportional-Regler</strong> (P-Regler), bei dem es nicht nur drei verschiedene Unterscheidungsstufen mit drei verschiedenen Motordrehzahlen gibt, sondern fÃ¼r jeden Unterschied zwischen Soll- und Istwert ein geeigneter Wert zum Steuern der Motoren berechnet wird. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="regelkreis-control-system"></a>Regelkreis (<em>control system</em>)<a class="hash-link" href="#regelkreis-control-system" title="Direct link to heading">#</a></h2><p>Bevor jedoch der P-Regler fÃ¼r den Kantenfolger entwickelt wird, soll kurz die allgemeine Struktur eines <strong>Regelkreises</strong> (<em>control system</em>) anhand eines Kantenfolgers erlÃ¤utert werden.</p><img src="/img/robotik/RegelkreisLinienfolger.jpg" alt="Regelkreis" width="600px" class="center"><p>Bei einem <strong>Regelkreis</strong> (<em>control system</em>) wird davon ausgegangen, dass ein System einen <strong>Sollwert</strong>   <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> (engl. <em>reference signal</em>) einhalten soll. In unseren Fall ist die SollgrÃ¶ÃŸe der vom Sensor zu erzielende Sensorwert der Linienkante (z.B. 350).</p><p>Weicht der <strong>Messwert</strong> <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>, also der aktuell gemessene Sensorwert von der SollgrÃ¶ÃŸe ab, so lÃ¤sst sich die <strong>Regelabweichung</strong> (auch <em>error term</em> oder Fehlerwert) <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> leicht als Differenz aus Soll- und Messwert berechnen: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>âˆ’</mo><mi>y</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e(t) = w(t) - y(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>.</p><p>Mit Hilfe der Regelabweichung <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> bestimmt dann der <strong>Regler</strong> (engl. <em>controller</em>) die <strong>StellgrÃ¶ÃŸe</strong> (engl. <em>manipulated variable</em>), welcher auf die <strong>Regelstrecke</strong> (engl. <em>system</em> oder <em>plant</em>) einwirkt. In diesem Fall ist die Regelstrecke der Roboter, welcher der Kante folgen soll. Ein anderes Beispiele ist ein Tempomat, bei dem die Geschwindigkeit eines Fahrzeugess konstant gehalten werden soll.</p><p>In der Regel ist das Ziel eines Reglers den zeitverÃ¤nderlichen Fehlerwert so klein wie mÃ¶glich zu halten und damit den Messwert an den Sollwert anzunÃ¤hern. Im Fall des Kantenfolgers bedeutet dies, dass der Roboter mÃ¶glichst immer Ã¼ber der Kante bleibt.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="aufgaben-kantenfolger-p-regler"></a>Aufgaben (Kantenfolger P-Regler)<a class="hash-link" href="#aufgaben-kantenfolger-p-regler" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><strong>Ãœben</strong></h5></div><div class="admonition-content"><ol><li>Skizzieren Sie den Regelkreis fÃ¼r einen <a href="https://www.sueddeutsche.de/leben/auto-wie-funktioniert-ein-tempomat-dpa.urn-newsml-dpa-com-20090101-140218-99-01316" target="_blank" rel="noopener noreferrer">Tempomat</a> und erlÃ¤utern Sie die zugehÃ¶rigen GrÃ¶ÃŸen des Regelkreises (Sollwert, Messwert, Regelabweichung, StellgrÃ¶ÃŸe, Regelstrecke).</li><li>Geben Sie 5 technische Beispiele fÃ¼r einen Regelkreis an.</li><li>Diskutieren Sie, welche sinnvoll zu regelnden GrÃ¶ÃŸen es bei einem Roboter geben kÃ¶nnte.</li></ol></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="proportional-regler-p-controller"></a>Proportional Regler (<em>P-Controller</em>)<a class="hash-link" href="#proportional-regler-p-controller" title="Direct link to heading">#</a></h2><img src="/img/robotik/GraphPRegler.png" alt="Proportional Control" width="550px" class="center"><p>Im Gegensatz zu einem 3-Stufen-Regler, bei dem nur drei verschiedene Motordrehzahlen fÃ¼r das Kurvenverhalten eingestellt werden, gibt es bei dem P-Regler einen proportionalen Zusammenhang zwischen der Regelabweichung <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> und der StellgrÃ¶ÃŸe (Motordrehzahl). </p><p>Konkret wird beim P-Regler die <strong>Abweichung der Motordrehzahl</strong> (<code>deltaSpeed</code>) von einer NormgrÃ¶ÃŸe (<code>speed</code>) gesteuert. Die aktuelle Motordrehzahl ergibt sich dann als Summe aus der NormgrÃ¶ÃŸe und der Abweichung. Damit der Roboter seine Fahrtrichtung Ã¤ndern kann, wird <code>deltaSpeed</code> je nach Seite von der NormgrÃ¶ÃŸe (<code>speed</code>) abgezogen oder hinzuaddiert: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">leftSpeed  = speed + deltaSpeed  // Drehzahl linkes Rad</span></div><div class="token-line" style="color:#393A34"><span class="token plain">rightSpeed = speed - deltaSpeed  // Drehzahl rechtes Rad</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Die <strong>Abweichung der Motordrehzahl</strong> (<code>deltaSpeed</code>) hÃ¤ngt proportional von der Regelabweichung (Fehlerwert), also der Abweichung von der Linienkante ab. Mit dem ProportionalitÃ¤tsfaktor <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> wird <code>deltaSpeed</code> direkt aus der Regelabweichung berechnet:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">deltaSpeed  = kp * e   // e: Regelabweichung, Fehlerwert</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Die Regelabweichung <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">e</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> kann aus der Differenz des Sollwertes (also dem Wert der Linienkante) und dem Messwert des IR-Sensors bestimmt werden.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><div tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">e = wertKante - sensorWert;     // Fehlerwert, Regelabweichung</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="wahl-des-faktors-k_p"></a>Wahl des Faktors <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span><a class="hash-link" href="#wahl-des-faktors-k_p" title="Direct link to heading">#</a></h3><p>Die Wahl des Faktors <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> hat einen erheblichen Einfluss auf das Fahrverhalten des Roboters.</p><ul><li><p>Ist <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> <strong>zu klein</strong>, wird der Fehler nicht schnell genug geÃ¤ndert und der Roboter wird bei einer Kurve ganz schnell die Kante verlieren. Der Fehler steigt also immer weiter an.</p></li><li><p>Ist  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> jedoch <strong>zu groÃŸ</strong> gewÃ¤hlt, so fÃ¤ngt der Roboter an, hin- und herzuschwingen. In diesem Fall spricht man auch von einem <strong>oszillierenden Verhalten</strong>.</p><p>Diese Oszillationsbewegungen entstehen, weil auf relativ kleine Fehler mit einem zu starken Gegenlenken (also einem zu groÃŸen <code>deltaSpeed</code>) reagiert wird. Man kennt dieses Verhalten von Kindern, die Fahrrad fahren lernen. So lange, wie sie noch unsicher sind, wackeln sie stark mit dem Lenker, um das Gleichgewicht zu halten. Erst mit etwas mehr Ãœbung wird ihr Fahrverhalten ruhiger und das Schlingern des Rades nimmt ab.</p></li><li><p>Ã„hnlich wie bei dem 3-Stufenregler hat die Geschwindigkeit des Roboters einen groÃŸen Einfluss auf das Ergebnis des Reglers. Beginnen Sie am besten mit <strong>einer geringen Geschwindigkeit</strong>. (Warum eigentlich?)</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="begrenzung-der-ermittelten-geschwindigkeit-constrain"></a>Begrenzung der ermittelten Geschwindigkeit: <code>constrain()</code><a class="hash-link" href="#begrenzung-der-ermittelten-geschwindigkeit-constrain" title="Direct link to heading">#</a></h3><p>In AbhÃ¤ngigkeit vom ProportionalitÃ¤tsfaktor <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> und der Regelabweichung (Fehlerwert) kann es passieren, dass die ermittelte Geschwindigkeit eines Rades den zulÃ¤ssigen Wertebereich von z.B. -255 bis 255 (PWM-Werte) Ã¼berschreitet. In diesem fall wÃ¼rde die Funktion <code>analogWrite(pin,PWM)</code> zur Geschwindigkeitssteuerung keinen Fehler ausgeben und trotzdem einen falschen PWM-Wert setzen. Daher sollten die berechneten PWM-Werte fÃ¼r die Motoren auf Werte zwischen -255 und +255 begrenzt werden.</p><p>HierfÃ¼r eignet sich der Arduino-Befehl <code>constrain()</code>,</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly arduino"><div tabindex="0" class="prism-code language-arduino codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">wertC = constrain(wert,min,max)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> welche den Eingabewert <code>wert</code> auf den angegebenen Minimal- <code>min</code> und Maximalwert <code>max</code> begrenzt. Dabei gilt:</p><ul><li><code>wertC</code> = <code>wert</code>, wenn <code>wert</code> zwischen <code>min</code> und <code>max</code> </li><li><code>wertC</code> = <code>min</code>, wenn  <code>wert</code> kleiner <code>min</code> ist </li><li><code>wertC</code> = <code>max</code>, wenn  <code>wert</code> grÃ¶ÃŸer <code>max</code> ist </li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="aufgaben-kantenfolger-p-regler-1"></a>Aufgaben (Kantenfolger P-Regler)<a class="hash-link" href="#aufgaben-kantenfolger-p-regler-1" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><strong>Ãœben</strong></h5></div><div class="admonition-content"><ol start="2"><li>Ein kalibrierter Roboter, welcher mit einer Geschwindigkeit von <code>speed = 130</code> geradeaus fÃ¤hrt, ermittelt mit dem Bodensensor einen Messwert von <code>sensorWert = 45</code>. Der Sollwert des Reglers, also die Linienkante hat einen Wert von <code>kante = 345</code>.<ol><li>Bestimmen Sie die Regeldifferenz <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">e</span></span></span></span></span>.</li><li>Berechnen Sie den Wert fÃ¼r den Proportional-Faktor <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span>, damit sich eine Ã„nderung der Motorgeschwindigkeit von <code>deltaSpeed = 150</code> ergibt.</li><li>Ermitteln Sie die neuen PWM-Werte des linken und des rechten Motors (ohne Begrenzung des Wertebereichs).</li><li>Analysieren Sie die ermittelten PWM-Werte hinsichtlich des Fahrverhaltens des Roboters.</li><li>Wie Ã¤ndert Sie das Fahrverhalten, wenn ein Proportional-Faktor <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub><mo>=</mo><mn>1.2</mn></mrow><annotation encoding="application/x-tex">k_p = 1.2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span></span></span></span></span>  verwendet wird.</li></ol></li><li>Wiederholen Sie die erste Aufgabe mit dem <strong>realen Wert</strong> der Linienkante Ihres Roboters. SchÃ¤tzen Sie einen sinnvollen Werte fÃ¼r <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">k_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> ab und begrÃ¼nden Sie Ihre Wahl.</li><li>Schreiben Sie den Pseudocode fÃ¼r einen Kantenfolger mit P-Regler.</li><li>Programmieren Sie einen Kantenfolger mit <strong>P-Regler</strong>. Welchen Einfluss hat die maximale Geschwindigkeit der RÃ¤der <code>maxSpeed</code> auf das Verhalten des Reglers? Welchen maximalen Wert kÃ¶nnen Sie fÃ¼r <code>maxSpeed</code> angeben, damit der Roboter die gesamte Strecke schafft?</li></ol></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="links"></a>Links<a class="hash-link" href="#links" title="Direct link to heading">#</a></h2><ul><li><a href="https://studyflix.de/informatik/regelkreis-1453" target="_blank" rel="noopener noreferrer">Regelkreis - Studyfix</a></li><li>Ein sehr gutes Video, welches das Grundkonzept eines Regelkreises erlÃ¤utert:<a href="https://www.youtube.com/watch?v=O-OqgFE9SD4" target="_blank" rel="noopener noreferrer">Control System (eng)</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://spacehal.github.io/docs/robotik/edge_P_Control.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/robotik/edgeFollower"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 3-Stufen-Regler fÃ¼r einen Kantenfolger</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/robotik/weightedAverage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Gewichteter Mittelwert (Massenschwerpunkt) fÃ¼r mehrere Bodensensoren Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#regelkreis-control-system" class="table-of-contents__link">Regelkreis (<em>control system</em>)</a></li><li><a href="#aufgaben-kantenfolger-p-regler" class="table-of-contents__link">Aufgaben (Kantenfolger P-Regler)</a></li><li><a href="#proportional-regler-p-controller" class="table-of-contents__link">Proportional Regler (<em>P-Controller</em>)</a><ul><li><a href="#wahl-des-faktors-k_p" class="table-of-contents__link">Wahl des Faktors k_p</a></li><li><a href="#begrenzung-der-ermittelten-geschwindigkeit-constrain" class="table-of-contents__link">Begrenzung der ermittelten Geschwindigkeit: <code>constrain()</code></a></li></ul></li><li><a href="#aufgaben-kantenfolger-p-regler-1" class="table-of-contents__link">Aufgaben (Kantenfolger P-Regler)</a></li><li><a href="#links" class="table-of-contents__link">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/SpaceHal/spacehal.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Schule</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.osztiem.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OSZTIEM</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.arduino.cc/reference/de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Arduino</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/impressum">Impressum</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Stefan Warm. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.756ab661.js"></script>
<script src="/assets/js/main.0f93cfce.js"></script>
</body>
</html>