<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Rule The Bots Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Rule The Bots Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Rule The Bots" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">Lineare Bewegungen mit dem Zumo | Rule The Bots</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://spacehal.github.io//docs/robotik/wheelEncoder/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Lineare Bewegungen mit dem Zumo | Rule The Bots"><meta data-react-helmet="true" name="description" content="Mit den Rad-Encoder lineare Bewegungen messen."><meta data-react-helmet="true" property="og:description" content="Mit den Rad-Encoder lineare Bewegungen messen."><meta data-react-helmet="true" name="keywords" content="Arduino,Roboter,Robotik,Odometrie,Quadraturencoder,Inkrementalgeber,Positionsbestimmung,Zumo32u4,Zumo"><link data-react-helmet="true" rel="shortcut icon" href="/img/LogoSmallRed.svg"><link data-react-helmet="true" rel="canonical" href="https://spacehal.github.io//docs/robotik/wheelEncoder/"><link data-react-helmet="true" rel="alternate" href="https://spacehal.github.io//docs/robotik/wheelEncoder/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://spacehal.github.io//docs/robotik/wheelEncoder/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.46a0e46e.css">
<link rel="preload" href="/assets/js/runtime~main.c4f4056c.js" as="script">
<link rel="preload" href="/assets/js/main.5ea5f668.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">RuleTheBots</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/arduino/helloworld/">Arduino</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/robotik/beginning/">Robotik</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/zumo32u4/gettingStarted/">Zumo32u4</a><a class="navbar__item navbar__link" href="/docs/more/links/">Links</a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m"><b>RuleTheBots</b></a><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Robotik</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Linienfolger</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Lagebestimmung</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/robotik/wheelEncoder/">Rad-Encoder</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/odometrie/">Odometrie</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/kinematik/">Kinematik</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Gitter</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lineare Bewegungen mit dem Zumo</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="inkrementalgeber-incremental-encoder"></a>Inkrementalgeber (<em>Incremental Encoder</em>)<a class="hash-link" href="#inkrementalgeber-incremental-encoder" title="Direct link to heading">#</a></h2><p>Eine der ersten Aufgaben fÃ¼r den selbstgebauten Roboter war es, den Roboter eine Strecke von 1,5 Meter fahren zu lassen. Die LÃ¶sung konnte nur durch Probieren von unterschiedliche langen Fahrzeit ermittelt werden. Was dem selbstgebauten Roboter fehlte, war die MÃ¶glichkeit den zurÃ¼ckgelegten Fahrtweg zu messen.</p><p>Die <strong>Odometrie</strong> ist eine Methode, wie mit Hilfe der beiden AntriebsrÃ¤der nicht nur der zurÃ¼ckgelegte Weg, sondern ganz allgemein die Position und Orientierung eines mobilien Roboters bestimmt werden kann. HierfÃ¼r wir mit einem <a href="https://de.wikipedia.org/wiki/Inkrementalgeber" target="_blank" rel="noopener noreferrer">Inkrementalgeber</a> (Radencoder) an jedem Motor bestimmt, wie weit sich die einzelnen Motoren zwischen zwei Messungen gedreht haben. </p><p>Der Zumo 32u4 hat an jedem Motor einen <a href="#quadratur-encoder-quadrature-encdoder">Quadratur-Encoder</a>, welcher mit einer magnetischen Scheibe pro Motorwelle und zwei <a href="https://www.leifiphysik.de/elektrizitaetslehre/bewegte-ladungen-feldern/grundwissen/hall-effekt" target="_blank" rel="noopener noreferrer">Hall-Effekt</a>-Sensoren fÃ¼r jeden Motor realisiert ist. Der Quadratur-Encoder hat eine AuflÃ¶sung von 12 Schritten pro Umdrehung.</p><p>Da die RÃ¤der nicht direkt, sondern mit einem Getriebe  mit der Motorwelle verbunden sind (Ãœbersetzung 75.81:1), fÃ¼hrt das zu einer AuflÃ¶sung von <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn><mo>Ã—</mo><mn>75.81</mn><mo>â‰ˆ</mo><mn>909</mn><mo separator="true">,</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">12\times 75.81 \approx 909,7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em"></span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em"></span><span class="mord">7</span><span class="mord">5</span><span class="mord">.</span><span class="mord">8</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em"></span><span class="mord">9</span><span class="mord">0</span><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord">7</span></span></span></span></span> Impulsen pro Umdrehung (CPR - counts per revolution).</p><img src="/img/robotik/RadEncoder.png" alt="Ein Radencoder fÃ¼r die Odometrie" width="450px" class="center"><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="quadratur-encoder-quadrature-encoder"></a>Quadratur-Encoder (<em>Quadrature Encoder</em>)<a class="hash-link" href="#quadratur-encoder-quadrature-encoder" title="Direct link to heading">#</a></h3><p>Der oben dargestellte Rad-Encoder ist ein sehr einfacher Inkrementalgeber. Was diesem Encoder jedoch fehlt, ist die MÃ¶glichkeit die Drehrichtung des Rades zu bestimmen. Ein Quadratur-Encoder schafft hier Abhilfe. </p><p>Bei einem Quadratur-Encoder wird das Rad nicht mit einem Sensor, sondern mit <strong>zwei rÃ¤umlich versetzten Sensoren</strong> abgetastet. Dadurch ergibt sich nicht nur eine Impulsfolge, welche angibt, wie weit sich das Rad gedreht hat, sondern <strong>zwei Impulsfolgen (A und B)</strong> aus welchen zusÃ¤tzlich auch die Drehrichtung bestimmt werden kann. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3R7-" id="drehrichtung-im-uhrzeigersinn"></a>Drehrichtung im Uhrzeigersinn<a class="hash-link" href="#drehrichtung-im-uhrzeigersinn" title="Direct link to heading">#</a></h4><p>In der dargestellten Abbilung sind die beiden Encoder-Sensoren mit den Buchstaben A und B bezeichnet. Der rechte Sensor (A) ist bei einer Drehung im <strong>Uhrzeigersinn</strong> der Sensor, welcher zuerst die ZustandsÃ¤nderungen (von 0 auf 1 oder andersrum) detektiert. Der Sensor B wird die selbe ZustandsÃ¤nderung kurz danach detektieren. Das bedeutet, dass direkt nach dem Zustandswechsel des Sensors A, der Sensor B noch im alten Zustand ist. </p><p>Bei einer <strong>Drehung im Uhrzeigersinn</strong> gilt bei der ZustandsÃ¤nderung des Sensors A: <code>B=!A</code>.</p><img src="/img/robotik/QuadEncoderClockwise.png" alt="Quadratur Encoder" width="500px" class="center"><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithHideOnScrollNavbar_3R7-" id="drehrichtung-entgegen-dem-uhrzeigersinn"></a>Drehrichtung entgegen dem Uhrzeigersinn<a class="hash-link" href="#drehrichtung-entgegen-dem-uhrzeigersinn" title="Direct link to heading">#</a></h4><p>Dreht sich das Rad entgegen dem Uhrzeigersinn ist der Sensor B der fÃ¼hrende Sensor und erkennt die ZustandsÃ¤nderung als erstes. Aus Sicht des Sensors A bedeutet das, dass der Sensor A bei einer ZustandsÃ¤nderung den bereits detektierten Zustand vom Sensor A annimmt.</p><p>Bei einer <strong>Drehung entgegen dem Uhrzeigersinn</strong> gilt bei der ZustandsÃ¤nderung des Sensors A: <code>B=A</code>.</p><img src="/img/robotik/QuadEncoderCC.png" alt="Quadratur Encoder" width="500px" class="center"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="auslesen-der-rad-encoder-beim-zumo-32u4"></a>Auslesen der Rad-Encoder beim Zumo 32u4<a class="hash-link" href="#auslesen-der-rad-encoder-beim-zumo-32u4" title="Direct link to heading">#</a></h2><p>In der Zumo32u4-Bibliothek wird die Klasse <code>Zumo32U4Encoders</code> bereitgestellt, welche es mit den Methode <code>getCountsLeft()</code> und <code>getCountsRight()</code> ermÃ¶glicht, die vom Encoder gemessenen Impulse auszugeben. </p><p>Die Methoden zum Auslesen der Rad-Encoder verwenden im Hintergrund so genannte <a href="https://de.wikipedia.org/wiki/Interrupt" target="_blank" rel="noopener noreferrer">Interrupt-Funktionen</a>, welches jedesmal, wenn die Encoder einen Impuls erhalten, eine globale Variable im eins erhÃ¶hen oder verringern (abhÃ¤ngig von der Drehrichtung). Die Methoden <code>getCountsLeft()</code> und <code>getCountsRight()</code> geben dann die aktuelle Anzahl der aufsummierten Impulse pro Rad an.</p><p>Die Methoden <code>getCountsAndResetLeft()</code> und <code>getCountsAndResetRight()</code> verhalten sich wie die anderen beiden Funktionen, setzten jedoch die entsprechende globale Variable fÃ¼r die aufsummierten Impulse zurÃ¼ck.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Damit die globalen ZÃ¤hler fÃ¼r die Encoder-Impulse nicht Ã¼berlaufen, sollten regelmÃ¤ÃŸig die Funktionen <code>getCountsAndResetLeft()</code> und <code>getCountsAndResetRight()</code> aufgerufen werden.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly arduino"><pre tabindex="0" class="prism-code language-arduino codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Anzeigen der Encoder-Werte auf dem Display </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;Wire.h&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;Zumo32U4.h&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Zumo32U4Encoders encoders;                       //  Encoder-Objekt deklarieren</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Zumo32U4LCD lcd;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">unsigned long lastDisplayTime = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">void setup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                 // bleibt leer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">void loop() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ((millis() - lastDisplayTime) &gt; 100) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    int countsLeft = encoders.getCountsLeft();   // Auslesen des globalen Impuls-ZÃ¤hlers</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    int countsRight = encoders.getCountsRight(); // Die Impulse werden im Hintergrund gezÃ¤hlt</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    lcd.clear();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    lcd.print(countsLeft);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    lcd.gotoXY(0, 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    lcd.print(countsRight);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastDisplayTime = millis();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="aufgaben"></a>Aufgaben<a class="hash-link" href="#aufgaben" title="Direct link to heading">#</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ÃœBEN</h5></div><div class="admonition-content"><ol><li>Die Radencoder haben eine AuflÃ¶sung von 909,7 Impulsen pro Rad-Umdrehung. Bestimmen Sie rechnerisch, wie weit der zurÃ¼ckgelegte Weg zwischen zwei Encoder-Impulse ist (Millimeter pro Impuls).
<em>Hinweis: Messen Sie den Durchmesser der RÃ¤der.</em></li><li>Messen Sie die Anzahl der Encoder-Impulse die benÃ¶tigt werden, um eine Strecke von exakt 20 cm zurÃ¼ckzulegen. Bestimmen Sie hieraus die Encoder-AuflÃ¶sung (in zurÃ¼ckgelegten Millimeter pro gefahrenem Meter).</li><li>Schreiben Sie ein Programm, welches den Roboter mit Hilfe der Rad-Encoder <strong>exakt</strong> 20 cm weit fahren lÃ¤sst. Vergleichen Sie Ihr Ergebnis mit der Aufgabe 2. (Die zurÃ¼ckgelegt Strecke sollte als Mittelwert aus den beiden Rad-Encoder berechnet werden.)</li></ol></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="geradeausfahren-mit-einem-p-regler"></a>Geradeausfahren mit einem P-Regler<a class="hash-link" href="#geradeausfahren-mit-einem-p-regler" title="Direct link to heading">#</a></h2><p>Mit den Rad-Encodern kann der Roboter nicht nur messen, wie weit sich jedes einzelne Rad gedreht hat, sondern es ist auch mÃ¶glich den Roboter damit geradeaus fahren zu lassen. HierfÃ¼r reicht es aus, dass sich beide RÃ¤der immer gleich schnell drehen. Ein einfacher Ansatz wÃ¤re dafÃ¼r ein P-Regler, welcher versucht die Differenz zwischen den Encoder-Impulsen auf null zu reduzieren.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token builtin">error</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> impulseEncoderLinks </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> impulseEncoderRechts </span><span class="token comment" style="color:#999988;font-style:italic">// </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Allerdings ist es sehr wahrscheinlich, dass der Roboter, obwohl sich beide RÃ¤der gleich schnell drehen, nicht ganz gerade fÃ¤hrt. Ursache hierfÃ¼r sind  <strong>systematische und nicht-systematische Fehler</strong>.</p><img src="/img/robotik/FehlerGeradeaus.png" alt="Fehler Geradeauslauf" width="550px" class="center"><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="systematische-odometry-fehler"></a>Systematische Odometry-Fehler<a class="hash-link" href="#systematische-odometry-fehler" title="Direct link to heading">#</a></h3><p>Systematische Fehler werden durch physikalische Abweichung des realen Roboters von dem theoretischem Bewegungs-Modell verursacht. Ein Beispiel sind unterschiedliche Durchmesser der beiden RÃ¤der oder auch RÃ¤der, welche nicht genau parallel zueinander ausgerichtet sind. Systematische Fehler sind Ã¼ber einen lÃ¤ngeren Zeitraum konstant und kÃ¶nnen daher bis zu einem gewissen Grad kompensiert werden.</p><p>Auf ebenen UntergrÃ¼nden dominieren die systematische Odometry-Fehler.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="nicht-systematische-odometry-fehler"></a>Nicht-Systematische Odometry-Fehler<a class="hash-link" href="#nicht-systematische-odometry-fehler" title="Direct link to heading">#</a></h3><p>Im Gegensatz dazu ist das Auftreten von nicht-systematisch Fehler nicht exakt vorherzubestimmen. Nicht-systematische Fehler werden zum Beispiel durch Bodenunebenheiten oder auch durch unprÃ¤zise gefertigte Achsen der RÃ¤der, welche ein zu groÃŸes Spiel aufweisen, verursacht. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="kalibrierung-des-geradeauslaufs"></a>Kalibrierung des Geradeauslaufs<a class="hash-link" href="#kalibrierung-des-geradeauslaufs" title="Direct link to heading">#</a></h3><p>Der einfachste Ansatz den Geradeauslauf zu verbessern, ist die Verwendung eines <em>Faktors</em> welcher zum Beispiel Unterschiede in den Raddurchmessern berÃ¼cksichtigt. Dabei wird zum Berechnen des <strong>Fehler</strong> fÃ¼r den Regler einer der beiden Rad-Encoder mit einem Faktor (<code>geradeFaktor</code>) multipliziert. Der richtige Faktor zum mÃ¶glichst geraden Fahren muss experimentell bestimmt werden.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">geradeFaktor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.95</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Werte zwischen 0.9 und 1.1</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">error</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> impulseEncoderLinks </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> geradeFaktor</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">impulseEncoderRechts </span><span class="token comment" style="color:#999988;font-style:italic">// </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Ein deutlich komplexerer Ansatz zur Kompensation verschiedener systematischer Fehler wird von <a href="http://www-personal.umich.edu/~johannb/Papers/paper58.pdf" target="_blank" rel="noopener noreferrer">Borenstein und Feng</a> beschrieben.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="aufgaben-1"></a>Aufgaben<a class="hash-link" href="#aufgaben-1" title="Direct link to heading">#</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><strong>Ãœben</strong></h5></div><div class="admonition-content"><ol><li><p>Lassen Sie den Roboter eine Strecke von ca. 1 Meter mit gleichen Motorgeschwindigkeiten fÃ¼r beide Seiten (z.B. <code>setSpeeds(200,200)</code>) fahren. Geben Sie den Unterschied der Encoder-Impulse zwischen den RÃ¤dern auf dem Display aus.  Bestimmen Sie auch die mittlere Differenz zwischen den Encodern in Millimetern pro gefahrenen Meter.</p></li><li><p>Schreiben Sie eine Funktion <code>void fahreGerade()</code> welche den Roboter mit Hilfe eines P-Reglers geradeaus fahren lÃ¤sst.</p></li><li><p>Kalibrieren Sie den P-Regler zum Geradeausfahren.</p></li><li><p>Wiederholden Sie die letzte Aufgabe. Versuchen Sie jedoch den Roboter die 20 cm so schnell wie mÃ¶glich zurÃ¼cklegen zu lassen. Messen Sie die Zeit. (<em>Hinweis: Nutzen Sie einen geeigneten Regler</em>)</p></li><li><p>Lassen Sie den Roboter Ã¼ber eine Zeit von ca. 0,6 Sekunden mit verschiedenen Geschwindigkeiten (200, 300, 400) fahren. Bestimmen sie gleichzeitig die aktuelle Geschwindigkeit in Impulsen pro Sekunde und Meter pro Sekunde. Geben Sie die Geschwindigkeiten wÃ¤hrend des Beschleunigungsvorgangs auf dem seriellen Monitor aus.</p><p>Stellen Sie abschlieÃŸend ihr Ergebnisse mit einem geeignetem Programm (z.B. Excel oder Openoffice) graphisch dar und beantworten Sie folgende Fragen:</p><ol><li>Wie lange benÃ¶tigt der Roboter, bis er seine jeweilige Maximalgeschwindigkeit erreicht hat?</li><li>Welcher Funktionstyp beschreibt den Zusammenhang zwischen Zeit und Geschwindigkeit am besten.</li><li>Welche Besonderheiten fallen Ihnen an der Beschleunigungskurve auf (Zumo 32u4).</li></ol></li></ol></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated on <b><time datetime="2021-09-18T12:05:11.000Z">9/18/2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/robotik/advancedLine/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Linie mit Kreuzungen</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/robotik/odometrie/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Odometrie Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#inkrementalgeber-incremental-encoder" class="table-of-contents__link">Inkrementalgeber (<em>Incremental Encoder</em>)</a><ul><li><a href="#quadratur-encoder-quadrature-encoder" class="table-of-contents__link">Quadratur-Encoder (<em>Quadrature Encoder</em>)</a></li></ul></li><li><a href="#auslesen-der-rad-encoder-beim-zumo-32u4" class="table-of-contents__link">Auslesen der Rad-Encoder beim Zumo 32u4</a><ul><li><a href="#aufgaben" class="table-of-contents__link">Aufgaben</a></li></ul></li><li><a href="#geradeausfahren-mit-einem-p-regler" class="table-of-contents__link">Geradeausfahren mit einem P-Regler</a><ul><li><a href="#systematische-odometry-fehler" class="table-of-contents__link">Systematische Odometry-Fehler</a></li><li><a href="#nicht-systematische-odometry-fehler" class="table-of-contents__link">Nicht-Systematische Odometry-Fehler</a></li><li><a href="#kalibrierung-des-geradeauslaufs" class="table-of-contents__link">Kalibrierung des Geradeauslaufs</a></li><li><a href="#aufgaben-1" class="table-of-contents__link">Aufgaben</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/SpaceHal/spacehal.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Schule</div><ul class="footer__items"><li class="footer__item"><a href="https://www.osztiem.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>OSZTIEM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.arduino.cc/reference/de/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Arduino<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/impressum/">Impressum</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Stefan Warm. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c4f4056c.js"></script>
<script src="/assets/js/main.5ea5f668.js"></script>
</body>
</html>