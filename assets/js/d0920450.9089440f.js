"use strict";(self.webpackChunkspace_hal=self.webpackChunkspace_hal||[]).push([[6535],{3905:(e,n,r)=>{r.d(n,{Zo:()=>u,kt:()=>f});var t=r(7294);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=t.createContext({}),d=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},u=function(e){var n=d(e.components);return t.createElement(s.Provider,{value:n},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var r=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(r),c=i,f=m["".concat(s,".").concat(c)]||m[c]||g[c]||a;return r?t.createElement(f,o(o({ref:n},u),{},{components:r})):t.createElement(f,o({ref:n},u))}));function f(e,n){var r=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var d=2;d<a;d++)o[d]=r[d];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}c.displayName="MDXCreateElement"},9843:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var t=r(7462),i=(r(7294),r(3905));const a={title:"Einfacher Linienfolger - So folgt ein Roboter einer Linie",sidebar_label:"Linienfolger einfach",description:"Mit einem einfachen Algorithmus kann ein Roboter einer Linie folgen. Der 3-Stufen-Regler f\xfcr den Linienfolger ist einfach zu verstehen und schnell zu programmieren.",custom_edit_url:null,keywords:["Arduino","Linienfolger","Roboter","Linienfolger Programm","Linienfolger Roboter","linienfolger arduino programm","Linie folgen","Linie folgen Arduino","Linienfolger programmieren","Pseudocode","Regler","Proportionalregler","P-Regler","kp Faktor","Proportionalfaktor","PID Regler","linienfolger pid","Kantenfolger","3-Stufen-Regler"]},o=void 0,l={unversionedId:"robotik/edgeFollower",id:"robotik/edgeFollower",title:"Einfacher Linienfolger - So folgt ein Roboter einer Linie",description:"Mit einem einfachen Algorithmus kann ein Roboter einer Linie folgen. Der 3-Stufen-Regler f\xfcr den Linienfolger ist einfach zu verstehen und schnell zu programmieren.",source:"@site/docs/robotik/edgeFollower.md",sourceDirName:"robotik",slug:"/robotik/edgeFollower",permalink:"/docs/robotik/edgeFollower",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{title:"Einfacher Linienfolger - So folgt ein Roboter einer Linie",sidebar_label:"Linienfolger einfach",description:"Mit einem einfachen Algorithmus kann ein Roboter einer Linie folgen. Der 3-Stufen-Regler f\xfcr den Linienfolger ist einfach zu verstehen und schnell zu programmieren.",custom_edit_url:null,keywords:["Arduino","Linienfolger","Roboter","Linienfolger Programm","Linienfolger Roboter","linienfolger arduino programm","Linie folgen","Linie folgen Arduino","Linienfolger programmieren","Pseudocode","Regler","Proportionalregler","P-Regler","kp Faktor","Proportionalfaktor","PID Regler","linienfolger pid","Kantenfolger","3-Stufen-Regler"]},sidebar:"mySidebar",previous:{title:"Linienfolger",permalink:"/docs/category/linienfolger"},next:{title:"Linienfolger P-Regler",permalink:"/docs/robotik/edge_P_Control"}},s={},d=[{value:"3-Stufen-Algorithmus",id:"3-stufen-algorithmus",level:2},{value:"Kalibrierung",id:"kalibrierung",level:2},{value:"Pseudocode zum Kalibrieren",id:"pseudocode-zum-kalibrieren",level:3}],u={toc:d},m="wrapper";function g(e){let{components:n,...r}=e;return(0,i.kt)(m,(0,t.Z)({},u,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Der einfachste Linienfolger ist, wenn man es genau nimmt, gar kein Linienfolger, sondern ein ",(0,i.kt)("strong",{parentName:"p"},"Kantenfolger"),". Besitzt der ",(0,i.kt)("a",{parentName:"p",href:"/docs/robotik/beginning"},"Roboter")," ",(0,i.kt)("strong",{parentName:"p"},"einen")," ",(0,i.kt)("a",{parentName:"p",href:"/docs/sensoren/irSensor/"},"Bodensensor")," zum Unterscheiden von hellen und dunklen Untergr\xfcnden, so ist es m\xf6glich den Roboter an der Kante entlang der Linie folgen zu lassen. "),(0,i.kt)("img",{src:"/img/robotik/Kantenfolger2.webp",alt:"Linienfolger Roboter",width:"480px",className:"center"}),(0,i.kt)("p",null,"Das Grundprinzip des Kantenfolgers (Linienfolger mit nur einem Sensor) ist in der Abbildung dargestellt. Der IR-Sensor detektiert das vom Untergrund reflektierte Licht und gibt dies in Form eines Messwertes zur\xfcck. In der Abbildung sind die Messwerte des Sensors auf dem Roboter rot angegeben. In diesem Beispiel gilt, je heller der Untergrund, desto gr\xf6\xdfer der Messwert. Mithilfe der Messwerte muss der Roboter entscheiden, wo sich die Linienkante befindet und welche Richtung er fahren muss. Hierf\xfcr gibt es verschiedene Algorithmen. "),(0,i.kt)("img",{src:"/img/robotik/BotOnLine.png",alt:"Linienfolger Roboter",width:"660px",className:"center"}),(0,i.kt)("h2",{id:"3-stufen-algorithmus"},"3-Stufen-Algorithmus"),(0,i.kt)("p",null,"F\xfcr eine einfache ",(0,i.kt)("strong",{parentName:"p"},"Motorregelung zum Folgen der Linie")," k\xf6nnen f\xfcr den Roboter, bzw. den Messwert, drei verschiedene F\xe4lle unterschieden werden:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Fall A"),"  Der Sensor ist im Wesentlichen neben der Linie und detektiert viel IR-Licht (z.B. Messwert: 900). Der Roboter sollte mehr nach links zur Linie fahren."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Fall B"),"  Der Sensor ist haupts\xe4chlich \xfcber der Linie und detektiert wenig IR-Licht (z.B. Messwert: 180). Der Roboter sollte mehr nach rechts zur Linienkante fahren."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Fall C"),"  Der Sensor befindet sich zur H\xe4lfte \xfcber der Linie und ist somit ungef\xe4hr \xfcber der Kante (z.B. Messwert: 550). Der Roboter kann einfach geradeaus fahren.")),(0,i.kt)("p",null,"Ein ",(0,i.kt)("strong",{parentName:"p"},"Algorithmus zur Steuerung")," des Roboters (ohne Fall C) k\xf6nnte folgenderma\xdfen aussehen:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"// Pseudocode f\xfcr einen 2-Stufen-Kantenfolger\n\nwertKante = 600                        // Wert muss angepasst werden\n\nwiederhole dauerhaft\n    wertIr = messenIrSensor()\n    wenn (wertIr > wertKante)           // Fall A\n        fahrenLinks() \n        \n    sonst wenn (wertIr <= wertKante)    // Fall B\n        fahrenRechts() \n")),(0,i.kt)("h2",{id:"kalibrierung"},"Kalibrierung"),(0,i.kt)("p",null,"Bleibt die Frage, wie der ",(0,i.kt)("strong",{parentName:"p"},"Schwellert f\xfcr die Linienkante ermittelt wird"),", der Roboter also kalibriert werden kann. Der einfachste, wenn auch nicht genaueste Weg w\xe4re mit Hilfe der seriellen Schnittstelle den Maximalwert und den Minimalwert des reflektieren IR Lichts f\xfcr die Linie bzw. die Fl\xe4che daneben zu bestimmen. Der Mittelwert aus beiden Werten sollte der Linienkante entsprechen und kann dann als Konstante in das Programm eingef\xfcgt werden."),(0,i.kt)("h3",{id:"pseudocode-zum-kalibrieren"},"Pseudocode zum Kalibrieren"),(0,i.kt)("p",null,"Ein besserer Ansatz ist das automatische Kalibrieren des Bodensensors. Hierf\xfcr dreht sich der Roboter auf der Stelle \xfcber der Linie und ermittelt automatisch den maximalen und den minimalen Messwert."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"// Psedocode zum Kalibrieren des Bodensensors\n\nminWert = 1023                  // Initialisieren der minimalen und maximalen Werte  \nmaxWert = 0                     // des Bodensensors. Werden sp\xe4ter \xfcberschrieben.\n\ndreheLinks()                    // Motoren zum Linksdrehen aktivieren\nwiederhole 100 mal\n    wertIr = messenIrSensor()   // reflektiertes IR Licht messen\n    wenn (wertIr < minWert)     // aktueller IR-Wert kleiner, als `minWert`\n        minWert = wertIr        // `minWert` mit aktuellem  IR Wert \xfcberschreiben\n    wenn (wertIr > maxWert)     // aktueller IR-Wert gr\xf6\xdfer, als `maxWert``\n        maxWert = wertIr        // `maxWert` mit aktuellem  IR Wert \xfcberschreiben\n\ndreheRechts()                   // zur\xfcckdrehen und weiter messen\nwiederhole 200 mal  \n    wertIr = messenIrSensor()\n    wenn (wertIr < minWert)\n        minWert = wertIr\n    wenn (wertIr > maxWert)\n        maxWert = wertIr\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"}," Der Kanten-Algorithmus funktioniert am besten, wenn der Roboter langsam f\xe4hrt!")),(0,i.kt)("p",null,"Der vorgestellte 3-Stufen-Regler f\xfchrt in der Regel zu einem sehr unruhigen, wackligen Fahrverhalten. Damit der Roboter geschmeidiger, mit weniger Zick-Zack-Bewegungen der Linie folgt, lohnt es sich den ",(0,i.kt)("a",{parentName:"p",href:"/docs/robotik/edge_P_Control"},"P-Regler zum Linenfolgen")," zu verstehen."),(0,i.kt)("details",{className:"ueben"}," ",(0,i.kt)("summary",null,"Aufgaben"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Programmieren Sie den ",(0,i.kt)("strong",{parentName:"p"},"einfachen Kanten-Algorithmus"),". Passen Sie die Werte der Linienkante an und schreiben Sie geeignete Methoden ",(0,i.kt)("inlineCode",{parentName:"p"},"fahreLinks()")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"fahreRechts()"),". Welchen Einfluss hat der minimale Kurvenradius der zu folgenden Linie auf die Funktionen ",(0,i.kt)("inlineCode",{parentName:"p"},"fahreLinks()")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"fahreRechts()"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Schreiben Sie eine ",(0,i.kt)("strong",{parentName:"p"},"Kalibrierungsfunktion"),", welche (auf Knopfdruck) den Sensorwert f\xfcr die Linienkante automatisch ermittelt. Lassen Sie hierf\xfcr den Roboter in beide Richtungen automatisch \xfcber die Linie drehen und den Maximal- und Minimalwert des reflektierten Lichtes bestimmen. Bestimmen Sie den Sollwert der Linienkante aus dem ermittelten Maximal- und Minimalwert.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Erweitern")," Sie den Algorithmus ",(0,i.kt)("strong",{parentName:"p"},"um den Fall C"),": ",(0,i.kt)("inlineCode",{parentName:"p"},"fahreGeradeaus()"),"."),(0,i.kt)("p",{parentName:"li"},"*Hinweis: Legen Sie einen geeigneten Wertebereich um den Sensorwert der Linienkante fest, bei dem der Roboter geradeaus fahren soll. Nutzen Sie hierf\xfcr die Variable  ",(0,i.kt)("inlineCode",{parentName:"p"},"wertToleranz"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Schreiben Sie ein neues Programm, welches den Kanten-Algorithmus um ",(0,i.kt)("strong",{parentName:"p"},"zwei weitere Stufen (halblinks, halbrechts)")," erweitert, so dass Sie insgesamt 5 F\xe4lle unterscheiden k\xf6nnen. Geben Sie f\xfcr jeden Fall einen ",(0,i.kt)("strong",{parentName:"p"},"Toleranzbereich")," und die notwendige Fahrtrichtung an. Die Bereiche sollten relativ zum Minimal- bzw. Maximalwert des IR-Sensors bestimmt werden: "),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"0% - 20%   : links"),(0,i.kt)("li",{parentName:"ul"},"21% - 40%  : halblinks"),(0,i.kt)("li",{parentName:"ul"},"41% - 60%  : geradeaus"),(0,i.kt)("li",{parentName:"ul"},"61% - 80%  : halbrechts"),(0,i.kt)("li",{parentName:"ul"},"81% - 100% : rechts")),(0,i.kt)("p",{parentName:"li"},"Geben Sie f\xfcr die Bereiche keine Werte vor, sondern berechnen Sie diese aus den automatischen Kalibrierungswerten des Sensors (siehe Aufgabe 2). ")))))}g.isMDXComponent=!0}}]);