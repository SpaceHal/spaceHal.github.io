"use strict";(self.webpackChunkspace_hal_2=self.webpackChunkspace_hal_2||[]).push([[5786],{3049:function(e,a,t){t.r(a),t.d(a,{contentTitle:function(){return v},default:function(){return z},frontMatter:function(){return f},metadata:function(){return y},toc:function(){return x}});var n=t(3117),s=t(102),r=t(7294),m=t(3905),i=t(3786),p=[{xTime:0,speed20ms:0},{xTime:20,speed20ms:1075},{xTime:40,speed20ms:2025},{xTime:60,speed20ms:2525},{xTime:80,speed20ms:2775},{xTime:100,speed20ms:3150},{xTime:120,speed20ms:3325},{xTime:140,speed20ms:3400},{xTime:160,speed20ms:3425},{xTime:180,speed20ms:3450},{xTime:200,speed20ms:3475},{xTime:220,speed20ms:3475},{xTime:240,speed20ms:3500},{xTime:260,speed20ms:3525},{xTime:280,speed20ms:3500},{xTime:300,speed20ms:3550},{xTime:320,speed20ms:3575},{xTime:340,speed20ms:3525},{xTime:360,speed20ms:3500},{xTime:380,speed20ms:3550},{xTime:400,speed20ms:3500}];i.kL.defaults.font.size=15,i.kL.defaults.color="black",i.kL.defaults.font.family="Avenir",i.kL.defaults.elements.point=0,i.kL.defaults.datasets.cubicInterpolationMode="monotone",i.kL.defaults.plugins.legend.align="end";var l=2e3/p.length,o={parsing:{xAxisKey:"xTime"},animation:{x:{type:"number",easing:"linear",duration:l,from:NaN,delay:function(e){return"data"!==e.type||e.xStarted?0:(e.xStarted=!0,e.index*l)}},y:{type:"number",easing:"linear",duration:l,from:function(e){return 0===e.index?e.chart.scales.y.getPixelForValue(100):e.chart.getDatasetMeta(e.datasetIndex).data[e.index-1].getProps(["y"],!0).y},delay:function(e){return"data"!==e.type||e.yStarted?0:(e.yStarted=!0,e.index*l)}}},interaction:{intersect:!1},responsive:!0,plugins:{filler:{propagate:!0},legend:{display:!1,position:"top",font:{weight:"normal"},labels:{boxWidth:15,boxHeight:10}},title:{position:"bottom",display:!0,text:"Verlauf der Geschwindigkeit des Zumo 32u4",font:{weight:"bold",size:15}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.7)",titleColor:"#474747",bodyColor:"#474747",cornerRadius:2,displayColors:!1,borderColor:"#474747",borderWidth:1}},scales:{x:{type:"linear",grid:{borderWidth:1,borderColor:"black",drawBorder:!1,color:function(e){return 0===e.tick.value?"Black":"LightGrey"},lineWidth:function(e){return 0===e.tick.value?1:.5},drawTicks:!1},ticks:{stepSize:40,maxRotation:0,padding:20},title:{display:!0,text:"Zeit in ms",align:"center",font:{weight:"italic"}}},y:{grid:{borderWidth:1,borderColor:"black",drawBorder:!1,color:function(e){return 0===e.tick.value?"Black":"LightGrey"},lineWidth:function(e){return 0===e.tick.value?1:.5},drawTicks:!1},ticks:{min:0,max:4005,stepSize:1e3,padding:20,beginAtZero:!0},title:{display:!0,text:"Impulse pro Sekunde",align:"center",font:{weight:"italic"}},offset:!1,beginAtZero:!0}},datasets:{line:{borderWidth:2}}},d={type:"line",data:{labels:p.map((function(e){return Math.round(e.xTime/1e3)+" ms"})),datasets:[{label:"Geschwindigkeit",data:p,hidden:!1,cubicInterpolationMode:"monotone",borderColor:"#4e4752",backgroundColor:"rgba(0, 0, 0, 0.1)",fill:"origin",parsing:{yAxisKey:"speed20ms"}}]}},N=function(){return r.createElement("div",{className:"chartwrapper"},r.createElement(i.x1,{data:d.data,options:o,width:100,height:45}))},k=[{xTime:10068,speed:0,error:2e3,integral:2e3,power:200},{xTime:20112,speed:349,error:1651,integral:3651,power:365},{xTime:30112,speed:1150,error:850,integral:4e3,power:400},{xTime:40108,speed:1750,error:250,integral:4e3,power:400},{xTime:50108,speed:2250,error:-250,integral:3750,power:375},{xTime:60124,speed:2650,error:-650,integral:3100,power:310},{xTime:70116,speed:2800,error:-800,integral:2300,power:230},{xTime:80112,speed:2800,error:-800,integral:1500,power:150},{xTime:90128,speed:2648,error:-648,integral:852,power:85},{xTime:100124,speed:2399,error:-399,integral:453,power:45},{xTime:110144,speed:1847,error:153,integral:606,power:60},{xTime:120140,speed:1648,error:352,integral:958,power:95},{xTime:130148,speed:1448,error:552,integral:1510,power:151},{xTime:140156,speed:1449,error:551,integral:2061,power:206},{xTime:150156,speed:1650,error:350,integral:2411,power:241},{xTime:160160,speed:1700,error:300,integral:2711,power:271},{xTime:170164,speed:1849,error:151,integral:2862,power:286},{xTime:180164,speed:2148,error:-148,integral:2714,power:271},{xTime:190172,speed:2350,error:-350,integral:2364,power:236},{xTime:200176,speed:2399,error:-399,integral:1965,power:196},{xTime:210168,speed:2400,error:-400,integral:1565,power:156},{xTime:220176,speed:2248,error:-248,integral:1317,power:131},{xTime:230204,speed:2097,error:-97,integral:1220,power:122},{xTime:240208,speed:1945,error:55,integral:1275,power:127},{xTime:250224,speed:1699,error:301,integral:1576,power:157},{xTime:260220,speed:1797,error:203,integral:1779,power:177},{xTime:270232,speed:1747,error:253,integral:2032,power:203},{xTime:280236,speed:1749,error:251,integral:2283,power:228},{xTime:290264,speed:1847,error:153,integral:2436,power:243},{xTime:300248,speed:2150,error:-150,integral:2286,power:228},{xTime:310256,speed:2050,error:-50,integral:2236,power:223},{xTime:320260,speed:2099,error:-99,integral:2137,power:213},{xTime:330260,speed:2248,error:-248,integral:1889,power:188},{xTime:340276,speed:2198,error:-198,integral:1691,power:169},{xTime:350268,speed:2050,error:-50,integral:1641,power:164},{xTime:360276,speed:1949,error:51,integral:1692,power:169},{xTime:370292,speed:1996,error:4,integral:1696,power:169},{xTime:380304,speed:1948,error:52,integral:1748,power:174},{xTime:390312,speed:1897,error:103,integral:1851,power:185},{xTime:400324,speed:1847,error:153,integral:2004,power:200},{xTime:410332,speed:2e3,error:0,integral:2004,power:200},{xTime:420340,speed:1999,error:1,integral:2005,power:200},{xTime:430344,speed:1949,error:51,integral:2056,power:205},{xTime:440340,speed:2048,error:-48,integral:2008,power:200},{xTime:450344,speed:2049,error:-49,integral:1959,power:195},{xTime:460352,speed:1999,error:1,integral:1960,power:196},{xTime:470364,speed:1999,error:1,integral:1961,power:196},{xTime:480356,speed:2099,error:-99,integral:1862,power:186},{xTime:490372,speed:1997,error:3,integral:1865,power:186}],g=["#4e4752","#D62828","#39998f","#bd86a8"];i.kL.defaults.font.size=15,i.kL.defaults.color="black",i.kL.defaults.font.family="Avenir",i.kL.defaults.elements.point=0,i.kL.defaults.datasets.cubicInterpolationMode="monotone",i.kL.defaults.plugins.legend.align="end";var c=2e3/k.length,h={parsing:{xAxisKey:"xTime"},animation:{x:{type:"number",easing:"linear",duration:c,from:NaN,delay:function(e){return"data"!==e.type||e.xStarted?0:(e.xStarted=!0,e.index*c)}},y:{type:"number",easing:"linear",duration:c,from:function(e){return 0===e.index?e.chart.scales.y.getPixelForValue(100):e.chart.getDatasetMeta(e.datasetIndex).data[e.index-1].getProps(["y"],!0).y},delay:function(e){return"data"!==e.type||e.yStarted?0:(e.yStarted=!0,e.index*c)}}},interaction:{intersect:!1},responsive:!0,plugins:{filler:{propagate:!0},legend:{position:"top",font:{weight:"normal"},labels:{boxWidth:15,boxHeight:10}},title:{position:"bottom",display:!0,text:"Integralregler mit ki=0.1 f\xfcr die Geschwindigkeit (in Impulse pro Sekunde)",font:{weight:"bold",size:15}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.7)",titleColor:"#474747",bodyColor:"#474747",cornerRadius:2,displayColors:!1,borderColor:"#474747",borderWidth:1}},scales:{x:{grid:{borderWidth:1,borderColor:"black",drawBorder:!1,color:function(e){return 0===e.tick.value?"Black":"LightGrey"},lineWidth:function(e){return 0===e.tick.value?1:.5},drawTicks:!1},ticks:{autoSkipPadding:50,maxRotation:0,padding:20},title:{display:!0,text:"Zeit in ms",align:"center",font:{weight:"italic"}}},y:{grid:{borderWidth:1,borderColor:"black",drawBorder:!1,color:function(e){return 0===e.tick.value?"Black":"LightGrey"},lineWidth:function(e){return 0===e.tick.value?1:.5},drawTicks:!1},ticks:{min:-1e3,max:4005,autoSkipPadding:25,padding:20,beginAtZero:!0},title:{display:!1,text:"Impulse pro Sekunde oder Motorsignal",align:"center",font:{weight:"italic"}},offset:!1,beginAtZero:!0}},datasets:{line:{borderWidth:2}}},u={type:"line",data:{labels:k.map((function(e){return Math.round(e.xTime/1e3)+" ms"})),datasets:[{label:"aktuelle Geschwindigkeit",data:k,hidden:!1,cubicInterpolationMode:"monotone",borderColor:g[0],backgroundColor:"rgba(0, 0, 0, 0.1)",fill:{target:"origin"},parsing:{yAxisKey:"speed"}},{label:"Fehler",data:k,cubicInterpolationMode:"monotone",borderColor:g[1],backgroundColor:g[1],parsing:{yAxisKey:"error"}},{label:"Integral-Anteil",data:k,cubicInterpolationMode:"monotone",borderColor:g[2],backgroundColor:g[2],hidden:!0,parsing:{yAxisKey:"integral"}},{label:"Motorsignal",data:k,cubicInterpolationMode:"monotone",borderColor:g[3],backgroundColor:g[3],hidden:!0,parsing:{yAxisKey:"power"}}]}},w=function(){return r.createElement("div",{className:"chartwrapper"},r.createElement(i.x1,{data:u.data,options:h,width:100,height:60}))},b=["components"],f={id:"speedControl",title:"Ein Integralregler f\xfcr die Geschwindigkeit",sidebar_label:"Geschwindigkeitsregler",description:"Mit einem Integralregler und Rad-Encodern wird die Geschwindigkeit des Zumo 32u4 Roboters geregelt.",custom_edit_url:null,keywords:["Arduino","Roboter","Robotik","Gesschwindigkeit regeln","Quadraturencoder","Inkrementalgeber","Radencoder","Motorencoder","Integralregler","Integral-Regler","I-Regler","Zumo 32u4"]},v=void 0,y={unversionedId:"robotik/speedControl",id:"robotik/speedControl",title:"Ein Integralregler f\xfcr die Geschwindigkeit",description:"Mit einem Integralregler und Rad-Encodern wird die Geschwindigkeit des Zumo 32u4 Roboters geregelt.",source:"@site/docs/robotik/speedControl.mdx",sourceDirName:"robotik",slug:"/robotik/speedControl",permalink:"/docs/robotik/speedControl",editUrl:null,tags:[],version:"current",lastUpdatedAt:1641119333,formattedLastUpdatedAt:"2.1.2022",frontMatter:{id:"speedControl",title:"Ein Integralregler f\xfcr die Geschwindigkeit",sidebar_label:"Geschwindigkeitsregler",description:"Mit einem Integralregler und Rad-Encodern wird die Geschwindigkeit des Zumo 32u4 Roboters geregelt.",custom_edit_url:null,keywords:["Arduino","Roboter","Robotik","Gesschwindigkeit regeln","Quadraturencoder","Inkrementalgeber","Radencoder","Motorencoder","Integralregler","Integral-Regler","I-Regler","Zumo 32u4"]},sidebar:"sideBarRobotik",previous:{title:"Ge\xadra\xadde\xadaus\xadfahrt",permalink:"/docs/robotik/goStraight"},next:{title:"Anwendung: Barcode",permalink:"/docs/robotik/botBarcode"}},x=[{value:"Geschwindigkeit messen",id:"geschwindigkeit-messen",children:[{value:"Beispiel",id:"beispiel",children:[],level:4},{value:"Zeitverlauf der Geschwindigkeit",id:"zeitverlauf-der-geschwindigkeit",children:[],level:3}],level:2},{value:"Vorbetrachtungen zum Regler",id:"vorbetrachtungen-zum-regler",children:[],level:2},{value:"Integralregler",id:"integralregler",children:[{value:"Integralanteil beschr\xe4nken - Der Windup-Effekt",id:"integralanteil-beschr\xe4nken---der-windup-effekt",children:[],level:3},{value:"Beispiel Geschwindigkeitsregelung",id:"beispiel-geschwindigkeitsregelung",children:[],level:3},{value:"Vollst\xe4ndiger Pseudocode I-Regler",id:"vollst\xe4ndiger-pseudocode-i-regler",children:[],level:3}],level:2}],R={toc:x};function z(e){var a=e.components,t=(0,s.Z)(e,b);return(0,m.kt)("wrapper",(0,n.Z)({},R,t,{components:a,mdxType:"MDXLayout"}),(0,m.kt)("p",null,"Mit den ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/wheelEncoder"},"Motor-Encodern")," kann der Roboter nicht nur ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/goStraight"},"geradeaus fahren")," oder eine ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/wheelEncoder/#aufgaben"},"festgelegte Distanz")," zur\xfccklegen, sondern es ist damit auch m\xf6glich, die Geschwindigkeit des Roboters zu regeln. Ohne Geschwindigkeitsregelung w\xfcrde zum Beispiel ein fester PWM-Wert f\xfcr den Motor bei abnehmender Batteriespannung zu einem langsamer fahrenden Roboter f\xfchren. Mit einem Regler w\xfcrde der Moterwert so angepasst werden, dass der Roboter weiter mit der vorgegebenen Geschwindigkeit f\xe4hrt."),(0,m.kt)("h2",{id:"geschwindigkeit-messen"},"Geschwindigkeit messen"),(0,m.kt)("p",null,"Bevor ein Regler f\xfcr die Geschwindigkeit vorgestellt wird, soll die aktuelle Geschwindigkeit des Roboters \xfcber die serielle Schnittstelle ausgegeben werden, um sie anschlie\xdfend mit einem geeignetem Program als Liniendiagramm darzustellen zu k\xf6nnen."),(0,m.kt)("p",null,"Zum Bestimmen der Geschwindigkeit des Roboters, m\xfcssen f\xfcr ein festes Zeitintervall ",(0,m.kt)("inlineCode",{parentName:"p"},"dZeit")," die vom linken und rechten Motor erzeugten Encoder-Impulse ermittelt und anschlie\xdfend gemittelt werden:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre"},"int impulseLinks = encoders.getCountsAndResetRight(); // Impulse auslesen und zur\xfccksetzen\nint impulseRechts = encoders.getCountsAndResetLeft();\n\nimpulseRoboter = (impulseLinks + impulseRechts)/2;           // Mittelwert bestimmen\n")),(0,m.kt)("p",null," Die Geschwindigkeit des Roboters ",(0,m.kt)("inlineCode",{parentName:"p"},"vRoboter")," wird dann in ",(0,m.kt)("em",{parentName:"p"},"Encoderimpulse pro Sekunde")," angegeben."),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre"},"int vRoboter = impulseRoboter/dZeit;  // Robotergeschwindigkeit in Impulsen pro Sekunde\n")),(0,m.kt)("p",null,"W\xfcrde die Geschwindigkeit so oft wie m\xf6glich, also mit einem m\xf6glichst kleinem ",(0,m.kt)("inlineCode",{parentName:"p"},"dZeit")," bestimmt werden, so w\xfcrden die sich ergebenden Werte ziemlich ",(0,m.kt)("strong",{parentName:"p"},"stark schwanken"),". Diese ",(0,m.kt)("strong",{parentName:"p"},"Quantisierungsfehler")," entstehen, wenn pro Zeitintervall nur sehr wenige Encoderimpulse gemessen werden. Wird dann in einem Zeitintervall nur nur ein Impuls mehr oder weniger gez\xe4hlt wird, f\xfchrt das zu einer relativ gro\xdfen \xc4nderung der ermittelten Geschwindigkeit."),(0,m.kt)("h4",{id:"beispiel"},"Beispiel"),(0,m.kt)("p",null,"In einem ",(0,m.kt)("strong",{parentName:"p"},"Zeitintervall von 4 ms")," werden 9 bzw. 10 Impulse gez\xe4hlt. Wird f\xfcr beide F\xe4lle die Geschwindigkeit bestimmt, so ergeben sich folgende Geschwindigkeiten:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-test"}," 9  Impulse  ->   2250 Impulse pro Sekunde\n10  Impulse  ->   2500 Impulse pro Sekunde\n")),(0,m.kt)("p",null," Das ergibt eine Abweichung von 10 %. Wird das Zeitintervall vergr\xf6\xdfert, wird die prozentuale Abweichung immer kleiner, und die ermittelte Geschwindigkeit schwankt daher weniger. Das Zeitintervall, in welchem die Encoder-Impulse bestimmt werden, sollte so festgelegt sein, das im Mittel ca. 50 Impulse detektiert werden."),(0,m.kt)("h3",{id:"zeitverlauf-der-geschwindigkeit"},"Zeitverlauf der Geschwindigkeit"),(0,m.kt)(N,{mdxType:"SpeedLineChart"}),(0,m.kt)("p",null,"In der Abbildung ist der Verlauf der Geschwindigkeit des Zumo 32u4 dargestellt, wenn er aus dem Stand auf den Motorwert ",(0,m.kt)("inlineCode",{parentName:"p"},"stetSpeeds(300,300)")," beschleunigt wird. Es ist gut zu erkennen, dass die Geschwindigkeit relativ schnell stark ansteigt und dann ab ca. 160 ms die Maximalgeschwindigkeit erreicht."),(0,m.kt)("details",{className:"ueben"}," ",(0,m.kt)("summary",null,"Aufgaben"),(0,m.kt)("ol",null,(0,m.kt)("li",{parentName:"ol"},(0,m.kt)("p",{parentName:"li"},"Beschreiben Sie weitere Situationen, in denen es sinnvoll ist die Motordrehzahl zu regeln.")),(0,m.kt)("li",{parentName:"ol"},(0,m.kt)("p",{parentName:"li"},"Lassen Sie den Roboter \xfcber eine Zeit von ca. 0,5 Sekunden mit verschiedenen Geschwindigkeiten (200, 300, 400) fahren. Bestimmen sie gleichzeitig die ",(0,m.kt)("strong",{parentName:"p"},"aktuelle Geschwindigkeit in Impulsen pro Sekunde"),".",(0,m.kt)("br",{parentName:"p"}),"\n","Geben Sie sowohl die Zeit als auch die Geschwindigkeit w\xe4hrend des Beschleunigungsvorgangs auf dem seriellen Monitor aus.",(0,m.kt)("br",{parentName:"p"}),"\n","Stellen Sie abschlie\xdfend ihr Ergebnisse mit einem geeignetem Programm (z.B. ",(0,m.kt)("a",{parentName:"p",href:"https://support.microsoft.com/de-de/topic/darstellen-von-daten-im-punkt-oder-liniendiagramm-4570a80f-599a-4d6b-a155-104a9018b86e#OfficeVersion=Windows"},"Excel")," oder Openoffice) graphisch dar (y-Achse: Impulse pro Sekunde, x-Achse: Zeit in Millisekudnen) und beantworten Sie folgende Fragen:  "),(0,m.kt)("ol",{parentName:"li"},(0,m.kt)("li",{parentName:"ol"},"Wie lange ben\xf6tigt der Roboter, bis er seine jeweilige Maximalgeschwindigkeit erreicht hat?"),(0,m.kt)("li",{parentName:"ol"},"Welcher Funktionstyp beschreibt den Zusammenhang zwischen Zeit und Geschwindigkeit am besten.   ")),(0,m.kt)("p",{parentName:"li"},(0,m.kt)("strong",{parentName:"p"},"Hinweise")," f\xfcr die Bearbeitung"),(0,m.kt)("ul",{parentName:"li"},(0,m.kt)("li",{parentName:"ul"},(0,m.kt)("p",{parentName:"li"},"Nutzen Sie f\xfcr eine bessere Genauigkeit bei der Zeitmessung die ",(0,m.kt)("a",{parentName:"p",href:"https://www.arduino.cc/reference/de/language/functions/time/micros/"},(0,m.kt)("inlineCode",{parentName:"a"},"micros()"))," Funktion. Beachten Sie aber, das die ",(0,m.kt)("strong",{parentName:"p"},"Geschwindigkeit in Impulsen pro Sekunde")," und nicht in Impulsen pro Mikroekunde angegeben werden soll.")),(0,m.kt)("li",{parentName:"ul"},(0,m.kt)("p",{parentName:"li"},"Trennen sie beide Werte mit einem Tabulator (",(0,m.kt)("inlineCode",{parentName:"p"},"\\t"),"):  "),(0,m.kt)("pre",{parentName:"li"},(0,m.kt)("code",{parentName:"pre"},'Serial.print(zeit), Serial.print("\\t"),Serial.println(vRoboter);\n'))),(0,m.kt)("li",{parentName:"ul"},(0,m.kt)("p",{parentName:"li"},"Messen Sie die Geschwindigkeit in einem Zeitintervall, welches im Mittel ca. 50 Impulse detektiert (ca. 20 ms).  ")),(0,m.kt)("li",{parentName:"ul"},(0,m.kt)("p",{parentName:"li"},"Verwenden Sie den Programmauszug:"),(0,m.kt)("pre",{parentName:"li"},(0,m.kt)("code",{parentName:"pre"},"/*   Programmauszug zur Geschwindigkeitsmessung    */\n\n/*  ...  */\nunsigned long dZeit    =   5 * 1e3;      // Zeitintervall f\xfcr die Geschwindigkeitsmessung (5000 Mikrosekunden)\nunsigned long fahrzeit = 500 * 1e3;      // Dauer der Messung (0,5 Sekunden)\n\nunsigned long jetzt         = micros();\nunsigned long startzeit     = jetzt;     // Startzeitpunkt der Messreihe\nunsigned long letzteMessung = jetzt;     // Zeitpunkt der letzten durchgef\xfchrten Messung\n\nmotors.setSpeeds(MOTOR_POWER, MOTOR_POWER);\nwhile (jetzt - startzeit < fahrzeit) {        // Messung dauert insgesamt AN_ZEIT\n  jetzt = micros();                           // Nutzen Sie micros() f\xfcr eine bessere Genauigkeit\n  \n  if (jetzt - letzteMessung >= dZeit) { \n    letztesMal = jetzt;\n    int impulseRight = encoders.getCountsAndResetRight(); // Impulse auslesen und zur\xfccksetzen\n    int impulseLinks = encoders.getCountsAndResetLeft();\n    \n    /*  ...  */ \n\n  } \n} \n/*  ...  */\n"))))))),(0,m.kt)("h2",{id:"vorbetrachtungen-zum-regler"},"Vorbetrachtungen zum Regler"),(0,m.kt)("p",null,"Aber wie w\xfcrde nun ein Regler f\xfcr die Geschwindigkeit aussehen? Vom Linienfolger ist bereits der ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/edge_P_Control/#proportional-regler-p-controller"},"Proportionalregler")," bekannt. Angenommen, der Roboter soll mit einer Geschwindigkeit von 2000 Encoder-Impulsen pro Sekunde fahren. Dann w\xfcrde sich die Regelabweichung (also der Fehler) wie folgt berechnen:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"fehler = 2000 - vRoboter              // Fehler: Abweichung der Geschwindigkeit vom Sollwert\n")),(0,m.kt)("p",null,"Mit dem ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/edge_P_Control/#proportional-regler-p-controller"},"Proportionalregler")," w\xfcrde dann das Motorsignal f\xfcr die ",(0,m.kt)("inlineCode",{parentName:"p"},"setSpeeds()"),"-Funktion bestimmt werden:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"motorSignal = kp * fehler             // P-Regler f\xfcr das Motorsignal\nsetSpeeds(motorSignal,motorSignal)    // einstellen der Geschwindigkeit\n")),(0,m.kt)("p",null,"F\xfcr den Fall, dass der Roboter sich mit der Sollgeschwindigkeit von 2000 Impulsen pro Sekunde bewegen w\xfcrde, w\xfcrde sich f\xfcr den Fehler der Wert ",(0,m.kt)("inlineCode",{parentName:"p"},"fehler = 0")," ergeben. Dadurch ergibt sich auch  f\xfcr das Motorsignal der Wert ",(0,m.kt)("inlineCode",{parentName:"p"},"motorSignal = 0"),". Der Roboter w\xfcrde also stehen bleiben. "),(0,m.kt)("p",null,"Ein Proportional-Regler, der das Motorsignal einfach nur proportional zum Fehler bestimmt, ist somit zur Regelung der Geschwindigkeit ungeeignet."),(0,m.kt)("p",null,"Ebenfalls ist der ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/lineFollowerPD#differential-anteil"},"Differential-Regler")," ungeeignet, da er nur auf \xc4nderungen des Fehlers eingeht. Steht der Roboter einfach nur still, so \xe4ndert sich der Fehler nicht und es w\xfcrde sich f\xfcr das Motorsignal nur der Wert 0 ergeben."),(0,m.kt)("h2",{id:"integralregler"},"Integralregler"),(0,m.kt)("p",null,"Ein weiterer, bisher nicht besprochener Regler ist der Integralregler. Der Integralregler (I-Regler) \xe4ndert die Stellgr\xf6\xdfe nicht proportional zum Fehler wie der Proportionalregler oder in Abh\xe4ngigkeit von der \xc4nderung des Fehlers wie der Differentialregler, sondern basierend auf der Summe (oder dem Integral) der vorhergehenden Fehler. "),(0,m.kt)("p",null,"Aus mathematischer Sicht entspricht diese Summe der Fehler dem Integral der Fehler ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"e(t)")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")")))))," \xfcber die Zeit ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"t")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"t")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.61508em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"))))),"."),(0,m.kt)("div",{className:"math math-display"},(0,m.kt)("span",{parentName:"div",className:"katex-display"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mtable",{parentName:"semantics",rowspacing:"0.24999999999999992em",columnalign:"right left",columnspacing:"0em"},(0,m.kt)("mtr",{parentName:"mtable"},(0,m.kt)("mtd",{parentName:"mtr"},(0,m.kt)("mstyle",{parentName:"mtd",scriptlevel:"0",displaystyle:"true"},(0,m.kt)("mrow",{parentName:"mstyle"},(0,m.kt)("msubsup",{parentName:"mrow"},(0,m.kt)("mo",{parentName:"msubsup"},"\u222b"),(0,m.kt)("mn",{parentName:"msubsup"},"0"),(0,m.kt)("mi",{parentName:"msubsup"},"t")),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0d"),(0,m.kt)("mi",{parentName:"mrow"},"t")))),(0,m.kt)("mtd",{parentName:"mtr"},(0,m.kt)("mstyle",{parentName:"mtd",scriptlevel:"0",displaystyle:"true"},(0,m.kt)("mrow",{parentName:"mstyle"},(0,m.kt)("mrow",{parentName:"mrow"}),(0,m.kt)("mo",{parentName:"mrow"},"\u2248"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"0")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,m.kt)("mo",{parentName:"mrow"},"\u22c5"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"1")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,m.kt)("mo",{parentName:"mrow"},"\u22c5"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mo",{parentName:"mrow"},"\u22ef"))))),(0,m.kt)("mtr",{parentName:"mtable"},(0,m.kt)("mtd",{parentName:"mtr"},(0,m.kt)("mstyle",{parentName:"mtd",scriptlevel:"0",displaystyle:"true"},(0,m.kt)("mrow",{parentName:"mstyle"}))),(0,m.kt)("mtd",{parentName:"mtr"},(0,m.kt)("mstyle",{parentName:"mtd",scriptlevel:"0",displaystyle:"true"},(0,m.kt)("mrow",{parentName:"mstyle"},(0,m.kt)("mrow",{parentName:"mrow"}),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"0")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"1")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mo",{parentName:"mrow"},"\u22ef"),(0,m.kt)("mtext",{parentName:"mrow"},"\u2009"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t")))))),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\begin{aligned} \\int_{0}^{t} e(t) \\text{ d}t &\\approx e(t_0)\\ \\cdot \\Delta t + e(t_1)\\ \\cdot \\Delta t + \\cdots \\\\ &= ( e(t_0) + e(t_1) + \\cdots )\\ \\Delta t \\end{aligned}")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"4.255406em",verticalAlign:"-1.8777030000000003em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mtable"},(0,m.kt)("span",{parentName:"span",className:"col-align-r"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"2.3777029999999995em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-4.3777029999999995em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.543456em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mop"},(0,m.kt)("span",{parentName:"span",className:"mop op-symbol large-op",style:{marginRight:"0.44445em",position:"relative",top:"-0.0011249999999999316em"}},"\u222b"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.5434560000000002em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-1.7880500000000001em",marginLeft:"-0.44445em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"0")))),(0,m.kt)("span",{parentName:"span",style:{top:"-3.8129000000000004em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"t"))))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.9119499999999999em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.16666666666666666em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mord text"},(0,m.kt)("span",{parentName:"span",className:"mord"},"\xa0d")),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"))),(0,m.kt)("span",{parentName:"span",style:{top:"-2.3257529999999997em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.543456em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"}))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.8777030000000003em"}},(0,m.kt)("span",{parentName:"span"}))))),(0,m.kt)("span",{parentName:"span",className:"col-align-l"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"2.3777029999999995em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-4.3777029999999995em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.543456em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord"}),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"\u2248"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"0")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u22c5"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"1")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u22c5"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"minner"},"\u22ef"))),(0,m.kt)("span",{parentName:"span",style:{top:"-2.3257529999999997em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"3.543456em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord"}),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"0")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"1")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"minner"},"\u22ef"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.16666666666666666em"}}),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.8777030000000003em"}},(0,m.kt)("span",{parentName:"span"})))))))))))),(0,m.kt)("p",null,"F\xfcr den Pseudocode kann das Integral mit Hilfe der einzelnen Summen ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mi",{parentName:"msub"},"i")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"\u22c5"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"e(t_i)\\cdot \\Delta t")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u22c5"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t")))))," berechnet werden. Zu jedem neuen Zeitpunkt wird zu dem bereits berechneten Integral-Wert der neue Fehler ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mi",{parentName:"msub"},"i")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"\u22c5"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"e(t_i)\\cdot \\Delta t")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u22c5"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t")))))," hinzuaddiert. Dadurch wird aus dem  komplizierten Integral eine sehr einfache Addition:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"integral = integral + fehler * dTime // Aufsummieren der Fehler zum Integralanteil\n")),(0,m.kt)("p",null,"Der Integralanteil wird zu einer einfachen Summe, wenn bei ",(0,m.kt)("strong",{parentName:"p"},"konstanten Zeitintervallen")," die Multiplikation mit ",(0,m.kt)("inlineCode",{parentName:"p"},"dTime")," weggelassen wird:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"integral = integral + fehler         // Aufaddieren des Fehlers liefert den Integralanteil\n")),(0,m.kt)("p",null,"Zur Regelung der Motorgeschwindigkeit wird der Integral-Anteil, \xe4hnlich wie der Proportional-Anteil, mit einem Faktor ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"k"),(0,m.kt)("mi",{parentName:"msub"},"i"))),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"k_i")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.84444em",verticalAlign:"-0.15em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03148em"}},"k"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"}))))))))))," gewichtet. Damit ergibt sich der folgende ",(0,m.kt)("strong",{parentName:"p"},"Pseudocode f\xfcr den Integralregler")," :"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"// Pseudocode f\xfcr einen Integralregler f\xfcr die Geschwindigkeit //\nfehler      = 2000 - vRoboter        // Fehler: Abweichung der Geschwindigkeit vom Sollwert\nintegral    = integral + fehler      // Aufsummieren der Fehler\nmotorSignal = integral * ki          // Integralanteil mit Faktor ki wichten\nsetSpeeds(motorSignal,motorSignal)   // einstellen der Geschwindigkeit\n")),(0,m.kt)("h3",{id:"integralanteil-beschr\xe4nken---der-windup-effekt"},"Integralanteil beschr\xe4nken - Der Windup-Effekt"),(0,m.kt)("p",null,"Wenn bei mit einem Integralregler die Sollgr\xf6\xdfe, also hier die Geschwindigkeit, nicht oder nur sehr langsam erreicht werden kann, so f\xfchrt das zu einem stark ansteigenden Integralanteil. Dieser Effekt wird ",(0,m.kt)("em",{parentName:"p"},"Windup-Effket")," genannt und kann unter anderem zu einer verlangsamten Regelgeschwindigkeit des Reglers f\xfchren. "),(0,m.kt)("p",null,"Aus diesem Grund sollte der Integralanteil immer auf sinnvolle Werte begrenzt werden. Die Wahl der Grenzen f\xfcr den Integralanteil h\xe4ngt dabei auch vom gew\xe4hlten Faktor ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"k"),(0,m.kt)("mi",{parentName:"msub"},"i"))),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"k_i")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.84444em",verticalAlign:"-0.15em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03148em"}},"k"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"}))))))))))," ab."),(0,m.kt)("p",null,"F\xfcr den  Geschwindigkeitsregeler mit ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"k"),(0,m.kt)("mi",{parentName:"msub"},"i")),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"0.1")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"k_i=0.1")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.84444em",verticalAlign:"-0.15em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03148em"}},"k"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"0"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"1")))))," und maximalen Motorwerten von ",(0,m.kt)("inlineCode",{parentName:"p"},"400")," ist die Begrenzung des Integralanteils auf ",(0,m.kt)("inlineCode",{parentName:"p"},"-4000 ... +4000")," sinnvoll:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-arduino"},"integral = constrain(integral,-4000,4000);\n")),(0,m.kt)("h3",{id:"beispiel-geschwindigkeitsregelung"},"Beispiel Geschwindigkeitsregelung"),(0,m.kt)("p",null,"Ein Roboter soll mit einer ",(0,m.kt)("strong",{parentName:"p"},"Geschwindigkeit von 2000 Impulse pro Sekunde")," fahren. Hierf\xfcr wird ein Integralregler mit ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"k"),(0,m.kt)("mi",{parentName:"msub"},"i")),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"0.1")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"k_i= 0.1")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.84444em",verticalAlign:"-0.15em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03148em"}},"k"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"0"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"1")))))," verwendet. Der verwendete Regler hat keinen weiteren P-Anteil oder D-Anteil."),(0,m.kt)(w,{mdxType:"LineChart"}),(0,m.kt)("p",null,"In der Abbildung ist der Verlauf der  Werte f\xfcr die Geschwindigkeit, den Fehler, den Integralanteil und das Motorsignal dargestellt. Die einzelnen Gr\xf6\xdfen k\xf6nnen in der Legende ein- oder ausgeblendet werden. "),(0,m.kt)("p",null,"Um zu erkl\xe4ren, wie der Integralregler genau funktioniert, sind in der Tabelle die Werte f\xfcr die ersten 5 Zeitpunkte des Regler noch einmal aufgelistet."),(0,m.kt)("div",{className:"centerTab"},(0,m.kt)("table",null,(0,m.kt)("thead",{parentName:"table"},(0,m.kt)("tr",{parentName:"thead"},(0,m.kt)("th",{parentName:"tr",align:"left"},"#"),(0,m.kt)("th",{parentName:"tr",align:"center"},"Zeit ","[ms]"),(0,m.kt)("th",{parentName:"tr",align:"right"},"Geschwindigkeit"),(0,m.kt)("th",{parentName:"tr",align:"right"},"Fehler"),(0,m.kt)("th",{parentName:"tr",align:"right"},"Integralanteil"),(0,m.kt)("th",{parentName:"tr",align:"right"},"Motorsignal"))),(0,m.kt)("tbody",{parentName:"table"},(0,m.kt)("tr",{parentName:"tbody"},(0,m.kt)("td",{parentName:"tr",align:"left"},"1."),(0,m.kt)("td",{parentName:"tr",align:"center"},"10"),(0,m.kt)("td",{parentName:"tr",align:"right"},"0"),(0,m.kt)("td",{parentName:"tr",align:"right"},"2000"),(0,m.kt)("td",{parentName:"tr",align:"right"},"2000"),(0,m.kt)("td",{parentName:"tr",align:"right"},"200")),(0,m.kt)("tr",{parentName:"tbody"},(0,m.kt)("td",{parentName:"tr",align:"left"},"2."),(0,m.kt)("td",{parentName:"tr",align:"center"},"20"),(0,m.kt)("td",{parentName:"tr",align:"right"},"349"),(0,m.kt)("td",{parentName:"tr",align:"right"},"1651"),(0,m.kt)("td",{parentName:"tr",align:"right"},"3651"),(0,m.kt)("td",{parentName:"tr",align:"right"},"365")),(0,m.kt)("tr",{parentName:"tbody"},(0,m.kt)("td",{parentName:"tr",align:"left"},"3."),(0,m.kt)("td",{parentName:"tr",align:"center"},"30"),(0,m.kt)("td",{parentName:"tr",align:"right"},"1150"),(0,m.kt)("td",{parentName:"tr",align:"right"},"850"),(0,m.kt)("td",{parentName:"tr",align:"right"},"4000"),(0,m.kt)("td",{parentName:"tr",align:"right"},"400")),(0,m.kt)("tr",{parentName:"tbody"},(0,m.kt)("td",{parentName:"tr",align:"left"},"4."),(0,m.kt)("td",{parentName:"tr",align:"center"},"40"),(0,m.kt)("td",{parentName:"tr",align:"right"},"1750"),(0,m.kt)("td",{parentName:"tr",align:"right"},"250"),(0,m.kt)("td",{parentName:"tr",align:"right"},"4000"),(0,m.kt)("td",{parentName:"tr",align:"right"},"400")),(0,m.kt)("tr",{parentName:"tbody"},(0,m.kt)("td",{parentName:"tr",align:"left"},"5."),(0,m.kt)("td",{parentName:"tr",align:"center"},"50"),(0,m.kt)("td",{parentName:"tr",align:"right"},"2250"),(0,m.kt)("td",{parentName:"tr",align:"right"},"-250"),(0,m.kt)("td",{parentName:"tr",align:"right"},"3750"),(0,m.kt)("td",{parentName:"tr",align:"right"},"375"))))),(0,m.kt)("p",null,"Bei der ",(0,m.kt)("strong",{parentName:"p"},"1. Messung")," ist die Geschwindigkeit des Roboters noch ",(0,m.kt)("inlineCode",{parentName:"p"},"vRoboter = 0"),". Mit der angenommenen Sollgeschwindigkeit von ",(0,m.kt)("inlineCode",{parentName:"p"},"2000")," ergibt sich ein Fehlerwert von ",(0,m.kt)("inlineCode",{parentName:"p"},"fehler = 2000"),". Da der Integralanteil anfangs ",(0,m.kt)("inlineCode",{parentName:"p"},"0")," war, ist nach der 1. Messung der Integralanteil ",(0,m.kt)("inlineCode",{parentName:"p"},"integral = 2000")," und f\xfcr das Motorsignal ergibt sich mit ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"k"),(0,m.kt)("mi",{parentName:"msub"},"i")),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"0.1")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"k_i=0.1")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.84444em",verticalAlign:"-0.15em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03148em"}},"k"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.31166399999999994em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"i")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"0"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"1")))))," der Wert ",(0,m.kt)("inlineCode",{parentName:"p"},"motorSignal = 200"),". Der Roboter f\xe4ngt an, sich langsam zu bewegen."),(0,m.kt)("p",null,"Bei der ",(0,m.kt)("strong",{parentName:"p"},"2.Messung")," erkennt der Regler, dass der Roboter bereits eine Geschwindigkeit von ",(0,m.kt)("inlineCode",{parentName:"p"},"vRoboter = 349")," hat und ermittelt mit ",(0,m.kt)("inlineCode",{parentName:"p"},"fehler = 1651")," den neuen Integralanteil: "),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-txt"},"integral =  2000 + 1651 = 3651\n")),(0,m.kt)("p",null,"Dies f\xfchrt zu einem ansteigenden Motorwert von ",(0,m.kt)("inlineCode",{parentName:"p"},"motorSignal = 365"),".  "),(0,m.kt)("p",null,"Bei der ",(0,m.kt)("strong",{parentName:"p"},"3. Messung")," ermittelt der Regler bereits eine Geschwindigkeit von ",(0,m.kt)("inlineCode",{parentName:"p"},"vRoboter = 1150")," und damit einen Fehler von ",(0,m.kt)("inlineCode",{parentName:"p"},"fehler = 850"),". W\xfcrde der Fehler einfach zu dem alten Integralanteil hinzuaddiert werden, w\xfcrde sich ein Wert von ",(0,m.kt)("inlineCode",{parentName:"p"},"integral = 4501")," ergeben, was zu ",(0,m.kt)("inlineCode",{parentName:"p"},"motorSignal = 450")," f\xfchren w\xfcrde. Da der Integralanteil aber auf einen Maximalwert von ",(0,m.kt)("inlineCode",{parentName:"p"},"+4000")," begrenzt sein soll, bestimmt der Regler nach der 3. Messung den Wert ",(0,m.kt)("inlineCode",{parentName:"p"},"integral = 4000"),". (",(0,m.kt)("em",{parentName:"p"},"Bei dem Roboter Zumo 32u4 ist der maximale Motorwert ",(0,m.kt)("inlineCode",{parentName:"em"},"400")),")"),(0,m.kt)("p",null,"Bei der darauffolgenden ",(0,m.kt)("strong",{parentName:"p"},"4. Messung")," hat sich der Roboter der Sollgeschwindigkeit bereits bis auf ",(0,m.kt)("inlineCode",{parentName:"p"},"fehler = 250")," gen\xe4hert. Da der Integralanteil begrenzt wird, bleibt dieser trotzdem auf dem Wert ",(0,m.kt)("inlineCode",{parentName:"p"},"integral = 4000"),". Das Motorsignal bleibt ebenfalls gleich (",(0,m.kt)("inlineCode",{parentName:"p"},"motorSignal = 400"),")."),(0,m.kt)("p",null,"Im n\xe4chsten Schritt, der ",(0,m.kt)("strong",{parentName:"p"},"5. Messung"),", \xfcberschreitet der Roboter erstmals die Sollgeschwindigkeit (",(0,m.kt)("inlineCode",{parentName:"p"},"vRoboter = 2250"),") und der Fehler nimmt einen negativen Wert an ",(0,m.kt)("inlineCode",{parentName:"p"},"fehler = -250"),". Durch den negativen Fehler wird nun auch der Integralanteil reduziert (",(0,m.kt)("inlineCode",{parentName:"p"},"integral = 3750"),") und das Motorsignal wird auf ",(0,m.kt)("inlineCode",{parentName:"p"},"motorSignal = 375")," verringert. Dadurch wird der Roboter wieder ein wenig langsamer."),(0,m.kt)("p",null,"In den folgenden Schritten pendelt die Geschwindigkeit noch etwas um den geforderten Sollwert herum, n\xe4hert sich diesem aber letztlich immer mehr an."),(0,m.kt)("details",{className:"ueben"}," ",(0,m.kt)("summary",null,"Aufgaben"),(0,m.kt)("ol",null,(0,m.kt)("li",{parentName:"ol"},"Erl\xe4utern Sie, warum f\xfcr den Geschwindkeitsregler eine Begrenzung des Integralanteils auf ",(0,m.kt)("inlineCode",{parentName:"li"},"-4000")," bis ",(0,m.kt)("inlineCode",{parentName:"li"},"+4000")," sinvoll ist. Wie w\xfcrde sich der Regler in dem Beispiel verhalten, wenn der Integralanteil nicht beschr\xe4nkt w\xe4re?"))),(0,m.kt)("h3",{id:"vollst\xe4ndiger-pseudocode-i-regler"},"Vollst\xe4ndiger Pseudocode I-Regler"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"vSoll = 2000                            // Sollwert der Geschwindigkeit in Impulsen pro Sekunde\nki        = 0.1                         // Integral-Faktor\nintegral  = 0                           // Startwert f\xfcr Integral-Anteil\n\n\nwiederhole\n    vRoboter     = bestimmeV()          // ermitteln der aktuellen Geschwindigkeit mit den Motorencodern\n    fehler       = vSoll - vRoboter     // Fehlerwert, Regeldifferenz\n    integral     = integral + fehler    // Integral-Anteil \n    integral     = begrenze(integral)   // Integralanteil begrenzen                                                   \n    motorSignal  = integral * ki        // Motorsignal bestimmen\n                              \n    setMotors(motorSignal,motorSignal)  // Aktualisieren der Motordrehzahlen\n")),(0,m.kt)("details",{className:"ueben"}," ",(0,m.kt)("summary",null,"Aufgaben"),(0,m.kt)("ol",null,(0,m.kt)("li",{parentName:"ol"},(0,m.kt)("p",{parentName:"li"},"Untersuchen Sie, welchen Einfluss die Begrenzung des Integralanteils auf das Verhalten eines Integralreglers f\xfcr die Geschwindigkeit hat. Schreiben Sie dazu einen Integral-Regler, welcher die Geschwindigkeit des Roboters regelt.",(0,m.kt)("br",{parentName:"p"}),"\n","Geben Sie die mit auf seriellen Monitor den Verlauf der Geschwindigkeit mit und ohne Begrenzung des Integralanteils aus und stellen Sie diese mit einem geeigneten Programm als Liniendiagramm dar.",(0,m.kt)("br",{parentName:"p"}),"\n","Analysieren Sie das jeweilige Verhalten.")),(0,m.kt)("li",{parentName:"ol"},(0,m.kt)("p",{parentName:"li"},"Erweitern Sie die Geschwindigkeitsregelung (mit Begrenzung des Integralanteils) aus der letzten Aufgabe um folgende Eigenschaften:"),(0,m.kt)("ol",{parentName:"li"},(0,m.kt)("li",{parentName:"ol"},"Die Sollgeschwindigkeit soll mit den Tastern A und B eingestellt werden k\xf6nnen."),(0,m.kt)("li",{parentName:"ol"},"Auf dem Display wird der aktuelle Wert f\xfcr das Motorsignal (Wert f\xfcr die Funktion ",(0,m.kt)("inlineCode",{parentName:"li"},"setSpeeds()"),") angezeigt."),(0,m.kt)("li",{parentName:"ol"},"Der Roboter soll erkennen, wenn er gegen ein Hindernis f\xe4hrt und es mit der roten LED anzeigen."),(0,m.kt)("li",{parentName:"ol"},"Der Roboter folgt einer Linie mit der vorgegeben Geschwindigkeit."))))))}z.isMDXComponent=!0}}]);