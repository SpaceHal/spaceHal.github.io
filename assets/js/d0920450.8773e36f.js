"use strict";(self.webpackChunkspace_hal_2=self.webpackChunkspace_hal_2||[]).push([[6535],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return p}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),d=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=d(e.components);return r.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=d(t),p=i,g=c["".concat(s,".").concat(p)]||c[p]||u[p]||a;return t?r.createElement(g,o(o({ref:n},m),{},{components:t})):r.createElement(g,o({ref:n},m))}));function p(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=c;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var d=2;d<a;d++)o[d]=t[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},6309:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o={title:"3-Stufen-Regler f\xfcr einen Kantenfolger",sidebar_label:"3-Stufen-Regler (Kantenfolger)",description:"Mit einem einfachen Algorithmus einen Arduino-Roboter programmieren, damit er einer Linie folgt.",custom_edit_url:null,keywords:["Arduino","Unterricht","Schule","Linenfolger","Kantenfolger","Robot","Roboter","Robotik","Pseudocode"]},l=void 0,s={unversionedId:"robotik/edgeFollower",id:"robotik/edgeFollower",isDocsHomePage:!1,title:"3-Stufen-Regler f\xfcr einen Kantenfolger",description:"Mit einem einfachen Algorithmus einen Arduino-Roboter programmieren, damit er einer Linie folgt.",source:"@site/docs/robotik/edgeFollower.md",sourceDirName:"robotik",slug:"/robotik/edgeFollower",permalink:"/docs/robotik/edgeFollower",editUrl:null,version:"current",lastUpdatedAt:1631966711,formattedLastUpdatedAt:"9/18/2021",frontMatter:{title:"3-Stufen-Regler f\xfcr einen Kantenfolger",sidebar_label:"3-Stufen-Regler (Kantenfolger)",description:"Mit einem einfachen Algorithmus einen Arduino-Roboter programmieren, damit er einer Linie folgt.",custom_edit_url:null,keywords:["Arduino","Unterricht","Schule","Linenfolger","Kantenfolger","Robot","Roboter","Robotik","Pseudocode"]},sidebar:"sideBarRobotik",previous:{title:"Erste Schritte",permalink:"/docs/robotik/beginning"},next:{title:"P-Regler (Kantenfolger)",permalink:"/docs/robotik/edge_P_Control"}},d=[{value:"3-Stufen-Algorithmus",id:"3-stufen-algorithmus",children:[]},{value:"Kalibrierung",id:"kalibrierung",children:[{value:"Pseudocode zum Kalibrieren",id:"pseudocode-zum-kalibrieren",children:[]},{value:"Aufgaben (Kantenfolger)",id:"aufgaben-kantenfolger",children:[]}]}],m={toc:d};function u(e){var n=e.components,t=(0,i.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Der einfachste Linienfolger ist, wenn man es genau nimmt, gar kein Linienfolger, sondern ein ",(0,a.kt)("strong",{parentName:"p"},"Kantenfolger"),". Besitzt der Roboter ",(0,a.kt)("strong",{parentName:"p"},"einen")," Bodensensor zum Unterscheiden von hellen und dunklen Untergr\xfcnden, so kann damit bei einem gen\xfcgend breiten Strich die Strichkante detektiert und auch gefolgt werden. "),(0,a.kt)("img",{src:"/img/robotik/BotOnLine.png",alt:"Line following robot",width:"600px",class:"center"}),(0,a.kt)("p",null,"Das Grundprinzip des Kantenfolgers (Linienfolger mit nur einem Sensor) ist in der Abbildung dargestellt. Der IR-Sensor detektiert das vom Untergrund reflektierte Licht. In der Abbildung sind beispielhaft Zahlenwerte in rot angegeben. Bei einem wei\xdfen Untergrund wird viel und bei einem dunklen Untergrund wenig Licht detektiert."),(0,a.kt)("h2",{id:"3-stufen-algorithmus"},"3-Stufen-Algorithmus"),(0,a.kt)("p",null,"F\xfcr eine einfache Motorregelung zum Folgen der Linie, k\xf6nnen drei verschiedene F\xe4lle unterschieden werden, welche mit einem Algorithmus \xfcberpr\xfcft werden m\xfcssen:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fall A"),"  Der Sensor ist im Wesentlichen neben der Linie und detektiert viel IR-Licht. Der Roboter sollte mehr nach links zur Linie fahren."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fall B"),"  Der Sensor ist haupts\xe4chlich \xfcber der Linie und detektiert wenig IR-Licht. Der Roboter sollte mehr nach rechts zur Linienkante fahren."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fall C"),"  Der Sensor befindet sich genau zur H\xe4lfte \xfcber der Linie und ist somit genau \xfcber der Kante. Der Roboter kann einfach geradeaus fahren.")),(0,a.kt)("p",null,"Ein ",(0,a.kt)("strong",{parentName:"p"},"Algorithmus zur Steuerung")," des Roboters (ohne Fall C) k\xf6nnte folgenderma\xdfen aussehen:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"wertKante = 600                        // Wert muss angepasst werden\n\nwiederhole dauerhaft\n    wertIr = messenIrSensor()\n    wenn: wertIr > wertKante           // Fall A\n        fahrenLinks() \n        \n    sonst wenn: wertIr <= wertKante    // Fall B\n        fahrenRechts() \n")),(0,a.kt)("h2",{id:"kalibrierung"},"Kalibrierung"),(0,a.kt)("p",null,"Bleibt die Frage, wie der Sensorwerte f\xfcr die Linienkante ermittelt wird, der Roboter also kalibriert werden kann. Der einfachste, wenn auch nicht genaueste Weg ist, z.B. mit Hilfe der seriellen Schnittstelle den Maximalwert und den Minimalwert des reflektieren IR Lichts f\xfcr die Linie bzw. die Fl\xe4che daneben zu bestimmen. Der Mittelwert aus beiden Werten sollte der Linienkante entsprechen und kann dann als Konstante in das Programm eingef\xfcgt werden."),(0,a.kt)("h3",{id:"pseudocode-zum-kalibrieren"},"Pseudocode zum Kalibrieren"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"minWert = 1023                  // initialisieren der minimalen und maximalen Werte des Sensor\nmaxWert = 0                     // werden sp\xe4ter mit den richtigen Werten \xfcberschrieben\n\ndreheLinks()                    // Motoren zum Linksdrehen aktivieren\nwiederhole 100 mal\n    wertIr = messenIrSensor()   // reflektiertes IR Licht messen\n    wenn (wertIr < minWert)     // Ist der aktuelle IR-Wert kleiner, als der bisher kleinste IR-Wert?\n        minWert = wertIr        // alten minWert mit neuem kleinsten IR Wert \xfcberschreiben\n    wenn (wertIr > maxWert)     // Ist der aktuelle IR-Wert gr\xf6\xdfer, als der bisher gr\xf6\xdfte IR-Wert?\n        maxWert = wertIr        // alten maxWert mit neuem gr\xf6\xdften IR Wert \xfcberschreiben\n\ndreheRechts()                   // zur\xfcckdrehen und weiter messen\nwiederhole 200 mal  \n    wertIr = messenIrSensor()\n    wenn (wertIr < minWert)\n        minWert = wertIr\n    wenn (wertIr > maxWert)\n        maxWert = wertIr\n")),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"}," Der Kanten-Algorithmus funktioniert am besten, wenn der Roboter langsam f\xe4hrt!"))),(0,a.kt)("h3",{id:"aufgaben-kantenfolger"},"Aufgaben (Kantenfolger)"),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),(0,a.kt)("strong",{parentName:"h5"},"\xdcben"))),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("ol",{parentName:"div"},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Programmieren Sie den ",(0,a.kt)("strong",{parentName:"p"},"einfachen Kanten-Algorithmus"),". Passen Sie die Werte der Linienkante an und schreiben Sie geeignete Methoden ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreLinks()")," und ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreRechts()"),". Welchen Einfluss hat der minimale Kurvenradius der zu folgenden Linie auf die Funktionen ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreLinks()")," und ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreRechts()"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Schreiben Sie eine ",(0,a.kt)("strong",{parentName:"p"},"Kalibrierungsfunktion"),", welche (auf Knopfdruck) den Sensorwert f\xfcr die Linienkante automatisch ermittelt. Lassen Sie hierf\xfcr den Roboter in beide Richtungen automatisch \xfcber die Linie drehen und den Maximal- und Minimalwert des reflektierten Lichtes bestimmen. Bestimmen Sie den Sollwert der Linienkante aus dem ermittelten Maximal- und Minimalwert.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Erweitern")," Sie den Algorithmus ",(0,a.kt)("strong",{parentName:"p"},"um den Fall C"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreGeradeaus()"),"."),(0,a.kt)("p",{parentName:"li"},"*Hinweis: Legen Sie einen geeigneten Wertebereich um den Sensorwert der Linienkante fest, bei dem der Roboter geradeaus fahren soll. Nutzen Sie hierf\xfcr die Variable  ",(0,a.kt)("inlineCode",{parentName:"p"},"wertToleranz"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Schreiben Sie ein neues Programm, welches den Kanten-Algorithmus um ",(0,a.kt)("strong",{parentName:"p"},"zwei weitere Stufen (halblinks, halbrechts)")," erweitert, so dass Sie insgesamt 5 F\xe4lle unterscheiden k\xf6nnen. Geben Sie f\xfcr jeden Fall einen ",(0,a.kt)("strong",{parentName:"p"},"Toleranzbereich")," und die notwendige Fahrtrichtung an. Die Bereich ollten relativ zum Minimal- bzw. Maximalwert des IR-Sensors bestimmt werden: "),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"0% - 20%   : links"),(0,a.kt)("li",{parentName:"ul"},"21% - 40%  : halblinks"),(0,a.kt)("li",{parentName:"ul"},"41% - 60%  : geradeaus"),(0,a.kt)("li",{parentName:"ul"},"61% - 80%  : halbrechts"),(0,a.kt)("li",{parentName:"ul"},"81% - 100% : rechts")),(0,a.kt)("p",{parentName:"li"},"Geben Sie f\xfcr die Bereiche keine Werte vor, sondern berechnen Sie diese aus den automatischen Kalibrierungswerten des Sensors (siehe Aufgabe 2). "))))))}u.isMDXComponent=!0}}]);