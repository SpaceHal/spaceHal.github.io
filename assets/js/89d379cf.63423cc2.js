"use strict";(self.webpackChunkspace_hal=self.webpackChunkspace_hal||[]).push([[221],{3905:(e,n,a)=>{a.d(n,{Zo:()=>o,kt:()=>c});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=t.createContext({}),p=function(e){var n=t.useContext(m),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},o=function(e){var n=p(e.components);return t.createElement(m.Provider,{value:n},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,m=e.parentName,o=s(e,["components","mdxType","originalType","parentName"]),d=p(a),u=r,c=d["".concat(m,".").concat(u)]||d[u]||g[u]||i;return a?t.createElement(c,l(l({ref:n},o),{},{components:a})):t.createElement(c,l({ref:n},o))}));function c(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var s={};for(var m in n)hasOwnProperty.call(n,m)&&(s[m]=n[m]);s.originalType=e,s[d]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=a[p];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2195:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var t=a(7462),r=(a(7294),a(3905));const i={title:"Analoge Werte auslesen",sidebar_label:"Analoger Eingang",description:"Einlesen analoger Werte mit dem Arduino. Der Analog-Digital-Wandler beim Arduino.",custom_edit_url:null,keywords:["Arduino","Analoger Eingang","Potentiometer","analogRead()","analogRead","Analogwerte auslesen","analoge Werte einlesen","serieller Plotter"]},l=void 0,s={unversionedId:"arduino/analogInput",id:"arduino/analogInput",title:"Analoge Werte auslesen",description:"Einlesen analoger Werte mit dem Arduino. Der Analog-Digital-Wandler beim Arduino.",source:"@site/docs/arduino/analogInput.md",sourceDirName:"arduino",slug:"/arduino/analogInput",permalink:"/docs/arduino/analogInput",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{title:"Analoge Werte auslesen",sidebar_label:"Analoger Eingang",description:"Einlesen analoger Werte mit dem Arduino. Der Analog-Digital-Wandler beim Arduino.",custom_edit_url:null,keywords:["Arduino","Analoger Eingang","Potentiometer","analogRead()","analogRead","Analogwerte auslesen","analoge Werte einlesen","serieller Plotter"]},sidebar:"mySidebar",previous:{title:"PWM Signale",permalink:"/docs/arduino/pwm"},next:{title:"Animationseffekte",permalink:"/docs/arduino/lightAnimation"}},m={},p=[{value:"Schaltung mit Potentiometer",id:"schaltung-mit-potentiometer",level:2},{value:"<code>analogRead()</code>",id:"analogread",level:2},{value:"Beispiel",id:"beispiel",level:3},{value:"Erl\xe4uterungen",id:"erl\xe4uterungen",level:4},{value:"Die <code>map()</code> - Funktion",id:"die-map---funktion",level:2},{value:"Beispiel",id:"beispiel-1",level:3},{value:"Serieller Plotter",id:"serieller-plotter",level:2},{value:"Links",id:"links",level:2}],o={toc:p},d="wrapper";function g(e){let{components:n,...a}=e;return(0,r.kt)(d,(0,t.Z)({},o,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Neben digitalen Eing\xe4ngen und PWM Ausg\xe4ngen hat der Arduino auch einige analoge Eing\xe4nge, welche mit einem ",(0,r.kt)("strong",{parentName:"p"},"Analog-Digital-Wandler")," (",(0,r.kt)("em",{parentName:"p"},"analog-digital converter: ADC"),") analoge Spannungswerte zwischen 0 und 5 Volt in diskrete Zahlenwerte umwandelt. Analoge Eing\xe4nge werden beim Arduino mit einem A bezeichnet (also ",(0,r.kt)("inlineCode",{parentName:"p"},"A0"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"A1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"A2"),", ...)"),(0,r.kt)("p",null,"Der Arduino UNO verwendet intern einen 10 Bit Analog-Digital-Wandler.  Dadurch wird eine beliebige analoge Eingangspannung  in einen ",(0,r.kt)("strong",{parentName:"p"},"diskreten Zahlenwert")," zwischen ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mn",{parentName:"mrow"},"0")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"0")))))," und ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mn",{parentName:"mrow"},"1023"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("msup",{parentName:"mrow"},(0,r.kt)("mn",{parentName:"msup"},"2"),(0,r.kt)("mn",{parentName:"msup"},"10")),(0,r.kt)("mo",{parentName:"mrow"},"\u2212"),(0,r.kt)("mn",{parentName:"mrow"},"1")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"1023 = 2^{10}-1")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"1023"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8974em",verticalAlign:"-0.0833em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},(0,r.kt)("span",{parentName:"span",className:"mord"},"2"),(0,r.kt)("span",{parentName:"span",className:"msupsub"},(0,r.kt)("span",{parentName:"span",className:"vlist-t"},(0,r.kt)("span",{parentName:"span",className:"vlist-r"},(0,r.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,r.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,r.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,r.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,r.kt)("span",{parentName:"span",className:"mord mtight"},(0,r.kt)("span",{parentName:"span",className:"mord mtight"},"10"))))))))),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"1")))))," umgewandelt."),(0,r.kt)("p",null,"Die ",(0,r.kt)("strong",{parentName:"p"},"Abtastrate")," des Arduino, also die Anzahl der analogen zu digitalen Wandlungen, liegt bei ca. 10.000 pro Sekunde."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Die Eingangsspannung an den Analogeing\xe4ngen des Arduino darf 5V nicht \xfcberschreiten.")),(0,r.kt)("h2",{id:"schaltung-mit-potentiometer"},"Schaltung mit Potentiometer"),(0,r.kt)("p",null," Wird ein ",(0,r.kt)("a",{parentName:"p",href:"https://de.wikipedia.org/wiki/Potentiometer"},"Potentiometer")," wie unten abgebildet zwischen 0 V und 5 V angeschlossen, so kann der dritte Anschluss mit dem ver\xe4nderlichen Widerstandswert an einen analogen Eingang (Pin ",(0,r.kt)("inlineCode",{parentName:"p"},"A0"),") gef\xfchrt werden. Je nach Stellung des Potentiometers ergibt sich am Analogeingang eine andere Teilspannung. "),(0,r.kt)("img",{src:"/img/arduino/breadAnalogInput.svg",alt:"drawing",width:"520pt",className:"center"}),(0,r.kt)("h2",{id:"analogread"},(0,r.kt)("inlineCode",{parentName:"h2"},"analogRead()")),(0,r.kt)("p",null,"Zum Auslesen der am Analogeingang angelegten Spannung kann der Befehl ",(0,r.kt)("inlineCode",{parentName:"p"},"analogRead()")," verwendet werden."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// liest einen Analogwert am Pin A0, R\xfcckgabewert ist zwischen 0 und 1023\nint analogWert = analogRead(A0); \n")),(0,r.kt)("p",null,"Der Paramter der Funktion gibt den verwendeten Pin an (hier ",(0,r.kt)("inlineCode",{parentName:"p"},"A0"),") und der R\xfcckgabewert (",(0,r.kt)("inlineCode",{parentName:"p"},"analogWert"),") ist der umgewandelte Spannungswert als Ganze Zahl zwischen 0 und 1023. "),(0,r.kt)("h3",{id:"beispiel"},"Beispiel"),(0,r.kt)("p",null,"Mit dem abgebildeten Programmcode kann der analoge Spannungswert des Potentiometers am Arduino-Pin ",(0,r.kt)("inlineCode",{parentName:"p"},"A0")," eingelesen werden. Anschlie\xdfend wird die digitalisierte Spannung als Wert zwischen 0 und 1023 auf dem seriellen Monitor ausgegeben. Verwenden Sie den ",(0,r.kt)("strong",{parentName:"p"},"seriellen Plotter")," (",(0,r.kt)("em",{parentName:"p"},"Werkzeuge>serieller Plotter"),") um sich die eingelesenen Werte als Liniendiagramm anzeigen zu lassen."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-arduino"},"#define pinPoti A0\n\nvoid setup(){\n  Serial.begin(9600);\n  //highlight-next-line\n  pinMode(pinPoti, INPUT);            // als Eingang konfigurieren\n}\n\nvoid loop()\n{\n  //highlight-next-line\n  int messWert = analogRead(pinPoti); // als analogen Wert einlesen\n  Serial.println(messWert);           // Ausgabe auf seriellem Monitor \n}\n")),(0,r.kt)("h4",{id:"erl\xe4uterungen"},"Erl\xe4uterungen"),(0,r.kt)("p",null,"Bei dem Program wird zuerst der entsprechende Pin ",(0,r.kt)("inlineCode",{parentName:"p"},"pinPoti")," als Eingang definiert "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-arduino"},"pinMode(pinPoti, INPUT)\n")),(0,r.kt)("p",null,"um anschlie\xdfend mit dem Befehl"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-arduino"},"int messWert = analogRead(pinPoti);\n")),(0,r.kt)("p",null,"den Pin ",(0,r.kt)("inlineCode",{parentName:"p"},"pinPoti")," auszulesen. "),(0,r.kt)("h2",{id:"die-map---funktion"},"Die ",(0,r.kt)("inlineCode",{parentName:"h2"},"map()")," - Funktion"),(0,r.kt)("p",null,"Ein h\xe4ufiges Problem im Zusammenhang mit dem Einlesen analoger Werte ist das Umrechnen dieser Werte in einen anderen Wertebereich. Als Beispiel soll mit einem Potentiometer eine ",(0,r.kt)("a",{parentName:"p",href:"/docs/arduino/pwm#dimmen-einer-led"},"LED gedimmt")," werden. "),(0,r.kt)("p",null,"Das zum Dimmen der LED notwendige PWM-Signal wird mit der ",(0,r.kt)("inlineCode",{parentName:"p"},"analogWrite()")," Funktion erzeugt. Als Parameter muss der Funktion das gew\xfcnschte Tastverh\xe4ltnis im Bereich ",(0,r.kt)("inlineCode",{parentName:"p"},"0 ... 255")," angegeben werden. Da die Funktion ",(0,r.kt)("inlineCode",{parentName:"p"},"analogRead()")," jedoch digitaliserte Werte im Bereich ",(0,r.kt)("inlineCode",{parentName:"p"},"0 ... 1024")," ausgibt, muss der Zahlenbereich von ",(0,r.kt)("inlineCode",{parentName:"p"},"analogRead()")," an den Zahlenbereich von ",(0,r.kt)("inlineCode",{parentName:"p"},"analogWrite()")," angepasst werden. "),(0,r.kt)("p",null,"Daf\xfcr eignet sich die Funktion ",(0,r.kt)("a",{parentName:"p",href:"https://www.arduino.cc/reference/de/language/functions/math/map/"},(0,r.kt)("inlineCode",{parentName:"a"},"map()"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// Umwandeln des Wertebereichs: [0,1023] -> [0,255]\nint pwmWert = map(messWert, 0, 1023, 0, 255);   \n")),(0,r.kt)("p",null,"Die Funktion ",(0,r.kt)("inlineCode",{parentName:"p"},"map()")," ben\xf6tigt 5 Paramter:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Der 1. Parameter (",(0,r.kt)("inlineCode",{parentName:"li"},"messWert"),") ist die Variable, dessen Zahlenwerte umgewandelt werden sollen."),(0,r.kt)("li",{parentName:"ul"},"Die 2. und 3. Paramter (",(0,r.kt)("inlineCode",{parentName:"li"},"0")," und ",(0,r.kt)("inlineCode",{parentName:"li"},"1023"),") geben den ",(0,r.kt)("strong",{parentName:"li"},"urspr\xfcnglichen Zahlenbereich")," an."),(0,r.kt)("li",{parentName:"ul"},"Die 4. und 5. Paramter (",(0,r.kt)("inlineCode",{parentName:"li"},"0")," und ",(0,r.kt)("inlineCode",{parentName:"li"},"255"),") geben den ",(0,r.kt)("strong",{parentName:"li"},"neuen Zahlenbereich")," an.")),(0,r.kt)("p",null,"Der R\xfcckgabewert (",(0,r.kt)("inlineCode",{parentName:"p"},"pwmWert"),") ist der umgewandelte Wert in dem neuen Zahlenbereich."),(0,r.kt)("h3",{id:"beispiel-1"},"Beispiel"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'#define LED  9                                     // LED am PWM Pin (~9)\n#define pinPoti A0                                 // Potentiometer\n\nvoid setup()\n{\n  Serial.begin(9600);\n  pinMode(LED, OUTPUT);\n  pinMode(pinPoti, INPUT);                      \n}\n\nvoid loop()\n{\n  int messWert = analogRead(pinPoti);          // Analogwert einlesen\n  int pwmWert = map(messWert, 0, 1023, 0, 255);// Werte \xe4ndern [0,1023] -> [0,255]\n\n  analogWrite(LED, pwmWert);                   // PWM Signal f\xfcr die LED\n\n  Serial.print(messWert);                      // serielle Ausgabe\n  Serial.print(" -> ");\n  Serial.println(pwmWert);\n}\n')),(0,r.kt)("details",{className:"ueben"}," ",(0,r.kt)("summary",null,"Aufgaben"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Bauen Sie einen ",(0,r.kt)("strong",{parentName:"p"},"Spannungsteiler")," aus zwei Widerst\xe4nden (z.B. 220 \u03a9 und 500 \u03a9) auf. Berechnen Sie die jeweiligen Teilspannungen, wenn die Gesamtspannung 5 Volt betr\xe4gt. Bestimmen Sie anschlie\xdfend sowohl ",(0,r.kt)("strong",{parentName:"p"},"rechnerisch")," als auch ",(0,r.kt)("strong",{parentName:"p"},"messtechnisch")," mit dem Arduino, den digitalen Wert des Analogeingangs. Analysieren Sie m\xf6gliche ",(0,r.kt)("strong",{parentName:"p"},"Abweichungen")," des Messwertes von dem theoretischen Ergebnis.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Bauen Sie eine ",(0,r.kt)("strong",{parentName:"p"},"Balkenanzeige"),", bestehend aus 5 bis 7 LEDs und einem Potentiometer, auf. Programmieren Sie Ihre Schaltung so, dass proportional zur Stellung des Potentiometers die Anzahl der leuchtenden LEDs variiert. Nutzen Sie die ",(0,r.kt)("a",{parentName:"p",href:"/docs/arduino/loop#die-for-schleife"},"\xb4for\xb4-Schleife")," und die ",(0,r.kt)("inlineCode",{parentName:"p"},"map()"),"-Funktion.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Erweitern Sie das Programm zur letzten Aufgabe. Anstatt die LEDs einzeln nur an- oder auszuschalten, sollen die LEDs nun einzeln entsprechend der Stellung des Potentiometers an- oder ausgedimmt werden.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Werte, die \xfcber einen analogen Eingang eingelesen wurden, sollen auf dem ",(0,r.kt)("strong",{parentName:"p"},"seriellen Monitor")," mit einer Art ",(0,r.kt)("em",{parentName:"p"},"Balkenanzeige")," dargestellt werden. Je gr\xf6\xdfer der eingelesen Wert, desto mehr ",(0,r.kt)("inlineCode",{parentName:"p"},">")," werden dargestellt. Die ",(0,r.kt)("em",{parentName:"p"},"Balkenanzeige")," soll 25 Balken haben und das Maximum wird durch ",(0,r.kt)("inlineCode",{parentName:"p"},"|")," angezeigt.\nMit einem angeschlossenen Potentiometer soll die ",(0,r.kt)("em",{parentName:"p"},"Balkenanzeige")," gesteuert werden."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-text"},"[Serieller Monitor]\n\n>>>>>....................|\n>>>>>>>>>>>>>>...........|\n>>>>>>>>>>>>>>>>>>>>>>...|\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"F\xfcgen Sie zur ",(0,r.kt)("em",{parentName:"p"},"Balkenanzeige")," noch eine numerisch Angabe des Messwertes in Prozent hinzu."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-text"}," [Serieller Monitor]\n\n >>>>.....................[13%]\n >>>>>>>>.................[32%]\n >>>>>>>>>>>>>>>>.........[62%]\n >>>>>>>>>>>>>>>>>>>>>>...[89%]\n"))))),(0,r.kt)("h2",{id:"serieller-plotter"},"Serieller Plotter"),(0,r.kt)("p",null,"Der serielle Plotter ist ein praktisches Tool, um Daten, die mit der seriellen Schnittstelle an den Computer geschickt wurden, als Liniendiagramm darzustellen. Der serielle Plotter befindet sich in der Arduino IDE unter ",(0,r.kt)("em",{parentName:"p"},"Werkzeuge>Serieller Plotter"),". Der serielle Plotter kann nicht zur selben Zeit ge\xf6ffnet sein wie der serielle Monitor."),(0,r.kt)("img",{src:"/img/arduino/SerialMonitor.webp",alt:"Serieller Monitor aninamted",width:"640",className:"center"}),(0,r.kt)("p",null,"Damit der serielle Monitor Daten als Liniendiagramm dargestellt werden, m\xfcssen diese nur mit ",(0,r.kt)("inlineCode",{parentName:"p"},"Serial.println()")," gesendet werden. Wird also bei dem einfachen ",(0,r.kt)("a",{parentName:"p",href:"#beispiel"},"Beispiel zum Auslesen der Analogwerte")," der serielle Plotter anstatt des seriellen Monitors ge\xf6ffnet, wird der Verlauf des Analogwertes graphisch dargestellt."),(0,r.kt)("h2",{id:"links"},"Links"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://www.netzmafia.de/skripten/hardware/Arduino/Programmierung/arduino-analog.html"},"Der Arduino-Analogeingang (Netzmafia)"))))}g.isMDXComponent=!0}}]);