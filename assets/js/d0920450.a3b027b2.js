"use strict";(self.webpackChunkspace_hal_2=self.webpackChunkspace_hal_2||[]).push([[6535],{3905:function(e,n,r){r.d(n,{Zo:function(){return u},kt:function(){return g}});var t=r(7294);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){i(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=t.createContext({}),d=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):l(l({},n),e)),r},u=function(e){var n=d(e.components);return t.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var r=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=d(r),g=i,h=c["".concat(s,".").concat(g)]||c[g]||m[g]||a;return r?t.createElement(h,l(l({ref:n},u),{},{components:r})):t.createElement(h,l({ref:n},u))}));function g(e,n){var r=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=r.length,l=new Array(a);l[0]=c;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var d=2;d<a;d++)l[d]=r[d];return t.createElement.apply(null,l)}return t.createElement.apply(null,r)}c.displayName="MDXCreateElement"},9843:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return u},default:function(){return c}});var t=r(3117),i=r(102),a=(r(7294),r(3905)),l=["components"],o={title:"Einfacher Linienfolger: 3-Stufen-Regler zum Folgen einer Linie.",sidebar_label:"3-Stufen-Regler",description:"Mit einem einfachen Algorithmus kann ein Roboter einer Linie folgen. Der 3-Stufen-Regler f\xfcr den Linienfolger ist einfach zu verstehen und schnell zu programmieren.",custom_edit_url:null,keywords:["Arduino","Programm","Linienfolger","Linienfolger Roboter","Linienfolger Arduino Programm","Kantenfolger","Roboter","Robotik","Pseudocode","3-Stufen-Regler","Linie folgen"]},s=void 0,d={unversionedId:"robotik/edgeFollower",id:"robotik/edgeFollower",isDocsHomePage:!1,title:"Einfacher Linienfolger: 3-Stufen-Regler zum Folgen einer Linie.",description:"Mit einem einfachen Algorithmus kann ein Roboter einer Linie folgen. Der 3-Stufen-Regler f\xfcr den Linienfolger ist einfach zu verstehen und schnell zu programmieren.",source:"@site/docs/robotik/edgeFollower.md",sourceDirName:"robotik",slug:"/robotik/edgeFollower",permalink:"/docs/robotik/edgeFollower",editUrl:null,tags:[],version:"current",lastUpdatedAt:1631966711,formattedLastUpdatedAt:"18.9.2021",frontMatter:{title:"Einfacher Linienfolger: 3-Stufen-Regler zum Folgen einer Linie.",sidebar_label:"3-Stufen-Regler",description:"Mit einem einfachen Algorithmus kann ein Roboter einer Linie folgen. Der 3-Stufen-Regler f\xfcr den Linienfolger ist einfach zu verstehen und schnell zu programmieren.",custom_edit_url:null,keywords:["Arduino","Programm","Linienfolger","Linienfolger Roboter","Linienfolger Arduino Programm","Kantenfolger","Roboter","Robotik","Pseudocode","3-Stufen-Regler","Linie folgen"]},sidebar:"sideBarRobotik",previous:{title:"Erste Schritte",permalink:"/docs/robotik/beginning"},next:{title:"P-Regler",permalink:"/docs/robotik/edge_P_Control"}},u=[{value:"3-Stufen-Algorithmus",id:"3-stufen-algorithmus",children:[],level:2},{value:"Kalibrierung",id:"kalibrierung",children:[{value:"Pseudocode zum Kalibrieren",id:"pseudocode-zum-kalibrieren",children:[],level:3}],level:2}],m={toc:u};function c(e){var n=e.components,r=(0,i.Z)(e,l);return(0,a.kt)("wrapper",(0,t.Z)({},m,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Der einfachste Linienfolger ist, wenn man es genau nimmt, gar kein Linienfolger, sondern ein ",(0,a.kt)("strong",{parentName:"p"},"Kantenfolger"),". Besitzt der ",(0,a.kt)("a",{parentName:"p",href:"/docs/robotik/beginning"},"Roboter")," ",(0,a.kt)("strong",{parentName:"p"},"einen")," ",(0,a.kt)("a",{parentName:"p",href:"/docs/sensoren/irSensor/"},"Bodensensor")," zum Unterscheiden von hellen und dunklen Untergr\xfcnden, so kann damit bei einem gen\xfcgend breiten Strich die Strichkante detektiert und auch gefolgt werden. "),(0,a.kt)("img",{src:"/img/robotik/BotOnLine.png",alt:"Line following robot",width:"600px",className:"center"}),(0,a.kt)("p",null,"Das Grundprinzip des Kantenfolgers (Linienfolger mit nur einem Sensor) ist in der Abbildung dargestellt. Der IR-Sensor detektiert das vom Untergrund reflektierte Licht. In der Abbildung sind beispielhaft Zahlenwerte in rot angegeben. Bei einem wei\xdfen Untergrund wird viel und bei einem dunklen Untergrund wenig Licht detektiert."),(0,a.kt)("h2",{id:"3-stufen-algorithmus"},"3-Stufen-Algorithmus"),(0,a.kt)("p",null,"F\xfcr eine einfache Motorregelung zum Folgen der Linie k\xf6nnen f\xfcr den Roboter drei verschiedene F\xe4lle unterschieden werden:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fall A"),"  Der Sensor ist im Wesentlichen neben der Linie und detektiert viel IR-Licht. Der Roboter sollte mehr nach links zur Linie fahren."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fall B"),"  Der Sensor ist haupts\xe4chlich \xfcber der Linie und detektiert wenig IR-Licht. Der Roboter sollte mehr nach rechts zur Linienkante fahren."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Fall C"),"  Der Sensor befindet sich genau zur H\xe4lfte \xfcber der Linie und ist somit genau \xfcber der Kante. Der Roboter kann einfach geradeaus fahren.")),(0,a.kt)("p",null,"Ein ",(0,a.kt)("strong",{parentName:"p"},"Algorithmus zur Steuerung")," des Roboters (ohne Fall C) k\xf6nnte folgenderma\xdfen aussehen:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"wertKante = 600                        // Wert muss angepasst werden\n\nwiederhole dauerhaft\n    wertIr = messenIrSensor()\n    wenn: wertIr > wertKante           // Fall A\n        fahrenLinks() \n        \n    sonst wenn: wertIr <= wertKante    // Fall B\n        fahrenRechts() \n")),(0,a.kt)("h2",{id:"kalibrierung"},"Kalibrierung"),(0,a.kt)("p",null,"Bleibt die Frage, wie der Sensorwerte f\xfcr die Linienkante ermittelt wird, der Roboter also kalibriert werden kann. Der einfachste, wenn auch nicht genaueste Weg ist, z.B. mit Hilfe der seriellen Schnittstelle den Maximalwert und den Minimalwert des reflektieren IR Lichts f\xfcr die Linie bzw. die Fl\xe4che daneben zu bestimmen. Der Mittelwert aus beiden Werten sollte der Linienkante entsprechen und kann dann als Konstante in das Programm eingef\xfcgt werden."),(0,a.kt)("h3",{id:"pseudocode-zum-kalibrieren"},"Pseudocode zum Kalibrieren"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"minWert = 1023                  // initialisieren der minimalen und maximalen Werte des Sensor\nmaxWert = 0                     // werden sp\xe4ter mit den richtigen Werten \xfcberschrieben\n\ndreheLinks()                    // Motoren zum Linksdrehen aktivieren\nwiederhole 100 mal\n    wertIr = messenIrSensor()   // reflektiertes IR Licht messen\n    wenn (wertIr < minWert)     // Ist der aktuelle IR-Wert kleiner, als der bisher kleinste IR-Wert?\n        minWert = wertIr        // alten minWert mit neuem kleinsten IR Wert \xfcberschreiben\n    wenn (wertIr > maxWert)     // Ist der aktuelle IR-Wert gr\xf6\xdfer, als der bisher gr\xf6\xdfte IR-Wert?\n        maxWert = wertIr        // alten maxWert mit neuem gr\xf6\xdften IR Wert \xfcberschreiben\n\ndreheRechts()                   // zur\xfcckdrehen und weiter messen\nwiederhole 200 mal  \n    wertIr = messenIrSensor()\n    wenn (wertIr < minWert)\n        minWert = wertIr\n    wenn (wertIr > maxWert)\n        maxWert = wertIr\n")),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"}," Der Kanten-Algorithmus funktioniert am besten, wenn der Roboter langsam f\xe4hrt!"))),(0,a.kt)("p",null,"Der vorgestellte 3-Stufen-Regler f\xfchrt in der Regel zu einem sehr unruhigen, wackligen Fahrverhalten. Damit der Roboter geschmeidiger, mit weniger Zick-Zack-Bewegungen der Linie folgt, lohnt es sich den ",(0,a.kt)("a",{parentName:"p",href:"/docs/robotik/edge_P_Control"},"P-Regler zum Linenfolgen")," zu verstehen."),(0,a.kt)("details",{className:"ueben"}," ",(0,a.kt)("summary",null,"Aufgaben"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Programmieren Sie den ",(0,a.kt)("strong",{parentName:"p"},"einfachen Kanten-Algorithmus"),". Passen Sie die Werte der Linienkante an und schreiben Sie geeignete Methoden ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreLinks()")," und ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreRechts()"),". Welchen Einfluss hat der minimale Kurvenradius der zu folgenden Linie auf die Funktionen ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreLinks()")," und ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreRechts()"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Schreiben Sie eine ",(0,a.kt)("strong",{parentName:"p"},"Kalibrierungsfunktion"),", welche (auf Knopfdruck) den Sensorwert f\xfcr die Linienkante automatisch ermittelt. Lassen Sie hierf\xfcr den Roboter in beide Richtungen automatisch \xfcber die Linie drehen und den Maximal- und Minimalwert des reflektierten Lichtes bestimmen. Bestimmen Sie den Sollwert der Linienkante aus dem ermittelten Maximal- und Minimalwert.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Erweitern")," Sie den Algorithmus ",(0,a.kt)("strong",{parentName:"p"},"um den Fall C"),": ",(0,a.kt)("inlineCode",{parentName:"p"},"fahreGeradeaus()"),"."),(0,a.kt)("p",{parentName:"li"},"*Hinweis: Legen Sie einen geeigneten Wertebereich um den Sensorwert der Linienkante fest, bei dem der Roboter geradeaus fahren soll. Nutzen Sie hierf\xfcr die Variable  ",(0,a.kt)("inlineCode",{parentName:"p"},"wertToleranz"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Schreiben Sie ein neues Programm, welches den Kanten-Algorithmus um ",(0,a.kt)("strong",{parentName:"p"},"zwei weitere Stufen (halblinks, halbrechts)")," erweitert, so dass Sie insgesamt 5 F\xe4lle unterscheiden k\xf6nnen. Geben Sie f\xfcr jeden Fall einen ",(0,a.kt)("strong",{parentName:"p"},"Toleranzbereich")," und die notwendige Fahrtrichtung an. Die Bereich ollten relativ zum Minimal- bzw. Maximalwert des IR-Sensors bestimmt werden: "),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"0% - 20%   : links"),(0,a.kt)("li",{parentName:"ul"},"21% - 40%  : halblinks"),(0,a.kt)("li",{parentName:"ul"},"41% - 60%  : geradeaus"),(0,a.kt)("li",{parentName:"ul"},"61% - 80%  : halbrechts"),(0,a.kt)("li",{parentName:"ul"},"81% - 100% : rechts")),(0,a.kt)("p",{parentName:"li"},"Geben Sie f\xfcr die Bereiche keine Werte vor, sondern berechnen Sie diese aus den automatischen Kalibrierungswerten des Sensors (siehe Aufgabe 2). ")))))}c.isMDXComponent=!0}}]);