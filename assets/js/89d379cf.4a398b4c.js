"use strict";(self.webpackChunkspace_hal_2=self.webpackChunkspace_hal_2||[]).push([[221],{3905:function(e,n,a){a.d(n,{Zo:function(){return o},kt:function(){return u}});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=t.createContext({}),p=function(e){var n=t.useContext(m),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},o=function(e){var n=p(e.components);return t.createElement(m.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,m=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),g=p(a),u=r,c=g["".concat(m,".").concat(u)]||g[u]||d[u]||i;return a?t.createElement(c,s(s({ref:n},o),{},{components:a})):t.createElement(c,s({ref:n},o))}));function u(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=g;var l={};for(var m in n)hasOwnProperty.call(n,m)&&(l[m]=n[m]);l.originalType=e,l.mdxType="string"==typeof e?e:r,s[1]=l;for(var p=2;p<i;p++)s[p]=a[p];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}g.displayName="MDXCreateElement"},2195:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return l},contentTitle:function(){return m},metadata:function(){return p},toc:function(){return o},default:function(){return g}});var t=a(3117),r=a(102),i=(a(7294),a(3905)),s=["components"],l={title:"Analoge Werte einlesen",sidebar_label:"12. Analoger Eingang",description:"Einlesen analoger Werte mit dem Arduino. Der Analog-Digital-Wandler beim Arduino.",custom_edit_url:null,keywords:["Arduino","Analoger Eingang","Potentiometer","analogRead","Aufgaben"]},m=void 0,p={unversionedId:"arduino/analogInput",id:"arduino/analogInput",isDocsHomePage:!1,title:"Analoge Werte einlesen",description:"Einlesen analoger Werte mit dem Arduino. Der Analog-Digital-Wandler beim Arduino.",source:"@site/docs/arduino/analogInput.md",sourceDirName:"arduino",slug:"/arduino/analogInput",permalink:"/docs/arduino/analogInput",editUrl:null,tags:[],version:"current",lastUpdatedAt:1630426919,formattedLastUpdatedAt:"31.8.2021",frontMatter:{title:"Analoge Werte einlesen",sidebar_label:"12. Analoger Eingang",description:"Einlesen analoger Werte mit dem Arduino. Der Analog-Digital-Wandler beim Arduino.",custom_edit_url:null,keywords:["Arduino","Analoger Eingang","Potentiometer","analogRead","Aufgaben"]},sidebar:"sideBarArduino",previous:{title:"11. PWM Signal",permalink:"/docs/arduino/pwm"},next:{title:"13. Animationseffekte",permalink:"/docs/arduino/lightAnimation"}},o=[{value:"Beispiel",id:"beispiel",children:[{value:"Code",id:"code",children:[{value:"Erl\xe4uterungen",id:"erl\xe4uterungen",children:[],level:4}],level:3}],level:2},{value:"Eine einfache Balkenanzeige - <code>map()</code>",id:"eine-einfache-balkenanzeige---map",children:[],level:2},{value:"Aufgaben",id:"aufgaben",children:[],level:2}],d={toc:o};function g(e){var n=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Neben digitalen Eing\xe4ngen und PWM Ausg\xe4ngen hat der Arduino auch einige analoge Eing\xe4nge, welche mit einem ",(0,i.kt)("strong",{parentName:"p"},"Analog-Digital-Wandler")," (",(0,i.kt)("em",{parentName:"p"},"analog-digital converter: ADC"),") analoge Spannungswerte zwischen 0 und 5 Volt in diskrete Zahlenwerte umwandelt. Analoge Eing\xe4nge werden beim Arduino mit einem A bezeichnet (also A0, A1, A2, ...)"),(0,i.kt)("p",null,"Der Arduino UNO verwendet intern einen 10 Bit Analog-Digital-Wandler.  Dadurch wird eine beliebige analoge Eingangspannung  in einen ",(0,i.kt)("strong",{parentName:"p"},"diskreten Zahlenwert")," zwischen ",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mn",{parentName:"mrow"},"0")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"0")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,i.kt)("span",{parentName:"span",className:"mord"},"0")))))," und ",(0,i.kt)("span",{parentName:"p",className:"math math-inline"},(0,i.kt)("span",{parentName:"span",className:"katex"},(0,i.kt)("span",{parentName:"span",className:"katex-mathml"},(0,i.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,i.kt)("semantics",{parentName:"math"},(0,i.kt)("mrow",{parentName:"semantics"},(0,i.kt)("mn",{parentName:"mrow"},"1023"),(0,i.kt)("mo",{parentName:"mrow"},"="),(0,i.kt)("msup",{parentName:"mrow"},(0,i.kt)("mn",{parentName:"msup"},"2"),(0,i.kt)("mn",{parentName:"msup"},"10")),(0,i.kt)("mo",{parentName:"mrow"},"\u2212"),(0,i.kt)("mn",{parentName:"mrow"},"1")),(0,i.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"1023 = 2^{10}-1")))),(0,i.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,i.kt)("span",{parentName:"span",className:"mord"},"1"),(0,i.kt)("span",{parentName:"span",className:"mord"},"0"),(0,i.kt)("span",{parentName:"span",className:"mord"},"2"),(0,i.kt)("span",{parentName:"span",className:"mord"},"3"),(0,i.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,i.kt)("span",{parentName:"span",className:"mrel"},"="),(0,i.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.897438em",verticalAlign:"-0.08333em"}}),(0,i.kt)("span",{parentName:"span",className:"mord"},(0,i.kt)("span",{parentName:"span",className:"mord"},"2"),(0,i.kt)("span",{parentName:"span",className:"msupsub"},(0,i.kt)("span",{parentName:"span",className:"vlist-t"},(0,i.kt)("span",{parentName:"span",className:"vlist-r"},(0,i.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141079999999999em"}},(0,i.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,i.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,i.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,i.kt)("span",{parentName:"span",className:"mord mtight"},(0,i.kt)("span",{parentName:"span",className:"mord mtight"},"1"),(0,i.kt)("span",{parentName:"span",className:"mord mtight"},"0"))))))))),(0,i.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,i.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,i.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,i.kt)("span",{parentName:"span",className:"base"},(0,i.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,i.kt)("span",{parentName:"span",className:"mord"},"1")))))," umgewandelt."),(0,i.kt)("p",null,"Die ",(0,i.kt)("strong",{parentName:"p"},"Abtastrate")," des Arduino, also die Anzahl der analogen zu digitalen Wandlungen, liegt bei ca. 10.000 pro Sekunde."),(0,i.kt)("p",null,"Mehr ",(0,i.kt)("a",{parentName:"p",href:"http://www.netzmafia.de/skripten/hardware/Arduino/Programmierung/arduino-analog.html"},"Informationen")," zum Analogeingang des Arduinos gibt es auf der Seite von Prof. Plate von der Hochschule M\xfcnchen."),(0,i.kt)("h2",{id:"beispiel"},"Beispiel"),(0,i.kt)("p",null,"Eine sehr einfache Schaltung zum Einlesen analoger Werte, die garantiert zwischen 0 V und 5 V liegen, ist der ",(0,i.kt)("strong",{parentName:"p"},"Spannungsteiler"),". Wird ein ",(0,i.kt)("strong",{parentName:"p"},"Potentiometer")," wie unten abgebildet zwischen 0 V und 5 V angeschlossen, so kann der dritte Anschluss (mit dem ver\xe4nderlichen Widerstandswert) an einen analogen Eingang gef\xfchrt werden. Je nach Stellung des Potentiometers ergibt sich am Analogeingang eine andere Teilspannung. "),(0,i.kt)("img",{src:"/img/arduino/breadAnalogInput.svg",alt:"drawing",width:"520pt",class:"center"}),(0,i.kt)("h3",{id:"code"},"Code"),(0,i.kt)("p",null,"Mit dem abgebildeten Programmcode kann der analoge Spannenswert des Potentiometers am Arduino-Pin ",(0,i.kt)("inlineCode",{parentName:"p"},"A0")," eingelesen werden. Anschlie\xdfend wird die digitalisierte Spannung als Wert zwischen 0 und 1023 auf dem seriellen Monitor ausgegeben."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-arduino",metastring:'title="analogInput.ino"',title:'"analogInput.ino"'},"#define pinPoti A0\n\nvoid setup(){\n  Serial.begin(9600);\n  //highlight-next-line\n  pinMode(pinPoti, INPUT);            // als Eingang konfigurieren\n}\n\nvoid loop()\n{\n  //highlight-next-line\n  int messWert = analogRead(pinPoti); // als analogen Wert einlesen\n  Serial.println(messWert);           // Ausgabe des Analogwertes auf dem seriellen Monitor\n}\n")),(0,i.kt)("h4",{id:"erl\xe4uterungen"},"Erl\xe4uterungen"),(0,i.kt)("p",null,"Bei dem Program wird zuerst der entsprechende Pin ",(0,i.kt)("inlineCode",{parentName:"p"},"pinPoti")," als Eingang definiert "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-arduino"},"pinMode(pinPoti, INPUT)\n")),(0,i.kt)("p",null,"um anschlie\xdfend mit dem Befehl"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-arduino"},"int value = analogRead(pinPoti);\n")),(0,i.kt)("p",null,"den Pin ",(0,i.kt)("inlineCode",{parentName:"p"},"pinPoti")," auszulesen. "),(0,i.kt)("h2",{id:"eine-einfache-balkenanzeige---map"},"Eine einfache Balkenanzeige - ",(0,i.kt)("inlineCode",{parentName:"h2"},"map()")),(0,i.kt)("p",null,"Ein h\xe4ufiges Problem im Zusammenhang mit dem Einlesen analoger Werte ist das Umrechnen dieser Werte in einen anderen Wertebereich. Als Beispiel soll eine Art Balkenanzeige mit 5 LEDs dienen, welche mit dem Potentiometer gesteuert wird: Je gr\xf6\xdfer der eingelesene Analogwert, desto mehr LEDs sollen leuchten. Die verwendeten LEDs seien an f\xfcnf aufeinander folgenden Pins angeschlossen, um Beispiel Pin ",(0,i.kt)("inlineCode",{parentName:"p"},"2"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"3"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"4"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"5"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"6"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"// Umrechnen des Messwertes zu den Pin-Nummern\npinNummer = map(messWert,0,1023,2,6);\n")),(0,i.kt)("h2",{id:"aufgaben"},"Aufgaben"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),(0,i.kt)("strong",{parentName:"h5"},"\xdcben"))),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Bauen Sie einen ",(0,i.kt)("strong",{parentName:"p"},"Spannungsteiler")," aus zwei Widerst\xe4nden (z.B. 220 \u03a9 und 500 \u03a9) auf. Berechnen Sie die jeweiligen Teilspannungen, wenn die Gesamtspannung 5 Volt betr\xe4gt. Bestimmen Sie anschlie\xdfend sowohl ",(0,i.kt)("strong",{parentName:"p"},"rechnerisch")," als auch ",(0,i.kt)("strong",{parentName:"p"},"messtechnisch")," mit dem Arduino, den digitalen Wert des Analogeingangs. Analysieren Sie m\xf6gliche ",(0,i.kt)("strong",{parentName:"p"},"Abweichungen")," des Messwertes von dem theoretischen Ergebnis.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Bauen Sie eine ",(0,i.kt)("strong",{parentName:"p"},"Balkenanzeige"),", bestehend aus 5 bis 7 LEDs und einem Potentiometer, auf. Programmieren Sie Ihre Schaltung so, dass proportional zur Stellung des Potentiometers die Anzahl der leuchtenden LEDs variiert.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Erweitern Sie das Programm zur Aufgabe 1. Anstatt die LEDs einzelend nur an- oder auszuschalten, sollen die LEDs nun einzeln entsprechend der Potistellung ",(0,i.kt)("strong",{parentName:"p"},"an- oder ausgedimmt")," werden.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Werte, die \xfcber einen analogen Eingang eingelesen wurden, sollen auf dem ",(0,i.kt)("strong",{parentName:"p"},"seriellen Monitor")," mit einer Art ",(0,i.kt)("em",{parentName:"p"},"Balkenanzeige")," dargestellt werden. Je gr\xf6\xdfer der eingelesen Wert, desto mehr ",(0,i.kt)("inlineCode",{parentName:"p"},">")," werden dargestellt. Die ",(0,i.kt)("em",{parentName:"p"},"Balkenanzeige")," soll 25 Balken haben und das Maximum wird durch ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," angezeigt.\nMit einem angeschlossenen Potentiometer soll die ",(0,i.kt)("em",{parentName:"p"},"Balkenanzeige")," gesteuert werden."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-text"},"[Serieller Monitor]\n\n>>>>>....................|\n>>>>>>>>>>>>>>...........|\n>>>>>>>>>>>>>>>>>>>>>>...|\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"F\xfcgen Sie zur ",(0,i.kt)("em",{parentName:"p"},"Balkenanzeige")," noch eine numerisch Angabe des Messwertes in Prozent hinzu."),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-text"}," [Serieller Monitor]\n\n >>>>.....................[13%]\n >>>>>>>>.................[32%]\n >>>>>>>>>>>>>>>>.........[62%]\n >>>>>>>>>>>>>>>>>>>>>>...[89%]\n")))))))}g.isMDXComponent=!0}}]);