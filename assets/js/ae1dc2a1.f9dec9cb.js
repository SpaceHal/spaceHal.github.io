"use strict";(self.webpackChunkspace_hal_2=self.webpackChunkspace_hal_2||[]).push([[5786],{2170:function(e,a,t){t.r(a),t.d(a,{contentTitle:function(){return h},default:function(){return f},frontMatter:function(){return k},metadata:function(){return u},toc:function(){return w}});var n=t(3117),r=t(102),s=t(7294),m=t(3905),i=t(3786),p=[{xTime:10076,speed:0,error:2e3,integral:2e3,power:200},{xTime:20108,speed:399,error:1601,integral:3601,power:360},{xTime:30108,speed:1200,error:800,integral:4e3,power:400},{xTime:40112,speed:1699,error:301,integral:4e3,power:400},{xTime:50108,speed:2150,error:-150,integral:3850,power:385},{xTime:60124,speed:2349,error:-349,integral:3501,power:350},{xTime:70116,speed:2700,error:-700,integral:2801,power:280},{xTime:80124,speed:2650,error:-650,integral:2151,power:215},{xTime:90128,speed:2598,error:-598,integral:1553,power:155},{xTime:100120,speed:2500,error:-500,integral:1053,power:105},{xTime:110124,speed:2200,error:-200,integral:853,power:85},{xTime:120132,speed:1999,error:1,integral:854,power:85},{xTime:130120,speed:1800,error:200,integral:1054,power:105},{xTime:140136,speed:1599,error:401,integral:1455,power:145},{xTime:150136,speed:1648,error:352,integral:1807,power:180},{xTime:160160,speed:1697,error:303,integral:2110,power:211},{xTime:170148,speed:1849,error:151,integral:2261,power:226},{xTime:180160,speed:1798,error:202,integral:2463,power:246},{xTime:190180,speed:1998,error:2,integral:2465,power:246},{xTime:200188,speed:2146,error:-146,integral:2319,power:231},{xTime:210196,speed:2248,error:-248,integral:2071,power:207},{xTime:220200,speed:2299,error:-299,integral:1772,power:177},{xTime:230220,speed:2297,error:-297,integral:1475,power:147},{xTime:240228,speed:2148,error:-148,integral:1327,power:132},{xTime:250236,speed:2048,error:-48,integral:1279,power:127},{xTime:260228,speed:1899,error:101,integral:1380,power:138},{xTime:270248,speed:1896,error:104,integral:1484,power:148},{xTime:280256,speed:1798,error:202,integral:1686,power:168},{xTime:290256,speed:1900,error:100,integral:1786,power:178},{xTime:300272,speed:1896,error:104,integral:1890,power:189},{xTime:310280,speed:1847,error:153,integral:2043,power:204},{xTime:320288,speed:1897,error:103,integral:2146,power:214},{xTime:330300,speed:2099,error:-99,integral:2047,power:204},{xTime:340296,speed:2149,error:-149,integral:1898,power:189},{xTime:350324,speed:2097,error:-97,integral:1801,power:180},{xTime:360332,speed:2098,error:-98,integral:1703,power:170},{xTime:370328,speed:2149,error:-149,integral:1554,power:155},{xTime:380328,speed:2099,error:-99,integral:1455,power:145},{xTime:390336,speed:1949,error:51,integral:1506,power:150},{xTime:400340,speed:1899,error:101,integral:1607,power:160},{xTime:410336,speed:1949,error:51,integral:1658,power:165},{xTime:420344,speed:1899,error:101,integral:1759,power:175},{xTime:430344,speed:1899,error:101,integral:1860,power:186},{xTime:440356,speed:1948,error:52,integral:1912,power:191},{xTime:450352,speed:1900,error:100,integral:2012,power:201},{xTime:460368,speed:2047,error:-47,integral:1965,power:196},{xTime:470376,speed:2097,error:-97,integral:1868,power:186},{xTime:480384,speed:2050,error:-50,integral:1818,power:181},{xTime:490384,speed:2099,error:-99,integral:1719,power:171}],l=["#4e4752","#D62828","#39998f","#bd86a8"];i.kL.defaults.font.size=14,i.kL.defaults.color="black",i.kL.defaults.font.family="Avenir",i.kL.defaults.elements.point=0,i.kL.defaults.datasets.cubicInterpolationMode="monotone",i.kL.defaults.plugins.legend.align="end";var o=2e3/p.length,d={parsing:{xAxisKey:"xTime"},animation:{x:{type:"number",easing:"linear",duration:o,from:NaN,delay:function(e){return"data"!==e.type||e.xStarted?0:(e.xStarted=!0,e.index*o)}},y:{type:"number",easing:"linear",duration:o,from:function(e){return 0===e.index?e.chart.scales.y.getPixelForValue(100):e.chart.getDatasetMeta(e.datasetIndex).data[e.index-1].getProps(["y"],!0).y},delay:function(e){return"data"!==e.type||e.yStarted?0:(e.yStarted=!0,e.index*o)}}},interaction:{intersect:!1},responsive:!0,plugins:{filler:{propagate:!0},legend:{position:"top",font:{weight:"normal"},labels:{boxWidth:15,boxHeight:10}},title:{display:!1,text:"Speed Control",font:{weight:"normal"}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.7)",titleColor:"#474747",bodyColor:"#474747",cornerRadius:2,displayColors:!1,borderColor:"#474747",borderWidth:1}},scales:{x:{grid:{borderWidth:1,borderColor:"black",drawBorder:!1,color:function(e){return 0===e.tick.value?"Black":"LightGrey"},lineWidth:function(e){return 0===e.tick.value?1:.5},drawTicks:!1},ticks:{autoSkipPadding:50,maxRotation:0,padding:20},title:{display:!0,text:"Zeit in ms",align:"center",font:{weight:"italic"}}},y:{grid:{borderWidth:1,borderColor:"black",drawBorder:!1,color:function(e){return 0===e.tick.value?"Black":"LightGrey"},lineWidth:function(e){return 0===e.tick.value?1:.5},drawTicks:!1},ticks:{min:-1e3,max:4005,autoSkipPadding:25,padding:20,beginAtZero:!0},title:{display:!0,text:"Impulse pro Sekunde oder Motorsignal",align:"center",font:{weight:"italic"}},offset:!1,beginAtZero:!0}},datasets:{line:{borderWidth:2}}},c={type:"line",data:{labels:p.map((function(e){return Math.round(e.xTime/1e3)+" ms"})),datasets:[{label:"aktuelle Geschwindigkeit",data:p,cubicInterpolationMode:"monotone",borderColor:l[0],backgroundColor:l[0],parsing:{yAxisKey:"speed"}},{label:"Fehler",data:p,cubicInterpolationMode:"monotone",borderColor:l[1],backgroundColor:l[1],parsing:{yAxisKey:"error"}},{label:"Integral-Anteil",data:p,cubicInterpolationMode:"monotone",borderColor:l[2],backgroundColor:l[2],hidden:!0,parsing:{yAxisKey:"integral"}},{label:"Motorwert",data:p,cubicInterpolationMode:"monotone",borderColor:l[3],backgroundColor:l[3],hidden:!0,parsing:{yAxisKey:"power"}}]}},N=function(){return s.createElement(s.Fragment,null,s.createElement("div",{className:"chartwrapper"},s.createElement(i.x1,{data:c.data,options:d})),s.createElement("div",{className:"btngroup"},s.createElement("button",{className:"btnchart"},"  ki = 0.1  "),s.createElement("button",{className:"btnchart"},"  ki = 0.2  "),s.createElement("button",{className:"btnchart"},"  ki = 0.4  "),s.createElement("button",{className:"btnchart"},"  ki = 0.1, kp=1  "),s.createElement("button",{className:"btnchart"},"  ki = 0.2, kp =1  ")))},g=["components"],k={id:"speedControl",title:"Ein Regler f\xfcr die Geschwindigkeit",sidebar_label:"Geschwindigkeitsregler",description:"Mit einem Integralregler und Rad-Encodern wird die Geschwindigkeit eines Roboters geregelt.",custom_edit_url:null,keywords:["Arduino","Roboter","Robotik","Gesschwindigkeit regeln","Quadraturencoder","Inkrementalgeber","Radencoder","Motorencoder","Integralregler","Zumo 32u4"]},h=void 0,u={unversionedId:"robotik/speedControl",id:"robotik/speedControl",isDocsHomePage:!1,title:"Ein Regler f\xfcr die Geschwindigkeit",description:"Mit einem Integralregler und Rad-Encodern wird die Geschwindigkeit eines Roboters geregelt.",source:"@site/docs/robotik/speedControl.mdx",sourceDirName:"robotik",slug:"/robotik/speedControl",permalink:"/docs/robotik/speedControl",editUrl:null,tags:[],version:"current",frontMatter:{id:"speedControl",title:"Ein Regler f\xfcr die Geschwindigkeit",sidebar_label:"Geschwindigkeitsregler",description:"Mit einem Integralregler und Rad-Encodern wird die Geschwindigkeit eines Roboters geregelt.",custom_edit_url:null,keywords:["Arduino","Roboter","Robotik","Gesschwindigkeit regeln","Quadraturencoder","Inkrementalgeber","Radencoder","Motorencoder","Integralregler","Zumo 32u4"]},sidebar:"sideBarRobotik",previous:{title:"Ge\xadra\xadde\xadaus\xadfahrt",permalink:"/docs/robotik/goStraight"},next:{title:"Anwendung: Barcode",permalink:"/docs/robotik/botBarcode"}},w=[{value:"Vorbetrachtungen zum P-Regler",id:"vorbetrachtungen-zum-p-regler",children:[],level:2},{value:"Integral-Regler f\xfcr die Geschwindigkeit",id:"integral-regler-f\xfcr-die-geschwindigkeit",children:[],level:2},{value:"Integral-Regler",id:"integral-regler",children:[{value:"Integralanteil beschr\xe4nken",id:"integralanteil-beschr\xe4nken",children:[],level:3}],level:2},{value:"Vollst\xe4ndiger PID-Regler",id:"vollst\xe4ndiger-pid-regler",children:[{value:"Pseudocode PID-Regler",id:"pseudocode-pid-regler",children:[],level:3}],level:2}],b={toc:w};function f(e){var a=e.components,t=(0,r.Z)(e,g);return(0,m.kt)("wrapper",(0,n.Z)({},b,t,{components:a,mdxType:"MDXLayout"}),(0,m.kt)("p",null,"Mit den ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/wheelEncoder"},"Motor-Encodern")," kann der Roboter nicht nur ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/goStraight"},"geradeaus fahren")," oder eine ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/wheelEncoder/#aufgaben"},"festgelegte Distanz")," zur\xfccklegen, sondern es ist damit auch m\xf6glich, die Geschwindigkeit des Roboters zu regeln. Ohne Geschwindigkeitsregelung w\xfcrde zum Beispiel ein fester PWM-Wert f\xfcr den Motor bei abnehmender Batteriespannung zu einem langsam fahrenden Roboter f\xfchren. "),(0,m.kt)("h2",{id:"vorbetrachtungen-zum-p-regler"},"Vorbetrachtungen zum P-Regler"),(0,m.kt)("p",null,"Aber wie w\xfcrde ein Regler f\xfcr die Geschwindigkeit aussehen? Vom ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/edge_P_Control/#proportional-regler-p-controller"},"Linienfolger")," ist bereits der Proportional-Regler bekannt. Angenommen, der Roboter soll mit einer Gechwindigkeit von 2000 Encoder-Impulsen pro Sekunde fahren. Dann w\xfcrde sich die Regelabweichung (also der Fehler) wie folgt berechnen:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"fehler = geschwindigkeit - 2000       // Geschwindigkeit in Impulse pro Sekunde\n")),(0,m.kt)("p",null,"Mit den Proportionalregler w\xfcrde dann das Motorsignal f\xfcr die ",(0,m.kt)("inlineCode",{parentName:"p"},"setSpeeds()"),"-Funktion bestimmt werden:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"motorSignal = kp * fehler             // P-Regler f\xfcr das Motorsignal\nsetSpeeds(motorSignal,motorSignal)    // einstellen der Geschwindigkeit\n")),(0,m.kt)("p",null,"Betrachten wir an dieser Stelle die zwei F\xe4lle ",(0,m.kt)("em",{parentName:"p"},"Geschwindigkeit ist 0")," und ",(0,m.kt)("em",{parentName:"p"},"Geschwindigkeit ist 2000"),"."),(0,m.kt)("p",null,(0,m.kt)("strong",{parentName:"p"},"Geschwindigkeit ist 0:")," In diesem Fall ergibt sich ein Fehler von 2000. Mit einem ",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"k"),(0,m.kt)("mi",{parentName:"msub"},"p")),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mn",{parentName:"mrow"},"0.1")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"k_p = 0.1")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.980548em",verticalAlign:"-0.286108em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03148em"}},"k"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15139200000000003em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"-0.03148em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"p")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.286108em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.64444em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"0"),(0,m.kt)("span",{parentName:"span",className:"mord"},"."),(0,m.kt)("span",{parentName:"span",className:"mord"},"1")))))," w\xfcrde sich ein Motorsignal von 200 ergeben und der Roboter w\xfcrde anfangen loszufahren."),(0,m.kt)("p",null,(0,m.kt)("strong",{parentName:"p"},"Geschwindigkeit ist 2000:")," In dem Fall, wenn der Roboter seine Sollgeschwindigkeit von 2000 erreicht h\xe4tte, w\xfcrde der Fehler 0 sein und sich ein Motorsignal von ebenfalls 0 einstellen, der Roboter w\xfcrde also wieder stehen bleiben."),(0,m.kt)("p",null,"Ein Proportional-Regler, der das Motorsignal einfach nur proportional zum Fehler bestimmt, ist also zur Regelung der Geschwindigkeit ungeeignet. Ebenfalls ist der ",(0,m.kt)("a",{parentName:"p",href:"/docs/robotik/lineFollowerPD#differential-anteil"},"Differential-Regler")," ungeeignet, da er nur auf \xc4nderungen des Fehlers eingeht. Steht der Roboter einfach nur still, so \xe4ndert sich der Fehler nicht und es w\xfcrde sich f\xfcr das Motorsignal nur der Wert 0 ergeben."),(0,m.kt)("h2",{id:"integral-regler-f\xfcr-die-geschwindigkeit"},"Integral-Regler f\xfcr die Geschwindigkeit"),(0,m.kt)("p",null,"Die Abbildung stellt das Verhalten eines Integral-Reglers zur Geschwindigkeitsreglung dar."),(0,m.kt)(N,{mdxType:"LineChart"}),(0,m.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,m.kt)("div",{parentName:"div",className:"admonition-heading"},(0,m.kt)("h5",{parentName:"div"},(0,m.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,m.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,m.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\xdcBEN")),(0,m.kt)("div",{parentName:"div",className:"admonition-content"},(0,m.kt)("ol",{parentName:"div"},(0,m.kt)("li",{parentName:"ol"},(0,m.kt)("p",{parentName:"li"},"Beschreiben Sie weitere Situationen, in denen es sinnvoll ist die Motordrehzahl zu regeln.")),(0,m.kt)("li",{parentName:"ol"},(0,m.kt)("p",{parentName:"li"},"Lassen Sie den Roboter \xfcber eine Zeit von ca. 0,5 Sekunden mit verschiedenen Geschwindigkeiten (200, 300, 400) fahren. Bestimmen sie gleichzeitig die ",(0,m.kt)("strong",{parentName:"p"},"aktuelle Geschwindigkeit in Impulsen pro Sekunde"),". Nutzen Sie f\xfcr eine bessere Genauigkeit bei der Zeitmessung sdie ",(0,m.kt)("a",{parentName:"p",href:"https://www.arduino.cc/reference/de/language/functions/time/micros/"},(0,m.kt)("inlineCode",{parentName:"a"},"micros()"))," Funktion. Geben Sie die Geschwindigkeiten w\xe4hrend des Beschleunigungsvorgangs auf dem seriellen Monitor aus."),(0,m.kt)("p",{parentName:"li"},"Stellen Sie abschlie\xdfend ihr Ergebnisse mit einem geeignetem Programm (z.B. ",(0,m.kt)("a",{parentName:"p",href:"https://support.microsoft.com/de-de/topic/darstellen-von-daten-im-punkt-oder-liniendiagramm-4570a80f-599a-4d6b-a155-104a9018b86e#OfficeVersion=Windows"},"Excel")," oder Openoffice) graphisch dar (y-Achse: Impulse pro Sekunde, x-Achse: Zeit in Millisekudnen) und beantworten Sie folgende Fragen:"),(0,m.kt)("ol",{parentName:"li"},(0,m.kt)("li",{parentName:"ol"},"Wie lange ben\xf6tigt der Roboter, bis er seine jeweilige Maximalgeschwindigkeit erreicht hat?"),(0,m.kt)("li",{parentName:"ol"},"Welcher Funktionstyp beschreibt den Zusammenhang zwischen Zeit und Geschwindigkeit am besten.   ")))),(0,m.kt)("pre",{parentName:"div"},(0,m.kt)("code",{parentName:"pre"},"// ...   \n\n// Zum Bestimmen der Geschwindigkeit sollten in einem festen Zeitintervall `dTime` die\n// Encoder-Impulse der R\xe4der bestimmt werden. Damit die Ergebnisse nicht zu stark schwanken\n// (Quantisierungsfehler), sollte das Zeitintervall in welchem die Encoder-Impulse bestimmt\n// werden so festgelegt sein, das im Mittel ca. 50 Impulse detektiert werden.\n\nint dTime = 20 * 1e3;                                  // in Mikrosekunden\n\nmotors.setSpeeds(MOTOR_POWER, MOTOR_POWER);\nwhile (jetzt - startTime < ON_TIME) {                  // Messung dauert insgesamt ON_TIME\n  aktuelleZeit = micros();                             // Nutzen Sie micros() f\xfcr eine bessere Genauigkeit\n  \n  if (aktuelleZeit - letztesIntervall >= dTime) { \n    letztesIntervall = aktuelleZeit;\n    int ticksLeft = encoders.getCountsAndResetRight(); // Impulse auslesen und zur\xfccksetzen\n    int ticksRight = encoders.getCountsAndResetLeft();\n    \n    // ... \n  }  \n}\n// ... \n")))),(0,m.kt)("h2",{id:"integral-regler"},"Integral-Regler"),(0,m.kt)("p",null," Der ",(0,m.kt)("strong",{parentName:"p"},"Integralanteil")," (I-Anteil) eines Regler versucht bleibende Regelabweichungen (",(0,m.kt)("em",{parentName:"p"},"steady state error"),") zu verringern."),(0,m.kt)("p",null,"Der Integralanteil gibt dem Regler ein ",(0,m.kt)("strong",{parentName:"p"},"Ged\xe4chtnis"),", wodurch ",(0,m.kt)("strong",{parentName:"p"},"Abweichungen")," von der Sollgr\xf6\xdfe, die ",(0,m.kt)("strong",{parentName:"p"},"\xfcber einen langen Zeitraum")," bestehen, besonders ber\xfccksichtigt werden."),(0,m.kt)("p",null,"Aus mathematischer Sicht entspricht dieses Ged\xe4chtnis dem ",(0,m.kt)("strong",{parentName:"p"},"Aufsummieren der Fehler")," oder auch dem ",(0,m.kt)("a",{parentName:"p",href:"https://de.wikipedia.org/wiki/Regler#I-Regler_(I-Anteil)"},"Integral der Fehler")," \xfcber die Zeit."),(0,m.kt)("div",{className:"math math-display"},(0,m.kt)("span",{parentName:"div",className:"katex-display"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msubsup",{parentName:"mrow"},(0,m.kt)("mo",{parentName:"msubsup"},"\u222b"),(0,m.kt)("mn",{parentName:"msubsup"},"0"),(0,m.kt)("mi",{parentName:"msubsup"},"t")),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0d"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow"},"\u2248"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"0")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,m.kt)("mo",{parentName:"mrow"},"\u22c5"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"1")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,m.kt)("mo",{parentName:"mrow"},"\u22c5"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mo",{parentName:"mrow"},"\u22ef"),(0,m.kt)("mo",{parentName:"mrow"},"="),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"0")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mi",{parentName:"mrow"},"e"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"t"),(0,m.kt)("mn",{parentName:"msub"},"1")),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mo",{parentName:"mrow"},"+"),(0,m.kt)("mo",{parentName:"mrow"},"\u22ef"),(0,m.kt)("mtext",{parentName:"mrow"},"\u2009"),(0,m.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,m.kt)("mtext",{parentName:"mrow"},"\xa0"),(0,m.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"\u0394"),(0,m.kt)("mi",{parentName:"mrow"},"t")),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\int_{0}^{t} e(t) \\text{ d}t \\approx e(t_0)\\ \\cdot \\Delta t + e(t_1)\\ \\cdot \\Delta t + \\cdots = ( e(t_0) + e(t_1) + \\cdots )\\ \\Delta t")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"2.455406em",verticalAlign:"-0.9119499999999999em"}}),(0,m.kt)("span",{parentName:"span",className:"mop"},(0,m.kt)("span",{parentName:"span",className:"mop op-symbol large-op",style:{marginRight:"0.44445em",position:"relative",top:"-0.0011249999999999316em"}},"\u222b"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"1.5434560000000002em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-1.7880500000000001em",marginLeft:"-0.44445em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"0")))),(0,m.kt)("span",{parentName:"span",style:{top:"-3.8129000000000004em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"t"))))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.9119499999999999em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.16666666666666666em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mord text"},(0,m.kt)("span",{parentName:"span",className:"mord"},"\xa0d")),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"\u2248"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"0")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u22c5"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.76666em",verticalAlign:"-0.08333em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"1")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"\u22c5"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.76666em",verticalAlign:"-0.08333em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.36687em",verticalAlign:"0em"}}),(0,m.kt)("span",{parentName:"span",className:"minner"},"\u22ef"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}}),(0,m.kt)("span",{parentName:"span",className:"mrel"},"="),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2777777777777778em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"0")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"mopen"},"("),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.30110799999999993em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"1")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}}),(0,m.kt)("span",{parentName:"span",className:"mbin"},"+"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222222222222222em"}})),(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,m.kt)("span",{parentName:"span",className:"minner"},"\u22ef"),(0,m.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.16666666666666666em"}}),(0,m.kt)("span",{parentName:"span",className:"mclose"},")"),(0,m.kt)("span",{parentName:"span",className:"mspace"},"\xa0"),(0,m.kt)("span",{parentName:"span",className:"mord"},"\u0394"),(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"t")))))),(0,m.kt)("p",null,"F\xfcr den Pseudocode kann das Integral mit Hilfe der einzelnen Summen ","\\","( e(t_i)\\cdot \\Delta t ","\\",") berechnet werden. Zu jedem neuen Zeitpunkt wird zu dem bereits berechneten Integral-Wert der neue Fehler ","\\","( e(t_i)\\cdot \\Delta t ","\\",") hinzuaddiert. Dadurch wird aus dem  komplizierten Integral eine sehr einfache Addition:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-txt"},"integral = integral + error * dTime // Aufsummieren des Fehler zum Integralanteil\n")),(0,m.kt)("p",null,"Die, \xe4hnlich wie beim Differential-Anteil, zu einer einfachen Summe wird, wenn bei konstanten Zeitintervallen ",(0,m.kt)("inlineCode",{parentName:"p"},"dTime")," weggelassen wird:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-txt"},"integral = integral + error // Aufaddieren des Fehlers liefert den Integralanteil\n")),(0,m.kt)("p",null,"Zur Regelung der Motorgeschwindigkeit wird der Integral-Anteil, \xe4hnlich wie der Proportional-Anteil, mit einem Faktor ","\\","(k_i","\\",") gewichtet. F\xfcr die Geschwindigkeits\xe4nderung ",(0,m.kt)("inlineCode",{parentName:"p"},"deltaSpeed")," ergibt sich zusammen mit dem P-Anteil folgender Pseudocode:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-txt"},"integral   = integral + error             // Aufsummieren des Fehler zum Integralanteil\ndeltaSpeed = error * kp + integral * ki   // PI-Regler mit den Faktoren kp und ki\n")),(0,m.kt)("h3",{id:"integralanteil-beschr\xe4nken"},"Integralanteil beschr\xe4nken"),(0,m.kt)("p",null,"Wird der ",(0,m.kt)("strong",{parentName:"p"},"Integralanteil nicht unendlich gro\xdf"),", wenn der Fehler kontinuierlich aufaddiert wird?"),(0,m.kt)("p",null,"Im Prinzip sollte der Integral-Anteil nicht unendlich gro\xdf werden, da der Fehler sowohl positiv, als auch negativ sein kann und sich beim Aufaddieren somit ausgleichen w\xfcrde. In der Praxis sieht es jedoch oft anders aus und der ",(0,m.kt)("strong",{parentName:"p"},"Integralanteil")," kann ",(0,m.kt)("strong",{parentName:"p"},"unerw\xfcnscht gro\xdfe Werte")," annehmen. "),(0,m.kt)("p",null,"Besteht f\xfcr eine ",(0,m.kt)("em",{parentName:"p"},"lange Zeit")," ein positiver Fehler (zum Beispiel durch eine enge Kurve) so ergibt sich ein recht gro\xdfer Integralanteil. Wird durch den Regler der Fehler nach einer Weile wieder auf Null oder ein wenig ins Negative gebracht, w\xe4re das Ziel erreicht, und der Roboter bef\xe4nde sich auf der Linie. Das Problem ist jedoch, dass der bereits stark angewachsene positive Integralanteil durch das Aufaddieren von wenigen negativen Fehlerwerten nicht schnell genug auf Null zur\xfcckgeht. "),(0,m.kt)("p",null,"Bei der Berechnung von ",(0,m.kt)("inlineCode",{parentName:"p"},"deltaSpeed")," w\xfcrde der Integralanteil also immer noch den aufaddierten positiven Fehler korrigieren wollen, w\xe4hrend der Roboter bereits wieder \xfcber der Linie ist. Daher macht es Sinn, ",(0,m.kt)("strong",{parentName:"p"},"f\xfcr den Integral-Anteil nur eine bestimmte Anzahl von Fehlerwerten zu ber\xfccksichtigen.")),(0,m.kt)("p",null,"Wird nur der aktuelle Fehler (",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"e"),(0,m.kt)("mi",{parentName:"msub"},"n"))),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"e_n")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.58056em",verticalAlign:"-0.15em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.151392em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"n")))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,m.kt)("span",{parentName:"span"})))))))))),") und der vorhergehenden Fehler (",(0,m.kt)("span",{parentName:"p",className:"math math-inline"},(0,m.kt)("span",{parentName:"span",className:"katex"},(0,m.kt)("span",{parentName:"span",className:"katex-mathml"},(0,m.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,m.kt)("semantics",{parentName:"math"},(0,m.kt)("mrow",{parentName:"semantics"},(0,m.kt)("msub",{parentName:"mrow"},(0,m.kt)("mi",{parentName:"msub"},"e"),(0,m.kt)("mrow",{parentName:"msub"},(0,m.kt)("mi",{parentName:"mrow"},"n"),(0,m.kt)("mo",{parentName:"mrow"},"\u2212"),(0,m.kt)("mn",{parentName:"mrow"},"1")))),(0,m.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"e_{n-1}")))),(0,m.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,m.kt)("span",{parentName:"span",className:"base"},(0,m.kt)("span",{parentName:"span",className:"strut",style:{height:"0.638891em",verticalAlign:"-0.208331em"}}),(0,m.kt)("span",{parentName:"span",className:"mord"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,m.kt)("span",{parentName:"span",className:"msupsub"},(0,m.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.301108em"}},(0,m.kt)("span",{parentName:"span",style:{top:"-2.5500000000000003em",marginLeft:"0em",marginRight:"0.05em"}},(0,m.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,m.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mtight"},(0,m.kt)("span",{parentName:"span",className:"mord mathnormal mtight"},"n"),(0,m.kt)("span",{parentName:"span",className:"mbin mtight"},"\u2212"),(0,m.kt)("span",{parentName:"span",className:"mord mtight"},"1"))))),(0,m.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,m.kt)("span",{parentName:"span",className:"vlist-r"},(0,m.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.208331em"}},(0,m.kt)("span",{parentName:"span"})))))))))),") ber\xfccksichtigt, so w\xfcrde sich folgender Pseudocode ergeben:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-txt"},"integral = lastError + error;\n")),(0,m.kt)("p",null,"Sollten mehr als nur die letzte beiden Fehlerwerte ber\xfccksichtigt werden, so kann durch den Arduinobefehl ",(0,m.kt)("inlineCode",{parentName:"p"},"constrain()")," der Wert des Integralanteils auf sinnvolle Werte begrenzt werden:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-arduino"},"integral = constrain(integral,-4000,4000);\n")),(0,m.kt)("h2",{id:"vollst\xe4ndiger-pid-regler"},"Vollst\xe4ndiger PID-Regler"),(0,m.kt)("p",null,"F\xfchrt man den P, I und D-Anteil zusammen, erh\xe4lt man den so genannten PID-Regler. Der PID-Regler ist in der Regelungstechnik sehr weit verbreitet und findet \xfcberall dort eine Anwendung, wo ein vorgegebener Wert (Temperatur, Wasserstand oder Linienposition) trotz Abweichungen durch \xe4u\xdfere Einfl\xfcsse eingehalten werden soll."),(0,m.kt)("p",null,"Beim PID-Regler ergibt sich die Geschwindigkeits\xe4nderung aus der Summer des Proportional-, des Intergral- und des Differential-Anteils:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre"},"deltaSpeed   = (error * kp) + (integral * ki) + (differential * kd)  \n")),(0,m.kt)("h3",{id:"pseudocode-pid-regler"},"Pseudocode PID-Regler"),(0,m.kt)("p",null,"Der gesamte Pseudocode ohne Ber\xfccksichtigung von ",(0,m.kt)("inlineCode",{parentName:"p"},"dTime")," w\xfcrde dann folgenderma\xdfen aussehen:"),(0,m.kt)("pre",null,(0,m.kt)("code",{parentName:"pre",className:"language-go"},"\nwertLinie = 500                             // Sollwert (Sensorwert genau \xfcber der Linie)\nkp        = 1                               // Proportional-Faktor\nki        = 0.1                             // Integral-Faktor\nkd        = 0.1                             // Differential-Faktor\nintegral  = 0                               // Startwert f\xfcr Integral-Anteil\nerror_alt = 0                               // alter Fehlerwert\n\n\nwiederhole immer\n    wertSensor   = leseSensor()             // `wertSensor` sei ein Wert zwischen  0 und 1000\n    error        = wertLinie - wertSensor   // Fehlerwert, Regeldifferenz\n    integral     = integral + error         // Integral-Anteil \n    differential = error - error_alt\n    error_alt    = error\n                                     \n    deltaSpeed   = error * kp +  integral * ki + differential * kd  // PID-Regler\n                                \n    leftSpeed    = leftSpeed - deltaSpeed   // Drehzahl links bestimmen\n    rightSpeed   = rightSpeed + deltaSpeed  // Drehzahl rechts bestimmen\n\n    begrenze(leftSpeed)                     // Drehzahl auf sinnvolle Werte begrenzen\n    begrenze(rightSpeed)                    // (beim Zumo zwischen -400 und +400)\n    setMotors(leftSpeed,rightSpeed)         // Aktualisieren der Motordrehzahlen\n")))}f.isMDXComponent=!0}}]);